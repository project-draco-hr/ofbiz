{
  if (out != null) {
    Writer outWriter=new OutputStreamWriter(out);
    try {
      outWriter.write(outText);
      outWriter.close();
    }
 catch (    IOException e) {
      String errMsg="Error writing message to output stream: " + e.toString();
      Debug.logError(e,errMsg,module);
      return ServiceUtil.returnError(errMsg);
    }
  }
 else   if (UtilValidate.isNotEmpty(saveToFilename)) {
    try {
      File outdir=new File(saveToDirectory);
      if (!outdir.exists()) {
        outdir.mkdir();
      }
      Writer outWriter=new PrintWriter(new BufferedWriter(new OutputStreamWriter(new FileOutputStream(new File(outdir,saveToFilename)),"UTF-8")));
      outWriter.write(outText);
      outWriter.close();
    }
 catch (    Exception e) {
      String errMsg="Error saving message to file [" + saveToFilename + "]: "+ e.toString();
      Debug.logError(e,errMsg,module);
      return ServiceUtil.returnError(errMsg);
    }
  }
 else   if (UtilValidate.isNotEmpty(sendToUrl)) {
    HttpClient http=new HttpClient(sendToUrl);
    http.setHostVerificationLevel(SSLUtil.HOSTCERT_NO_CHECK);
    http.setAllowUntrusted(true);
    http.setDebug(true);
    if (UtilValidate.isNotEmpty(certAlias)) {
      http.setClientCertificateAlias(certAlias);
    }
    if (UtilValidate.isNotEmpty(basicAuthUsername)) {
      http.setBasicAuthInfo(basicAuthUsername,basicAuthPassword);
    }
    http.setContentType("text/xml");
    http.setKeepAlive(true);
    try {
      http.post(outText);
    }
 catch (    Exception e) {
      String errMsg="Error posting message to server with URL [" + sendToUrl + "]: "+ e.toString();
      Debug.logError(e,errMsg,module);
      return ServiceUtil.returnError(errMsg);
    }
  }
 else {
    if (Debug.infoOn())     Debug.logInfo("No send to information, so here is the message: " + outText,module);
    return ServiceUtil.returnError("No send to information pass (url, file, or out stream)");
  }
  return null;
}
