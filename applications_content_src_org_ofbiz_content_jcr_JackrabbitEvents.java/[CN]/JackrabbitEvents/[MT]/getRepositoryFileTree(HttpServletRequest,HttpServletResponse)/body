{
  GenericValue userLogin=(GenericValue)request.getSession().getAttribute("userLogin");
  Delegator delegator=(Delegator)request.getAttribute("delegator");
  JcrFileHelper jackrabbit=new JcrFileHelperJackrabbit(userLogin,delegator,null,"/fileHome");
  try {
    JSONArray fileTree=jackrabbit.getJsonFileTree();
    request.setAttribute("fileTree",StringUtil.wrapString(fileTree.toString()));
  }
 catch (  RepositoryException e) {
    Debug.logError(e,module);
    request.setAttribute("_ERROR_MESSAGE_",e.toString());
    return "error";
  }
 finally {
    jackrabbit.closeSession();
  }
  return "success";
}
