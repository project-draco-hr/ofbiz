{
  String message=request.getParameter("message");
  String language=request.getParameter("msgLocale");
  JcrTextHelper jackrabbit=new JcrTextHelperJackrabbit(request);
  String newContentId=null;
  try {
    newContentId=jackrabbit.storeNewTextData(message,language);
    if (newContentId == null) {
      request.setAttribute("_ERROR_MESSAGE_","Couldn't be created, maybe the node already exists. Use another node name to store you're content.");
      return "error";
    }
    request.setAttribute("newContentId",newContentId);
  }
 catch (  PathNotFoundException e) {
    Debug.logError(e,module);
    request.setAttribute("_ERROR_MESSAGE_",e.getMessage());
    return "error";
  }
catch (  RepositoryException e) {
    Debug.logError(e,module);
    request.setAttribute("_ERROR_MESSAGE_",e.getMessage());
    return "error";
  }
catch (  GenericEntityException e) {
    Debug.logError(e,module);
    request.setAttribute("_ERROR_MESSAGE_",e.getMessage());
    return "error";
  }
 finally {
    jackrabbit.closeSession();
  }
  return "success";
}
