{
  JcrFileHelper jackrabbit=new JcrFileHelperJackrabbit(request);
  InputStream file=null;
  try {
    file=jackrabbit.getFileContent();
    UtilHttp.streamContentToBrowser(response,IOUtils.toByteArray(file),jackrabbit.getFileMimeType(),jackrabbit.getNodeName());
  }
 catch (  RepositoryException e) {
    Debug.logError(e,module);
    request.setAttribute("_ERROR_MESSAGE_",e.toString());
    return "error";
  }
catch (  IOException e) {
    Debug.logError(e,module);
    request.setAttribute("_ERROR_MESSAGE_",e.toString());
    return "error";
  }
 finally {
    jackrabbit.closeSession();
    if (file != null) {
      try {
        file.close();
      }
 catch (      IOException e) {
        Debug.logError(e,module);
        request.setAttribute("_ERROR_MESSAGE_",e.toString());
        return "error";
      }
    }
  }
  return "success";
}
