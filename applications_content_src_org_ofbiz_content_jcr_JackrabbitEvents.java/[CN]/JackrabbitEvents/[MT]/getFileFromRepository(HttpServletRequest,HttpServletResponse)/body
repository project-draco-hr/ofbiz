{
  GenericValue userLogin=(GenericValue)request.getAttribute("userLogin");
  String node=request.getParameter("path");
  if (UtilValidate.isEmpty(node)) {
    String msg="A node path is missing, please pass the path to the node which should be read from the repository.";
    Debug.logError(msg,module);
    request.setAttribute("_ERROR_MESSAGE_",msg);
    return "error";
  }
  RepositoryAccess repositoryAccess=new RepositoryAccessJackrabbit(userLogin);
  OfbizRepositoryMappingJackrabbitFile file=(OfbizRepositoryMappingJackrabbitFile)repositoryAccess.getContentObject(node);
  InputStream fileStream=file.getResource().getData();
  String fileName=file.getPath();
  if (fileName.indexOf("/") != -1) {
    fileName=fileName.substring(fileName.indexOf("/") + 1);
  }
  try {
    UtilHttp.streamContentToBrowser(response,IOUtils.toByteArray(fileStream),file.getResource().getMimeType(),fileName);
  }
 catch (  IOException e) {
    Debug.logError(e,module);
    request.setAttribute("_ERROR_MESSAGE_",e.getMessage());
    return "error";
  }
  return "success";
}
