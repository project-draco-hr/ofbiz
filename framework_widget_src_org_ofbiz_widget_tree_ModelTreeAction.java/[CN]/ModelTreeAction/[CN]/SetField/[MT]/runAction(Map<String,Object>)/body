{
  String globalStr=this.globalExdr.expandString(context);
  boolean global="true".equals(globalStr);
  Object newValue=null;
  if (this.fromField != null) {
    newValue=this.fromField.get(context);
  }
 else   if (this.valueExdr != null) {
    newValue=this.valueExdr.expandString(context);
  }
  if (UtilValidate.isNotEmpty(this.type)) {
    try {
      newValue=ObjectType.simpleTypeConvert(newValue,this.type,null,(TimeZone)context.get("timeZone"),(Locale)context.get("locale"),true);
    }
 catch (    GeneralException e) {
      String errMsg="Could not convert field value for the field: [" + this.field.getOriginalName() + "] to the ["+ this.type+ "] type for the value ["+ newValue+ "]: "+ e.toString();
      Debug.logError(e,errMsg,module);
      throw new IllegalArgumentException(errMsg);
    }
  }
  this.field.put(context,newValue);
  if (global) {
    Map<String,Object> globalCtx=UtilGenerics.checkMap(context.get("globalContext"));
    if (globalCtx != null) {
      this.field.put(globalCtx,newValue);
    }
  }
  Map<String,Object> page=UtilGenerics.checkMap(context.get("page"));
  if (page != null) {
    this.field.put(page,newValue);
  }
}
