{
  BufferedReader reader=null;
  PrintWriter writer=null;
  try {
    reader=new BufferedReader(new InputStreamReader(client.getInputStream()));
    String request=reader.readLine();
    writer=new PrintWriter(client.getOutputStream(),true);
    Control control;
    if (request != null && !request.isEmpty() && request.contains(":")) {
      String key=request.substring(0,request.indexOf(':'));
      if (key.equals(config.adminKey)) {
        control=Control.valueOf(request.substring(request.indexOf(':') + 1));
        if (control == null) {
          control=Control.FAIL;
        }
      }
 else {
        control=Control.FAIL;
      }
    }
 else {
      control=Control.FAIL;
    }
    control.processRequest(Start.this,writer);
  }
  finally {
    if (reader != null) {
      reader.close();
    }
    if (writer != null) {
      writer.flush();
      writer.close();
    }
  }
}
