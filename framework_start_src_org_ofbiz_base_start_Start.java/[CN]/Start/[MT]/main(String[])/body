{
  Command command=null;
  List<String> loaderArgs=new ArrayList<String>(args.length);
  for (  String arg : args) {
    if (arg.equals("-help") || arg.equals("-?")) {
      command=checkCommand(command,Command.HELP);
    }
 else     if (arg.equals("-status")) {
      command=checkCommand(command,Command.STATUS);
    }
 else     if (arg.equals("-shutdown")) {
      command=checkCommand(command,Command.SHUTDOWN);
    }
 else     if (arg.startsWith("-")) {
      if (!arg.contains("portoffset")) {
        command=checkCommand(command,Command.COMMAND);
      }
      loaderArgs.add(arg.substring(1));
    }
 else {
      command=checkCommand(command,Command.COMMAND);
      if (command == Command.COMMAND) {
        loaderArgs.add(arg);
      }
 else {
        command=Command.HELP_ERROR;
      }
    }
  }
  if (command == null) {
    command=Command.COMMAND;
    loaderArgs.add("start");
  }
  if (command == Command.HELP) {
    help(System.out);
    return;
  }
 else   if (command == Command.HELP_ERROR) {
    help(System.err);
    System.exit(1);
  }
  instance.init(args,command == Command.COMMAND);
  try {
    if (command == Command.STATUS) {
      System.out.println("Current Status : " + instance.status());
    }
 else     if (command == Command.SHUTDOWN) {
      System.out.println("Shutting down server : " + instance.shutdown());
    }
 else {
      instance.start();
    }
  }
 catch (  Exception e) {
    e.printStackTrace();
    System.exit(99);
  }
}
