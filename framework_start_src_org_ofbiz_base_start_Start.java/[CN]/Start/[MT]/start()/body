{
  createLogDirectory();
  createListenerThread();
  if (config.useShutdownHook) {
    Runtime.getRuntime().addShutdownHook(new Thread(){
      @Override public void run(){
        shutdownServer();
      }
    }
);
  }
 else {
    System.out.println("Shutdown hook disabled");
  }
  initStartLoaders();
  if (!startStartLoaders()) {
    if (this.serverState.get() == ServerState.STOPPING) {
      return;
    }
 else {
      throw new StartupException("Error during start.");
    }
  }
  if (config.shutdownAfterLoad) {
    stopServer();
  }
}
