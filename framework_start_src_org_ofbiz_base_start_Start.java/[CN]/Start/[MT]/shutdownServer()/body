{
  ServerState currentState;
  do {
    currentState=this.serverState.get();
    if (currentState == ServerState.STOPPING) {
      return;
    }
  }
 while (!this.serverState.compareAndSet(currentState,ServerState.STOPPING));
synchronized (this.loaders) {
    for (int i=this.loaders.size(); i > 0; i--) {
      StartupLoader loader=this.loaders.get(i - 1);
      try {
        loader.unload();
      }
 catch (      Exception e) {
        e.printStackTrace();
      }
    }
  }
  if (this.adminPortThread != null && this.adminPortThread.isAlive()) {
    this.adminPortThread.interrupt();
  }
}
