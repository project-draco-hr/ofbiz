{
  Classpath classPath=new Classpath();
  Classpath libraryPath=new Classpath(System.getProperty("java.library.path"));
  try {
    this.config.initClasspath(classPath,libraryPath);
  }
 catch (  Exception e) {
    throw new StartupException("Couldn't initialize classpath",e);
  }
  ClassLoader classloader=classPath.getClassLoader();
  Thread.currentThread().setContextClassLoader(classloader);
synchronized (this.loaders) {
    for (    Map<String,String> loaderMap : config.loaders) {
      if (this.serverState.get() == ServerState.STOPPING) {
        return;
      }
      try {
        String loaderClassName=loaderMap.get("class");
        Class<?> loaderClass=classloader.loadClass(loaderClassName);
        StartupLoader loader=(StartupLoader)loaderClass.newInstance();
        loader.load(config,loaderArgs.toArray(new String[loaderArgs.size()]));
        loaders.add(loader);
      }
 catch (      ClassNotFoundException e) {
        throw new StartupException(e.getMessage(),e);
      }
catch (      InstantiationException e) {
        throw new StartupException(e.getMessage(),e);
      }
catch (      IllegalAccessException e) {
        throw new StartupException(e.getMessage(),e);
      }
    }
    this.loaders.trimToSize();
  }
  return;
}
