{
  GenericDelegator delegator=dctx.getDelegator();
  String orderId=(String)context.get("orderId");
  OrderReadHelper orh=null;
  try {
    orh=new OrderReadHelper(delegator,orderId);
  }
 catch (  IllegalArgumentException e) {
    return ServiceUtil.returnError(e.getMessage());
  }
  Double adj=(Double)context.get("adjustment");
  if (adj == null) {
    adj=new Double(0);
  }
  Boolean countNewReturnItems=(Boolean)context.get("countNewReturnItems");
  if (countNewReturnItems == null) {
    countNewReturnItems=Boolean.FALSE;
  }
  double returnTotal=orh.getOrderReturnedTotal(countNewReturnItems.booleanValue());
  double orderTotal=orh.getOrderGrandTotal();
  double available=orderTotal - returnTotal - adj.doubleValue();
  Map result=ServiceUtil.returnSuccess();
  result.put("availableReturnTotal",new Double(available));
  result.put("orderTotal",new Double(orderTotal));
  result.put("returnTotal",new Double(returnTotal));
  return result;
}
