{
  if (quantity == null)   getProductProduced();
  double previousQuantity=quantity.doubleValue(), componentQuantity;
  this.quantity=newQuantity;
  this.quantityIsUpdated=true;
  this.updateCompletionDate=true;
  if (productionRunComponents == null)   getProductionRunComponents();
  for (Iterator iter=productionRunComponents.iterator(); iter.hasNext(); ) {
    GenericValue component=(GenericValue)iter.next();
    componentQuantity=component.getDouble("estimatedQuantity").doubleValue();
    component.set("estimatedQuantity",new Double(componentQuantity / previousQuantity * newQuantity.doubleValue()));
  }
}
