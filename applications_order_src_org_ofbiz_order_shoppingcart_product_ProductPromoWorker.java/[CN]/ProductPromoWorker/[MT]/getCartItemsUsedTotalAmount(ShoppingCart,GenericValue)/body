{
  BigDecimal totalAmount=BigDecimal.ZERO;
  Iterator<ShoppingCartItem> cartItemsIter=cart.iterator();
  while (cartItemsIter.hasNext()) {
    ShoppingCartItem cartItem=cartItemsIter.next();
    BigDecimal quantityUsed=cartItem.getPromoQuantityCandidateUseActionAndAllConds(productPromoAction);
    if (quantityUsed.compareTo(BigDecimal.ZERO) > 0) {
      totalAmount=totalAmount.add(quantityUsed.multiply(cartItem.getBasePrice()));
    }
  }
  return totalAmount;
}
