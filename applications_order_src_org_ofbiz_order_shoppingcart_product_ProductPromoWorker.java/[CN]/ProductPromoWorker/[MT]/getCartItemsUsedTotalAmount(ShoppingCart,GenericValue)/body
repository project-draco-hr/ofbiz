{
  double totalAmount=0;
  Iterator cartItemsIter=cart.iterator();
  while (cartItemsIter.hasNext()) {
    ShoppingCartItem cartItem=(ShoppingCartItem)cartItemsIter.next();
    double quantityUsed=cartItem.getPromoQuantityCandidateUseActionAndAllConds(productPromoAction);
    if (quantityUsed > 0) {
      totalAmount+=quantityUsed * cartItem.getBasePrice();
    }
  }
  return totalAmount;
}
