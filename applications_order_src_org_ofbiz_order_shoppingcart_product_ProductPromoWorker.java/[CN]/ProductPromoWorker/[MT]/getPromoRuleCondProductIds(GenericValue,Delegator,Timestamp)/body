{
  List<GenericValue> productPromoCategoriesAll=delegator.findByAnd("ProductPromoCategory",UtilMisc.toMap("productPromoId",productPromoCond.get("productPromoId")),null,true);
  List<GenericValue> productPromoCategories=EntityUtil.filterByAnd(productPromoCategoriesAll,UtilMisc.toMap("productPromoRuleId","_NA_","productPromoCondSeqId","_NA_"));
  productPromoCategories.addAll(EntityUtil.filterByAnd(productPromoCategoriesAll,UtilMisc.toMap("productPromoRuleId",productPromoCond.get("productPromoRuleId"),"productPromoCondSeqId",productPromoCond.get("productPromoCondSeqId"))));
  List<GenericValue> productPromoProductsAll=delegator.findByAnd("ProductPromoProduct",UtilMisc.toMap("productPromoId",productPromoCond.get("productPromoId")),null,true);
  List<GenericValue> productPromoProducts=EntityUtil.filterByAnd(productPromoProductsAll,UtilMisc.toMap("productPromoRuleId","_NA_","productPromoCondSeqId","_NA_"));
  productPromoProducts.addAll(EntityUtil.filterByAnd(productPromoProductsAll,UtilMisc.toMap("productPromoRuleId",productPromoCond.get("productPromoRuleId"),"productPromoCondSeqId",productPromoCond.get("productPromoCondSeqId"))));
  Set<String> productIds=FastSet.newInstance();
  makeProductPromoIdSet(productIds,productPromoCategories,productPromoProducts,delegator,nowTimestamp,false);
  return productIds;
}
