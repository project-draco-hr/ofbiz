{
  final StringBuffer buf=new StringBuffer();
  final String specification=getArg(args,"specification");
  return new Writer(out){
    public void write(    char cbuf[],    int off,    int len){
      buf.append(cbuf,off,len);
    }
    public void flush() throws IOException {
      out.flush();
    }
    public void close() throws IOException {
      if (specification == null)       throw new IOException("Barcode specification not given");
      BarcodeGenerator generator=BarcodeFactory.getBarcodeGenerator(specification);
      if (generator == null)       throw new IOException("Barcode generator creation failed");
      try {
        out.write(generator.generateSvgXml(buf.toString()));
      }
 catch (      BarcodeException e) {
        throw new IOException(e.toString());
      }
catch (      ConfigurationException e) {
        throw new IOException(e.toString());
      }
    }
  }
;
}
