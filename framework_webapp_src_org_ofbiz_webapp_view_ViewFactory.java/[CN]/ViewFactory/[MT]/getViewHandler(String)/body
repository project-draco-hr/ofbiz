{
  if (type == null || type.length() == 0) {
    type="default";
  }
  if (handlers.size() == 0) {
    this.preLoadAll();
  }
  ViewHandler handler=(ViewHandler)handlers.get(type);
  if (handler == null) {
synchronized (ViewFactory.class) {
      handler=(ViewHandler)handlers.get(type);
      if (handler == null) {
        handler=this.loadViewHandler(type);
        handlers.put(type,handler);
      }
    }
    if (handler == null) {
      throw new ViewHandlerException("No handler found for type: " + type);
    }
  }
  return handler;
}
