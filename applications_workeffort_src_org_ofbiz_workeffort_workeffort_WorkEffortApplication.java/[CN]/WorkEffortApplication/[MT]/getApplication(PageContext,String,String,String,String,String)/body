{
  GenericValue workEffort=(GenericValue)pageContext.getAttribute(workEffortAttrName);
  GenericDelegator delegator=(GenericDelegator)pageContext.getRequest().getAttribute("delegator");
  try {
    Collection applications=getApplications(workEffort);
    if (applications.iterator().hasNext()) {
      GenericValue workflowActivityTool=(GenericValue)applications.iterator().next();
      if (applicationAttrName != null && applicationAttrName.length() != 0)       pageContext.setAttribute(applicationAttrName,workflowActivityTool);
      Map contextSignature=new HashMap();
      Map resultSignature=new HashMap();
      getApplicationSignatures(delegator,workflowActivityTool,contextSignature,resultSignature);
      Map context=getApplicationContext(delegator,contextSignature,(String)workflowActivityTool.get("actualParameters"),(String)workflowActivityTool.get("extendedAttributes"),getContext(workEffort),(String)workEffort.get("workEffortId"));
      if (applicationContextSignatureName != null && applicationContextSignatureName.length() != 0 && contextSignature != null)       pageContext.setAttribute(applicationContextSignatureName,contextSignature);
      if (applicationResultSignatureName != null && applicationResultSignatureName.length() != 0 && resultSignature != null)       pageContext.setAttribute(applicationResultSignatureName,resultSignature);
      if (applicationContextName != null && applicationContextName.length() != 0)       pageContext.setAttribute(applicationContextName,context);
    }
  }
 catch (  GenericEntityException gex) {
    throw new WfException("Can't find Applications in Workeffort [" + workEffort.get("workEffortId") + "]",gex);
  }
}
