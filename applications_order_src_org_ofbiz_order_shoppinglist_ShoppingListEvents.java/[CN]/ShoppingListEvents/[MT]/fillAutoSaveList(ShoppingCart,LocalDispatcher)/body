{
  if (cart != null && dispatcher != null) {
    GenericValue userLogin=ShoppingListEvents.getCartUserLogin(cart);
    Delegator delegator=cart.getDelegator();
    String autoSaveListId=cart.getAutoSaveListId();
    if (autoSaveListId == null) {
      autoSaveListId=getAutoSaveListId(delegator,dispatcher,null,userLogin,cart.getProductStoreId());
      cart.setAutoSaveListId(autoSaveListId);
    }
    try {
      String[] itemsArray=makeCartItemsArray(cart);
      if (itemsArray != null && itemsArray.length != 0) {
        addBulkFromCart(delegator,dispatcher,cart,userLogin,autoSaveListId,null,itemsArray,false,false);
      }
    }
 catch (    IllegalArgumentException e) {
      throw new GeneralException(e.getMessage(),e);
    }
  }
}
