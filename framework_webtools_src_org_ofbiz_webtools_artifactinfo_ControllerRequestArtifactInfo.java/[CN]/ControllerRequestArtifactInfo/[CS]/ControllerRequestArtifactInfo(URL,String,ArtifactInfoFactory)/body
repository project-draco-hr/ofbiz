{
  super(aif);
  this.controllerXmlUrl=controllerXmlUrl;
  this.requestUri=requestUri;
  this.requestInfoMap=aif.getControllerRequestInfoMap(controllerXmlUrl,requestUri);
  if (this.requestInfoMap == null) {
    throw new GeneralException("Controller request with name [" + requestUri + "] is not defined in controller file ["+ controllerXmlUrl+ "].");
  }
  if ("service".equals(this.requestInfoMap.get(ConfigXMLReader.EVENT_TYPE))) {
    String serviceName=(String)this.requestInfoMap.get(ConfigXMLReader.EVENT_METHOD);
    this.serviceCalledByRequestEvent=this.aif.getServiceArtifactInfo(serviceName);
  }
  Map<String,String> responseMap=(Map<String,String>)this.requestInfoMap.get(ConfigXMLReader.RESPONSE_MAP);
  for (  String responseValue : responseMap.values()) {
    if (responseValue.startsWith("view:")) {
      String viewUri=responseValue.substring(5);
      ControllerViewArtifactInfo artInfo=this.aif.getControllerViewArtifactInfo(controllerXmlUrl,viewUri);
      this.viewsThatAreResponsesToThisRequest.add(artInfo);
      UtilMisc.addToSetInMap(this,this.aif.allRequestInfosReferringToView,artInfo.getUniqueId());
    }
 else     if (responseValue.startsWith("request:")) {
      String otherRequestUri=responseValue.substring(8);
      ControllerRequestArtifactInfo artInfo=this.aif.getControllerRequestArtifactInfo(controllerXmlUrl,otherRequestUri);
      this.requestsThatAreResponsesToThisRequest.add(artInfo);
      UtilMisc.addToSetInMap(this,this.aif.allRequestInfosReferringToRequest,artInfo.getUniqueId());
    }
 else     if (responseValue.startsWith("request-redirect:")) {
      String otherRequestUri=responseValue.substring(17);
      ControllerRequestArtifactInfo artInfo=this.aif.getControllerRequestArtifactInfo(controllerXmlUrl,otherRequestUri);
      this.requestsThatAreResponsesToThisRequest.add(artInfo);
      UtilMisc.addToSetInMap(this,this.aif.allRequestInfosReferringToRequest,artInfo.getUniqueId());
    }
 else     if (responseValue.startsWith("request-redirect-noparam:")) {
      String otherRequestUri=responseValue.substring(25);
      ControllerRequestArtifactInfo artInfo=this.aif.getControllerRequestArtifactInfo(controllerXmlUrl,otherRequestUri);
      this.requestsThatAreResponsesToThisRequest.add(artInfo);
      UtilMisc.addToSetInMap(this,this.aif.allRequestInfosReferringToRequest,artInfo.getUniqueId());
    }
  }
}
