{
  boolean isWarehouseManaged=false;
  try {
    if ("WIP".equals(getProduct().getString("productTypeId"))) {
      return false;
    }
    List pfs=null;
    if (UtilValidate.isEmpty(facilityId)) {
      pfs=getProduct().getRelatedCache("ProductFacility");
    }
 else {
      pfs=getProduct().getRelatedCache("ProductFacility",UtilMisc.toMap("facilityId",facilityId),null);
    }
    if (UtilValidate.isEmpty(pfs)) {
      if (getSubstitutedNode() != null && getSubstitutedNode().getProduct() != null) {
        if (UtilValidate.isEmpty(facilityId)) {
          pfs=getSubstitutedNode().getProduct().getRelatedCache("ProductFacility");
        }
 else {
          pfs=getSubstitutedNode().getProduct().getRelatedCache("ProductFacility",UtilMisc.toMap("facilityId",facilityId),null);
        }
      }
    }
    if (UtilValidate.isNotEmpty(pfs)) {
      for (int i=0; i < pfs.size(); i++) {
        GenericValue pf=(GenericValue)pfs.get(i);
        if (UtilValidate.isNotEmpty(pf.get("minimumStock")) && UtilValidate.isNotEmpty(pf.get("reorderQuantity"))) {
          isWarehouseManaged=true;
          break;
        }
      }
    }
  }
 catch (  GenericEntityException gee) {
    Debug.logError("Problem in BOMNode.isWarehouseManaged()",module);
  }
  return isWarehouseManaged;
}
