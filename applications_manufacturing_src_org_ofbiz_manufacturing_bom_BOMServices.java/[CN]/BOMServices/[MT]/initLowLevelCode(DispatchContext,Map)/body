{
  Map result=new HashMap();
  GenericDelegator delegator=dctx.getDelegator();
  LocalDispatcher dispatcher=dctx.getDispatcher();
  try {
    List products=delegator.findAll("Product",UtilMisc.toList("isVirtual DESC"));
    Iterator productsIt=products.iterator();
    Long zero=new Long(0);
    List allProducts=new ArrayList();
    while (productsIt.hasNext()) {
      GenericValue product=(GenericValue)productsIt.next();
      product.set("billOfMaterialLevel",zero);
      allProducts.add(product);
    }
    delegator.storeAll(allProducts);
    Debug.logInfo("Low Level Code set to 0 for all the products",module);
    productsIt=products.iterator();
    while (productsIt.hasNext()) {
      GenericValue product=(GenericValue)productsIt.next();
      try {
        Map depthResult=dispatcher.runSync("updateLowLevelCode",UtilMisc.toMap("productIdTo",product.getString("productId"),"alsoComponents",Boolean.valueOf(false),"alsoVariants",Boolean.valueOf(false)));
        Debug.logInfo("Product [" + product.getString("productId") + "] Low Level Code ["+ depthResult.get("lowLevelCode")+ "]",module);
      }
 catch (      Exception exc) {
        Debug.logWarning(exc.getMessage(),module);
      }
    }
  }
 catch (  Exception e) {
    return ServiceUtil.returnError("Error running initLowLevelCode: " + e.getMessage());
  }
  return result;
}
