{
  this.delegator=delegator;
  SecretKey kek;
  try {
    kek=UtilValidate.isNotEmpty(kekText) ? DesCrypt.getDesKey(Base64.decodeBase64(kekText)) : null;
  }
 catch (  GeneralException e) {
    throw new EntityCryptoException(e);
  }
  handlers=new StorageHandler[]{new SaltedBase64StorageHandler(kek),NormalHashStorageHandler,OldFunnyHashStorageHandler};
}
