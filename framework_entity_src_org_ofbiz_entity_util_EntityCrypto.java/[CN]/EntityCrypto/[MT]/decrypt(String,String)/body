{
  try {
    byte[] encryptedBytes=StringUtil.fromHexString(str);
    byte[] decryptedBytes=DesCrypt.decrypt(this.getKey(keyName),encryptedBytes);
    if (encryptedBytes.equals(decryptedBytes)) {
      encryptedBytes=StringUtil.fromHexStringOldFunnyVariety(str);
      decryptedBytes=DesCrypt.decrypt(this.getKey(keyName),encryptedBytes);
    }
    return UtilObject.getObject(decryptedBytes);
  }
 catch (  GeneralException e) {
    try {
      byte[] encryptedBytes=StringUtil.fromHexStringOldFunnyVariety(str);
      byte[] decryptedBytes=DesCrypt.decrypt(this.getKey(keyName),encryptedBytes);
      return UtilObject.getObject(decryptedBytes);
    }
 catch (    GeneralException e1) {
      throw new EntityCryptoException(e);
    }
  }
}
