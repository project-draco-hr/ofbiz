{
  Element rootElement=null;
  try {
    rootElement=handler.getDocument().getDocumentElement();
  }
 catch (  GenericConfigException e) {
    Debug.logError(e,module);
    return;
  }
  List ecaList=UtilXml.childElementList(rootElement,"eca");
  Iterator ecaIt=ecaList.iterator();
  int numDefs=0;
  while (ecaIt.hasNext()) {
    Element e=(Element)ecaIt.next();
    String entityName=e.getAttribute("entity");
    String eventName=e.getAttribute("event");
    Map eventMap=(Map)ecaCache.get(entityName);
    List rules=null;
    if (eventMap == null) {
      eventMap=FastMap.newInstance();
      rules=FastList.newInstance();
      ecaCache.put(entityName,eventMap);
      eventMap.put(eventName,rules);
    }
 else {
      rules=(List)eventMap.get(eventName);
      if (rules == null) {
        rules=FastList.newInstance();
        eventMap.put(eventName,rules);
      }
    }
    rules.add(new EntityEcaRule(e));
    numDefs++;
  }
  Debug.logImportant("Loaded " + numDefs + " Entity ECA definitions from "+ handler.getLocation()+ " in loader "+ handler.getLoaderName(),module);
}
