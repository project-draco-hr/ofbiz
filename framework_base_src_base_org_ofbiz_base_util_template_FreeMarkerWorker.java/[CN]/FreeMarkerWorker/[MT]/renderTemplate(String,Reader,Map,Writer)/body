{
  if (context == null) {
    context=new HashMap();
  }
  Configuration config=makeDefaultOfbizConfig();
  Template template=new Template(templateIdString,templateReader,config);
  Locale locale=(Locale)context.get("locale");
  if (locale == null)   locale=Locale.getDefault();
  template.setSetting("locale",locale.toString());
  addAllOfbizTransforms(context);
  cachedTemplates.put(templateIdString,template);
  template.process(context,outWriter);
}
