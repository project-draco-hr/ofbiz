{
  if (UtilValidate.isEmpty(templateLocation)) {
    throw new IllegalArgumentException("FreeMarker template location null or empty");
  }
  URL locationUrl=null;
  try {
    locationUrl=FlexibleLocation.resolveLocation(templateLocation);
  }
 catch (  MalformedURLException e) {
    throw new IllegalArgumentException(e.getMessage());
  }
  if (locationUrl == null) {
    throw new IllegalArgumentException("FreeMarker file not found at location: " + templateLocation);
  }
  Reader templateReader=new InputStreamReader(locationUrl.openStream());
  String locationProtocol=locationUrl.getProtocol();
  if ("file".equals(locationProtocol) && Debug.verboseOn()) {
    String locationFile=locationUrl.getFile();
    int lastSlash=locationFile.lastIndexOf("/");
    String locationDir=locationFile.substring(0,lastSlash);
    String filename=locationFile.substring(lastSlash + 1);
    Debug.logVerbose("FreeMarker render: filename=" + filename + ", locationDir="+ locationDir,module);
  }
  return templateReader;
}
