{
  Map templateRoot=FastMap.newInstance();
  Set varNames=null;
  try {
    varNames=env.getKnownVariableNames();
  }
 catch (  TemplateModelException e1) {
    Debug.logError(e1,"Error getting FreeMarker variable names, will not put pass current context on to sub-content",module);
  }
  if (varNames != null) {
    Iterator varNameIter=varNames.iterator();
    while (varNameIter.hasNext()) {
      String varName=(String)varNameIter.next();
      templateRoot.put(varName,FreeMarkerWorker.getWrappedObject(varName,env));
    }
  }
  return templateRoot;
}
