{
  Configuration config=new Configuration();
  config.setObjectWrapper(BeansWrapper.getDefaultInstance());
  config.setSetting("datetime_format","yyyy-MM-dd HH:mm:ss.SSS");
  config.setSetting("number_format","0.##########");
  if (locationDir != null) {
    File locationDirFile=new File(locationDir);
    if (locationDirFile != null) {
      if (locationDirFile.isFile()) {
        throw new IllegalArgumentException("Could not create FTL Configuration object because locationDir is a file: " + locationDir);
      }
      if (locationDirFile != null && locationDirFile.isDirectory()) {
        config.setDirectoryForTemplateLoading(locationDirFile);
      }
    }
  }
  return config;
}
