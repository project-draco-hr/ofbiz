{
  Map result=new HashMap();
  GenericDelegator delegator=ctx.getDelegator();
  Security security=ctx.getSecurity();
  String workEffortId=(String)context.get("workEffortId");
  Map appendContext=(Map)context.get("currentContext");
  if (appendContext == null || appendContext.size() == 0) {
    result.put(ModelService.RESPONSE_MESSAGE,ModelService.RESPOND_ERROR);
    result.put(ModelService.ERROR_MESSAGE,"The passed context is empty");
  }
  GenericValue userLogin=(GenericValue)context.get("userLogin");
  if (!hasPermission(security,workEffortId,userLogin)) {
    result.put(ModelService.RESPONSE_MESSAGE,ModelService.RESPOND_ERROR);
    result.put(ModelService.ERROR_MESSAGE,"You do not have permission to access this activity");
    return result;
  }
  try {
    WorkflowClient client=WfFactory.getClient(ctx);
    client.appendContext(workEffortId,appendContext);
    result.put(ModelService.RESPONSE_MESSAGE,ModelService.RESPOND_SUCCESS);
  }
 catch (  WfException we) {
    we.printStackTrace();
    result.put(ModelService.RESPONSE_MESSAGE,ModelService.RESPOND_ERROR);
    result.put(ModelService.ERROR_MESSAGE,we.getMessage());
  }
  return result;
}
