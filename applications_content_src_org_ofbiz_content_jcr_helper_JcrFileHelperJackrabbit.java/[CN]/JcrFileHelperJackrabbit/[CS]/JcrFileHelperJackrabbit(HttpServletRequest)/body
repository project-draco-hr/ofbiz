{
  GenericValue userLogin=(GenericValue)request.getSession().getAttribute("userLogin");
  super.userLogin=userLogin;
  Session session=null;
  try {
    session=JackrabbitContainer.getUserSession(userLogin);
  }
 catch (  RepositoryException re) {
    Debug.logError(re,module);
    return;
  }
  String contentId=request.getParameter("contentId");
  String repositoryNode=request.getParameter("repositoryNode");
  if (UtilValidate.isEmpty(contentId) && (UtilValidate.isEmpty(repositoryNode) || "/".equals(repositoryNode))) {
    repositoryNode=fileRootNode;
  }
  repositoryNode=addRepositoryFileHomeNode(repositoryNode);
  Delegator delegator=(Delegator)request.getAttribute("delegator");
  try {
    super.orm=new OfbizRepositoryMappingJackrabbit(delegator,session,contentId,repositoryNode);
  }
 catch (  GenericEntityException e) {
    Debug.logError(e,module);
    return;
  }
catch (  RepositoryException e) {
    Debug.logError(e,module);
    return;
  }
}
