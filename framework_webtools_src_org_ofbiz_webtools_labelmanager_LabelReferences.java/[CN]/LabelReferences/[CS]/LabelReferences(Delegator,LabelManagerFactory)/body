{
  this.delegator=delegator;
  this.labels=factory.getLabels();
  DelegatorElement delegatorInfo=null;
  try {
    delegatorInfo=EntityConfig.getInstance().getDelegator(delegator.getDelegatorBaseName());
  }
 catch (  GenericEntityConfException e) {
    Debug.logWarning(e,"Exception thrown while getting delegator config: ",module);
  }
  String modelName="main";
  if (delegatorInfo != null) {
    modelName=delegatorInfo.getEntityModelReader();
  }
  LocalDispatcher dispatcher=ServiceContainer.getLocalDispatcher(modelName,delegator);
  this.dispatchContext=dispatcher.getDispatchContext();
  Collection<LabelInfo> infoList=this.labels.values();
  for (  LabelInfo labelInfo : infoList) {
    this.labelSet.add(labelInfo.getLabelKey());
  }
  Collection<ComponentConfig> componentConfigs=ComponentConfig.getAllComponents();
  for (  ComponentConfig config : componentConfigs) {
    String rootFolder=config.getRootLocation();
    rootFolder=rootFolder.replace('\\','/');
    if (!rootFolder.endsWith("/")) {
      rootFolder=rootFolder + "/";
    }
    this.rootFolders.add(rootFolder);
  }
}
