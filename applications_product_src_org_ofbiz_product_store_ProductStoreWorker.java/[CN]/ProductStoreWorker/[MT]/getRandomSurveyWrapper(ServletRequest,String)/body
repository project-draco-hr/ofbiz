{
  GenericValue productStore=getProductStore(request);
  HttpSession session=((HttpServletRequest)request).getSession();
  if (productStore == null) {
    return null;
  }
  GenericValue userLogin=(GenericValue)session.getAttribute("userLogin");
  if (userLogin == null) {
    userLogin=(GenericValue)session.getAttribute("autoUserLogin");
  }
  String partyId=userLogin != null ? userLogin.getString("partyId") : null;
  Map<String,Object> passThruFields=UtilHttp.getParameterMap(((HttpServletRequest)request));
  return getRandomSurveyWrapper(productStore.getDelegator(),productStore.getString("productStoreId"),groupName,partyId,passThruFields);
}
