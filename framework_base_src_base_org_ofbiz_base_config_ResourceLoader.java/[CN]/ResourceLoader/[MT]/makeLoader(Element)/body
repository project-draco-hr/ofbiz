{
  if (loaderElement == null)   return null;
  String loaderName=loaderElement.getAttribute("name");
  String className=loaderElement.getAttribute("class");
  ResourceLoader loader=null;
  try {
    Class lClass=null;
    if (className != null && className.length() > 0) {
      try {
        ClassLoader classLoader=Thread.currentThread().getContextClassLoader();
        lClass=classLoader.loadClass(className);
      }
 catch (      ClassNotFoundException e) {
        throw new GenericConfigException("Error loading Resource Loader class \"" + className + "\"",e);
      }
    }
    try {
      loader=(ResourceLoader)lClass.newInstance();
    }
 catch (    IllegalAccessException e) {
      throw new GenericConfigException("Error loading Resource Loader class \"" + className + "\"",e);
    }
catch (    InstantiationException e) {
      throw new GenericConfigException("Error loading Resource Loader class \"" + className + "\"",e);
    }
  }
 catch (  SecurityException e) {
    throw new GenericConfigException("Error loading Resource Loader class \"" + className + "\"",e);
  }
  if (loader != null) {
    loader.init(loaderName,loaderElement.getAttribute("prefix"),loaderElement.getAttribute("prepend-env"));
  }
  return loader;
}
