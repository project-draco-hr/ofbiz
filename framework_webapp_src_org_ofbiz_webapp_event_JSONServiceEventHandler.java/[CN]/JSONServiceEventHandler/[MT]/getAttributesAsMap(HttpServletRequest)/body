{
  Map<String,Object> attrMap=FastMap.newInstance();
  Enumeration<String> en=request.getAttributeNames();
  while (en.hasMoreElements()) {
    String name=(String)en.nextElement();
    Object val=request.getAttribute(name);
    if (val instanceof java.sql.Timestamp) {
      val=val.toString();
    }
    if (val instanceof String || val instanceof Number || val instanceof Map|| val instanceof List) {
      if (Debug.verboseOn())       Debug.logVerbose("Adding attribute to JSON output: " + name,module);
      attrMap.put(name,val);
    }
  }
  return attrMap;
}
