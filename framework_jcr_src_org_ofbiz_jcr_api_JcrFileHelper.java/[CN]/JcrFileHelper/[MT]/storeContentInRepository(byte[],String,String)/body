{
  if (UtilValidate.isEmpty(folderPath)) {
    throw new ObjectContentManagerException("Please specify a folder path, the folder path should not be empty!");
  }
 else   if (ConstantsJackrabbit.ROOTPATH.equals(folderPath)) {
    throw new ObjectContentManagerException("Please specify a folder, a file content can't be stored directly under root.");
  }
  OfbizRepositoryMappingJackrabbitResource ormResource=new OfbizRepositoryMappingJackrabbitResource();
  ormResource.setData(new ByteArrayInputStream(fileData));
  ormResource.setMimeType(getMimeTypeFromInputStream(new ByteArrayInputStream(fileData)));
  ormResource.setLastModified(new GregorianCalendar());
  OfbizRepositoryMappingJackrabbitFile ormFile=new OfbizRepositoryMappingJackrabbitFile();
  ormFile.setCreationDate(new GregorianCalendar());
  ormFile.setResource(ormResource);
  ormFile.setPath(fileName);
  folderPath=JcrUtilJackrabbit.createAbsoluteNodePath(folderPath);
  if (access.getSession().itemExists(folderPath)) {
    OfbizRepositoryMapping orm=access.getContentObject(folderPath);
    if (orm instanceof OfbizRepositoryMappingJackrabbitFolder) {
      OfbizRepositoryMappingJackrabbitFolder ormFolder=(OfbizRepositoryMappingJackrabbitFolder)orm;
      ormFolder.addChild(ormFile);
      access.updateContentObject(ormFolder);
    }
  }
 else {
    OfbizRepositoryMappingJackrabbitFolder ormFolder=new OfbizRepositoryMappingJackrabbitFolder();
    ormFolder.addChild(ormFile);
    ormFolder.setPath(folderPath);
    access.storeContentObject(ormFolder);
  }
}
