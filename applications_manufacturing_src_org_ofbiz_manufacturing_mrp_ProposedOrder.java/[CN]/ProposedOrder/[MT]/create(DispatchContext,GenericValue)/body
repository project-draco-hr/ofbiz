{
  LocalDispatcher dispatcher=ctx.getDispatcher();
  Map parameters=UtilMisc.toMap("userLogin",userLogin);
  parameters.put("productId",productId);
  parameters.put("facilityId",facilityId);
  parameters.put("requiredByDate",requiredByDate);
  parameters.put("requirementStartDate",requirementStartDate);
  parameters.put("quantity",new Double(quantity));
  parameters.put("requirementTypeId",(isbuild ? "MRP_PRO_PROD_ORDER" : "MRP_PRO_PURCH_ORDER"));
  if (mrpName != null) {
    parameters.put("description","MRP_" + mrpName);
  }
 else {
    parameters.put("description","Automatically generated by MRP");
  }
  try {
    Map result=dispatcher.runSync("createRequirement",parameters);
    return (String)result.get("requirementId");
  }
 catch (  GenericServiceException e) {
    Debug.logError(e,"Error : createRequirement with parameters = " + parameters + "--"+ e.getMessage(),module);
    return null;
  }
}
