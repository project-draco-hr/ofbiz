{
  Locale locale=(Locale)context.get("locale");
  try {
    String configString="productsExport.properties";
    String devID=UtilProperties.getPropertyValue(configString,"productsExport.eBay.devID");
    String appID=UtilProperties.getPropertyValue(configString,"productsExport.eBay.appID");
    String certID=UtilProperties.getPropertyValue(configString,"productsExport.eBay.certID");
    String token=UtilProperties.getPropertyValue(configString,"productsExport.eBay.token");
    String compatibilityLevel=UtilProperties.getPropertyValue(configString,"productsExport.eBay.compatibilityLevel");
    String siteID=UtilProperties.getPropertyValue(configString,"productsExport.eBay.siteID");
    String xmlGatewayUri=UtilProperties.getPropertyValue(configString,"productsExport.eBay.xmlGatewayUri");
    StringBuffer dataItemsXml=new StringBuffer();
    if (!ServiceUtil.isFailure(buildDataItemsXml(dctx,context,dataItemsXml,token))) {
      Map result=postItem(xmlGatewayUri,dataItemsXml,devID,appID,certID,"AddItem",compatibilityLevel,siteID);
      if (ServiceUtil.isFailure(result)) {
        return ServiceUtil.returnFailure(ServiceUtil.getErrorMessage(result));
      }
 else {
        Debug.logError("Error during authentication to eBay Account",module);
        return ServiceUtil.returnFailure(UtilProperties.getMessage(resource,"productsExportToEbay.errorDuringAuthenticationToEbay",locale));
      }
    }
  }
 catch (  Exception e) {
    Debug.logError("Exception in exportToEbay " + e,module);
    return ServiceUtil.returnFailure(UtilProperties.getMessage(resource,"productsExportToEbay.exceptionInExportToEbay",locale));
  }
  return ServiceUtil.returnSuccess(UtilProperties.getMessage(resource,"productsExportToEbay.productItemsSentCorrecltyToEbay",locale));
}
