{
  try {
    CAPTCHA_FILE_PATH=new java.io.File(".").getCanonicalPath();
    CAPTCHA_FILE_PATH+=File.separator + "runtime" + File.separator+ "tempfiles";
    CAPTCHA_FILE_PATH+=File.separator + "captcha" + File.separator;
    File test=new File(CAPTCHA_FILE_PATH);
    if (!test.exists()) {
      test.mkdir();
    }
    CAPTCHA_FILE_NAME=UtilHttp.getSessionId(request).substring(0,6);
    CAPTCHA_FILE_NAME+=UtilHttp.getSessionId(request).substring(UtilHttp.getSessionId(request).length() - 11,UtilHttp.getSessionId(request).indexOf(".")) + "_";
    Date date=new Date();
    CAPTCHA_FILE_NAME+=date.toString() + ".jpg";
    CAPTCHA_FILE_PATH+=CAPTCHA_FILE_NAME;
    request.setAttribute("fileName",CAPTCHA_FILE_NAME);
    request.setAttribute("ID_KEY",ID_KEY);
    System.out.println("\n\nPath =  " + CAPTCHA_FILE_PATH + "\n");
    System.out.println("Captcha Key =  " + ID_KEY + "\n\n");
    ImageIO.write(image,"jpg",new File(CAPTCHA_FILE_PATH));
  }
 catch (  IOException e) {
    return;
  }
}
