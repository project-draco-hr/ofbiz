{
  String fileName=UtilHttp.getSessionId(request).substring(0,6);
  fileName+="_" + UtilHttp.getSessionId(request).substring(UtilHttp.getSessionId(request).length() - 11,UtilHttp.getSessionId(request).indexOf("."));
  try {
    CAPTCHA_FILE_PATH=new java.io.File(".").getCanonicalPath();
    CAPTCHA_FILE_PATH+=File.separator + "runtime" + File.separator+ "tempfiles";
    CAPTCHA_FILE_PATH+=File.separator + "captcha" + File.separator;
    File test=new File(CAPTCHA_FILE_PATH);
    if (!test.exists()) {
      test.mkdir();
    }
    CAPTCHA_FILE_PATH+=fileName + ".png";
    CAPTCHA_FILE_NAME=fileName + ".png";
    request.setAttribute("fileName",CAPTCHA_FILE_NAME);
    System.out.println("\n\nPath =  " + CAPTCHA_FILE_PATH + "\n");
    System.out.println("Captcha Key =  " + ID_KEY + "\n\n");
    ImageIO.write(image,"png",new File(CAPTCHA_FILE_PATH));
  }
 catch (  IOException e) {
    return;
  }
}
