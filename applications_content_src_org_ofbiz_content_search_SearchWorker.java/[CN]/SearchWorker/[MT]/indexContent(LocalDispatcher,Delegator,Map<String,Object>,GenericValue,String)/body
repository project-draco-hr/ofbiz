{
  Directory directory=FSDirectory.open(new File(getIndexPath(path)));
  long savedWriteLockTimeout=IndexWriterConfig.getDefaultWriteLockTimeout();
  Analyzer analyzer=new StandardAnalyzer(LUCENE_VERSION);
  IndexWriterConfig conf=new IndexWriterConfig(LUCENE_VERSION,analyzer);
  IndexWriter writer=null;
  try {
    try {
      IndexWriterConfig.setDefaultWriteLockTimeout(2000);
      writer=new IndexWriter(directory,conf);
    }
  finally {
      IndexWriterConfig.setDefaultWriteLockTimeout(savedWriteLockTimeout);
    }
    if (Debug.infoOn())     Debug.logInfo("Used old directory:" + directory.toString(),module);
  }
 catch (  FileNotFoundException e) {
    try {
      IndexWriterConfig.setDefaultWriteLockTimeout(2000);
      writer=new IndexWriter(directory,conf);
    }
  finally {
      IndexWriterConfig.setDefaultWriteLockTimeout(savedWriteLockTimeout);
    }
    if (Debug.infoOn())     Debug.logInfo("Created new directory:" + directory.toString(),module);
  }
  indexContent(dispatcher,delegator,context,content,writer);
  writer.forceMerge(1);
  writer.close();
}
