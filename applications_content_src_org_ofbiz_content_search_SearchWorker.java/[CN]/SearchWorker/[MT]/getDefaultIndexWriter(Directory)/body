{
  IndexWriter writer=null;
  long savedWriteLockTimeout=IndexWriterConfig.getDefaultWriteLockTimeout();
  Analyzer analyzer=new StandardAnalyzer(LUCENE_VERSION);
  IndexWriterConfig conf=new IndexWriterConfig(LUCENE_VERSION,analyzer);
  IndexWriterConfig.setDefaultWriteLockTimeout(2000);
  try {
    writer=new IndexWriter(directory,conf);
  }
 catch (  CorruptIndexException e) {
    Debug.logError("Corrupted lucene index: " + e.getMessage(),module);
  }
catch (  LockObtainFailedException e) {
    Debug.logError("Could not obtain Lock on lucene index " + e.getMessage(),module);
  }
catch (  IOException e) {
    Debug.logError(e.getMessage(),module);
  }
 finally {
    IndexWriterConfig.setDefaultWriteLockTimeout(savedWriteLockTimeout);
  }
  return writer;
}
