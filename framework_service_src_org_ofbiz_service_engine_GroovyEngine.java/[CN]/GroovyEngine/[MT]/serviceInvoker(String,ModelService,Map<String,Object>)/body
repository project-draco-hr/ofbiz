{
  if (UtilValidate.isEmpty(modelService.location)) {
    throw new GenericServiceException("Cannot run Groovy service with empty location");
  }
  String location=this.getLocation(modelService);
  try {
    Object resultObj=GroovyUtil.runScriptAtLocation(location,context);
    if (resultObj != null && resultObj instanceof Map) {
      return (Map<String,Object>)resultObj;
    }
 else     if (context.get("result") != null && context.get("result") instanceof Map) {
      return (Map<String,Object>)context.get("result");
    }
  }
 catch (  GeneralException e) {
    throw new GenericServiceException(e);
  }
  return ServiceUtil.returnSuccess();
}
