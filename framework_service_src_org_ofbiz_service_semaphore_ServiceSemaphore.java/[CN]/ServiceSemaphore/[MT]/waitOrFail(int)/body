{
switch (mode) {
case SEMAPHORE_MODE_FAIL:
    throw new SemaphoreFailException("Service [" + model.name + "] is locked");
case SEMAPHORE_MODE_WAIT:
  if (wait < MAX_WAIT) {
    ++wait;
    try {
      Thread.sleep(SLEEP);
    }
 catch (    InterruptedException e) {
      Debug.logInfo(e,"Sleep interrupted: ServiceSemaphone.waitOrFail()",module);
    }
    acquire();
    break;
  }
 else {
    throw new SemaphoreWaitException("Service [" + model.name + "] wait timeout exceeded");
  }
case SEMAPHORE_MODE_NONE:
Debug.logWarning("Semaphore mode [none] attempted to aquire a lock; but should not have!",module);
break;
default :
throw new SemaphoreFailException();
}
}
