{
  if (basePath == null) {
    basePath=System.getProperty("ofbiz.home");
  }
  List<File> fileList=FastList.newInstance();
  FileUtil.searchFiles(fileList,new File(basePath),new FilenameFilter(){
    public boolean accept(    File dir,    String name){
      File file=new File(dir,name);
      if (file.getName().startsWith(".")) {
        return false;
      }
      if (file.isDirectory()) {
        return true;
      }
      if (name.endsWith(".xml")) {
        String xmlFile=null;
        try {
          xmlFile=FileUtil.readTextFile(file,true).toString();
        }
 catch (        FileNotFoundException e) {
          Debug.logWarning("Error reading xml file [" + file + "] for service implementation: "+ e.toString(),module);
          return false;
        }
catch (        IOException e) {
          Debug.logWarning("Error reading xml file [" + file + "] for service implementation: "+ e.toString(),module);
          return false;
        }
        if (UtilValidate.isNotEmpty(xmlFile)) {
          return xmlFile.indexOf("<forms ") > 0 && xmlFile.indexOf("widget-form.xsd") > 0;
        }
      }
 else {
        return false;
      }
      return false;
    }
  }
,true);
  return fileList;
}
