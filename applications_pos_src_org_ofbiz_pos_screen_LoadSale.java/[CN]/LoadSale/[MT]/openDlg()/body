{
  XDialog dlg=(XDialog)pageMgr.loadPage(m_pos.getScreenLocation() + "/dialog/loadsale");
  m_dialog=dlg;
  dlg.setCaption(UtilProperties.getMessage("pos","LoadASale",Locale.getDefault()));
  m_salesList=(XList)dlg.findComponent("salesList");
  addMouseHandler(m_salesList,"SaleDoubleClick");
  m_cancel=(XButton)dlg.findComponent("BtnCancel");
  m_add=(XButton)dlg.findComponent("BtnAdd");
  m_replace=(XButton)dlg.findComponent("BtnReplace");
  m_delete=(XButton)dlg.findComponent("BtnDelete");
  m_replaceAndDelete=(XButton)dlg.findComponent("BtnReplaceAndDelete");
  addMouseHandler(m_cancel,"cancel");
  addMouseHandler(m_add,"addSale");
  addMouseHandler(m_replace,"replaceSale");
  addMouseHandler(m_delete,"deleteShoppingList");
  addMouseHandler(m_replaceAndDelete,"replaceSaleAndDeleteShoppingList");
  m_listModel=new DefaultListModel();
  for (Iterator i=m_saleMap.entrySet().iterator(); i.hasNext(); ) {
    Object o=i.next();
    Map.Entry entry=(Map.Entry)o;
    String val=entry.getValue().toString();
    m_listModel.addElement(val);
  }
  m_salesList.setModel(m_listModel);
  m_salesList.setVisibleRowCount(-1);
  m_salesList.ensureIndexIsVisible(m_salesList.getItemCount());
  m_salesList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
  m_salesList.setToolTipText(UtilProperties.getMessage("pos","LoadSaleListDblClickTip",Locale.getDefault()));
  dlg.pack();
  dlg.showDialog(this);
}
