{
  TTLCachedObjectTestTTLObject object=new TTLCachedObjectTestTTLObject();
  assertNull("initial non-existant value",object.getObject());
  assertEquals("initial non-existant timestamp",TTLCachedObject.NOT_EXISTANT_TIMESTAMP,object.getTimestamp());
  object.dataTimestamp=1;
  assertNull("initial no-refresh value",object.getObject());
  assertEquals("initial no-refresh timestamp",TTLCachedObject.NOT_EXISTANT_TIMESTAMP,object.getTimestamp());
  object.refresh();
  assertEquals("first value","first",object.getObject());
  assertEquals("first timestamp",1,object.getTimestamp());
  object.data="second";
  object.refresh();
  assertEquals("not-modified value","first",object.getObject());
  assertEquals("not-modified timestamp",1,object.getTimestamp());
  object.dataTimestamp=2;
  assertEquals("cached modified value","first",object.getObject());
  assertEquals("cached modified timestamp",1,object.getTimestamp());
  object.refresh();
  assertEquals("refresh second value","second",object.getObject());
  assertEquals("refresh second timestamp",2,object.getTimestamp());
  object.dataTimestamp=TTLCachedObject.NOT_EXISTANT_TIMESTAMP;
  object.refresh();
  assertNull("refresh non-existant value",object.getObject());
  assertEquals("refresh non-existant timestamp",TTLCachedObject.NOT_EXISTANT_TIMESTAMP,object.getTimestamp());
}
