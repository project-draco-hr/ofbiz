{
  String clientRequest=reader.readLine();
  OfbizSocketCommand clientCommand=determineClientCommand(clientRequest);
  String serverResponse=prepareResponseToClient(clientCommand,serverState);
  writer.println(serverResponse);
  if (clientCommand.equals(OfbizSocketCommand.SHUTDOWN)) {
    writer.flush();
    StartupControlPanel.stop(loaders,serverState,this);
  }
}
