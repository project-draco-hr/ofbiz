{
  this.serviceName=eca.getAttribute("service");
  this.eventName=eca.getAttribute("event");
  this.runOnFailure="true".equals(eca.getAttribute("run-on-failure"));
  this.runOnError="true".equals(eca.getAttribute("run-on-error"));
  List condList=UtilXml.childElementList(eca,"condition");
  Iterator ci=condList.iterator();
  while (ci.hasNext()) {
    conditions.add(new ServiceEcaCondition((Element)ci.next(),true,false));
  }
  List condFList=UtilXml.childElementList(eca,"condition-field");
  Iterator cfi=condFList.iterator();
  while (cfi.hasNext()) {
    conditions.add(new ServiceEcaCondition((Element)cfi.next(),false,false));
  }
  List condSList=UtilXml.childElementList(eca,"condition-service");
  Iterator sfi=condSList.iterator();
  while (sfi.hasNext()) {
    conditions.add(new ServiceEcaCondition((Element)sfi.next(),false,true));
  }
  if (Debug.verboseOn())   Debug.logVerbose("Conditions: " + conditions,module);
  Set nameSet=FastSet.newInstance();
  nameSet.add("set");
  nameSet.add("action");
  List actionAndSetList=UtilXml.childElementList(eca,nameSet);
  Iterator si=actionAndSetList.iterator();
  while (si.hasNext()) {
    Element actionOrSetElement=(Element)si.next();
    if ("action".equals(actionOrSetElement.getNodeName())) {
      this.actionsAndSets.add(new ServiceEcaAction(actionOrSetElement,this.eventName));
    }
 else {
      this.actionsAndSets.add(new ServiceEcaSetField(actionOrSetElement));
    }
  }
  if (Debug.verboseOn())   Debug.logVerbose("actions and sets (intermixed): " + actionsAndSets,module);
}
