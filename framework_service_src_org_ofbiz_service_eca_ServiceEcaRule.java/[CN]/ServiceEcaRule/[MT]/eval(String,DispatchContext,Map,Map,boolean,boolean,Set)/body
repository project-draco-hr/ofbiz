{
  if (!enabled) {
    Debug.logInfo("Service ECA [" + this.serviceName + "] on ["+ this.eventName+ "] is disabled; not running.",module);
    return;
  }
  if (isFailure && !this.runOnFailure) {
    return;
  }
  if (isError && !this.runOnError) {
    return;
  }
  boolean allCondTrue=true;
  Iterator c=conditions.iterator();
  while (c.hasNext()) {
    ServiceEcaCondition ec=(ServiceEcaCondition)c.next();
    if (!ec.eval(serviceName,dctx,context)) {
      if (Debug.infoOn())       Debug.logInfo("Got false for condition: " + ec,module);
      allCondTrue=false;
      break;
    }
 else {
      if (Debug.verboseOn())       Debug.logVerbose("Got true for condition: " + ec,module);
    }
  }
  Iterator i=sets.iterator();
  while (i.hasNext()) {
    ServiceEcaSetField sf=(ServiceEcaSetField)i.next();
    sf.eval(context);
  }
  if (allCondTrue) {
    Iterator a=actions.iterator();
    boolean allOkay=true;
    while (a.hasNext() && allOkay) {
      ServiceEcaAction ea=(ServiceEcaAction)a.next();
      if (!actionsRun.contains(ea.serviceName)) {
        if (Debug.infoOn())         Debug.logInfo("Running Service ECA Service: " + ea.serviceName + ", triggered by rule on Service: "+ serviceName,module);
        if (ea.runAction(serviceName,dctx,context,result)) {
          actionsRun.add(ea.serviceName);
        }
 else {
          allOkay=false;
        }
      }
    }
  }
}
