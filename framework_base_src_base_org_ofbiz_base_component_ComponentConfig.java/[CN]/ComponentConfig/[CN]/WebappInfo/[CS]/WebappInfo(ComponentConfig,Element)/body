{
  this.virtualHosts=FastList.newInstance();
  this.initParameters=FastMap.newInstance();
  this.componentConfig=componentConfig;
  this.name=element.getAttribute("name");
  this.title=element.getAttribute("title");
  this.server=element.getAttribute("server");
  this.mountPoint=element.getAttribute("mount-point");
  this.location=element.getAttribute("location");
  this.appBarDisplay=!"false".equals(element.getAttribute("app-bar-display"));
  String basePermStr=element.getAttribute("base-permission");
  if (UtilValidate.isNotEmpty(basePermStr)) {
    this.basePermission=basePermStr.split(",");
  }
 else {
    this.basePermission=new String[]{"NONE"};
  }
  for (int i=0; i < this.basePermission.length; i++) {
    this.basePermission[i]=this.basePermission[i].trim();
    if (this.basePermission[i].indexOf('_') != -1) {
      this.basePermission[i]=this.basePermission[i].substring(0,this.basePermission[i].indexOf('_'));
    }
  }
  if (UtilValidate.isEmpty(this.title)) {
    this.title=Character.toUpperCase(name.charAt(0)) + name.substring(1).toLowerCase();
  }
  if (UtilValidate.isEmpty(this.mountPoint)) {
    this.mountPoint=this.name;
  }
  if (!"/".equals(this.mountPoint)) {
    if (!this.mountPoint.startsWith("/")) {
      this.mountPoint="/" + this.mountPoint;
    }
    if (!this.mountPoint.endsWith("/*")) {
      if (!this.mountPoint.endsWith("/")) {
        this.mountPoint=this.mountPoint + "/";
      }
      this.mountPoint=this.mountPoint + "*";
    }
  }
  List<? extends Element> virtHostList=UtilXml.childElementList(element,"virtual-host");
  if (virtHostList != null && virtHostList.size() > 0) {
    for (    Element e : virtHostList) {
      virtualHosts.add(e.getAttribute("host-name"));
    }
  }
  List<? extends Element> initParamList=UtilXml.childElementList(element,"init-param");
  if (initParamList != null && initParamList.size() > 0) {
    for (    Element e : virtHostList) {
      this.initParameters.put(e.getAttribute("name"),e.getAttribute("value"));
    }
  }
}
