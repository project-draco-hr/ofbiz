{
  String protocol=urlName.getProtocol();
  String userName=urlName.getUsername();
  String password=urlName.getPassword();
  String host=urlName.getHost();
  String file=urlName.getFile();
  int port=urlName.getPort();
  if (UtilValidate.isEmpty(userName)) {
    userName=props.getProperty("mail." + protocol + ".user");
    if (UtilValidate.isEmpty(userName)) {
      userName=props.getProperty("mail.user");
    }
  }
  if (UtilValidate.isEmpty(password)) {
    password=props.getProperty("mail." + protocol + ".pass");
    if (UtilValidate.isEmpty(password)) {
      password=props.getProperty("mail.pass");
    }
  }
  if (UtilValidate.isEmpty(host)) {
    host=props.getProperty("mail." + protocol + ".host");
    if (UtilValidate.isEmpty(host)) {
      host=props.getProperty("mail.host");
    }
  }
  int port1=0;
  String strport=props.getProperty("mail." + protocol + ".port");
  if (!UtilValidate.isEmpty(strport)) {
    port1=Integer.valueOf(strport).intValue();
  }
  if (port1 == 0) {
    strport=props.getProperty("mail.port");
    if (!UtilValidate.isEmpty(strport)) {
      port1=Integer.valueOf(props.getProperty("mail.port")).intValue();
    }
  }
  if (port1 != 0) {
    port=port1;
  }
  if (Debug.verboseOn())   Debug.logVerbose("Update URL - " + protocol + "://"+ userName+ "@"+ host+ ":"+ port+ "!"+ password+ ";"+ file,module);
  return new URLName(protocol,host,port,file,userName,password);
}
