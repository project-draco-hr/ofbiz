{
  Store store=null;
  try {
    store=session.getStore();
  }
 catch (  NoSuchProviderException e) {
    throw new ContainerException(e);
  }
  if (store != null && store.getURLName() != null) {
    URLName urlName=this.updateUrlName(store.getURLName(),session.getProperties());
    Debug.log("URLName - " + urlName.toString(),module);
    try {
      store=session.getStore(urlName);
    }
 catch (    NoSuchProviderException e) {
      throw new ContainerException(e);
    }
  }
  try {
    store.connect();
    store.close();
  }
 catch (  MessagingException e) {
    Debug.logError("Unable to connect to mail store : " + store.getURLName().toString(),module);
    return null;
  }
  return store;
}
