{
  if (jcrFactory == null) {
synchronized (SecurityFactory.class) {
      if (jcrFactory == null) {
        ClassLoader loader=Thread.currentThread().getContextClassLoader();
        Class<?> c;
        try {
          c=loader.loadClass(JCRContainer.getFactoryClassName());
          jcrFactory=(JCRFactory)c.newInstance();
        }
 catch (        ClassNotFoundException e) {
          Debug.logError(e,"Cannot get instance of the jcr implementation",module);
        }
catch (        InstantiationException e) {
          Debug.logError(e,"Cannot get instance of the jcr implementation",module);
        }
catch (        IllegalAccessException e) {
          Debug.logError(e,"Cannot get instance of the jcr implementation",module);
        }
      }
    }
  }
  return jcrFactory;
}
