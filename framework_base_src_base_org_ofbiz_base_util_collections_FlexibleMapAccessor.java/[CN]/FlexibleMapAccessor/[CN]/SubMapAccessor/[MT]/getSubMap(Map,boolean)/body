{
  if (base == null)   return null;
  if (this.extName == null)   return null;
  if (this.subMapAccessor != null) {
    base=this.subMapAccessor.getSubMap(base,forPut);
  }
  Object namedObj=base.get(this.extName);
  if (this.isListReference && (namedObj == null || namedObj instanceof List)) {
    List lst=(List)base.get(this.extName);
    if (lst == null) {
      lst=FastList.newInstance();
      base.put(this.extName,lst);
    }
    Map extMap=null;
    if (lst.size() > this.listIndex) {
      extMap=(Map)lst.get(this.listIndex);
    }
    if (forPut && extMap == null) {
      extMap=FastMap.newInstance();
      lst.add(this.listIndex,extMap);
    }
    return extMap;
  }
 else   if (namedObj == null || namedObj instanceof Map) {
    Map extMap=(Map)namedObj;
    if (forPut && extMap == null) {
      extMap=FastMap.newInstance();
      base.put(this.extName,extMap);
    }
    return extMap;
  }
 else {
    return null;
  }
}
