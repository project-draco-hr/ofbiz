{
  if (classLoader == null) {
    classLoader=Thread.currentThread().getContextClassLoader();
  }
  BshClassManager master=BshUtil.masterClassManagers.get(classLoader);
  if (master == null) {
    master=BshClassManager.createClassManager();
    master.setClassLoader(classLoader);
    BshUtil.masterClassManagers.putIfAbsent(classLoader,master);
    master=BshUtil.masterClassManagers.get(classLoader);
  }
  if (master != null) {
    Interpreter interpreter=new Interpreter(new StringReader(""),System.out,System.err,false,new NameSpace(master,"global"),null,null);
    return interpreter;
  }
 else {
    Interpreter interpreter=new Interpreter();
    interpreter.setClassLoader(classLoader);
    return interpreter;
  }
}
