{
  String merchantId=(String)props.get("payment.valuelink.merchantId");
  if (props == null) {
    throw new IllegalArgumentException("Properties cannot be null");
  }
  ValueLinkApi api=(ValueLinkApi)objectCache.get(merchantId);
  if (api == null || reload) {
synchronized (ValueLinkApi.class) {
      api=(ValueLinkApi)objectCache.get(merchantId);
      if (api == null || reload) {
        api=new ValueLinkApi(delegator,props);
        objectCache.put(merchantId,api);
      }
    }
  }
  if (api == null) {
    throw new RuntimeException("Runtime problems with ValueLinkApi; unable to create instance");
  }
  return api;
}
