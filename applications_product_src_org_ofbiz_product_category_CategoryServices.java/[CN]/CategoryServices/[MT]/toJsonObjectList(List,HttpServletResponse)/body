{
  StringBuilder jsonBuilder=new StringBuilder("[");
  for (  Object attrMap : attrList) {
    JSONObject json=JSONObject.fromObject(attrMap);
    jsonBuilder.append(json.toString());
    jsonBuilder.append(',');
  }
  jsonBuilder.append("{ } ]");
  String jsonStr=jsonBuilder.toString();
  if (UtilValidate.isEmpty(jsonStr)) {
    Debug.logError("JSON Object was empty; fatal error!",module);
  }
  response.setContentType("application/json");
  try {
    response.setContentLength(jsonStr.getBytes("UTF8").length);
  }
 catch (  UnsupportedEncodingException e) {
    Debug.logError("Problems with Json encoding",module);
  }
  Writer out;
  try {
    out=response.getWriter();
    out.write(jsonStr);
    out.flush();
  }
 catch (  IOException e) {
    Debug.logError("Unable to get response writer",module);
  }
}
