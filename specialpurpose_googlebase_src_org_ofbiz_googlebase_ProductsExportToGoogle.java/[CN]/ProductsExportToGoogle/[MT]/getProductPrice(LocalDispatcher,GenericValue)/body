{
  String priceString=null;
  try {
    Map map=dispatcher.runSync("calculateProductPrice",UtilMisc.toMap("product",product));
    boolean validPriceFound=((Boolean)map.get("validPriceFound")).booleanValue();
    boolean isSale=((Boolean)map.get("isSale")).booleanValue();
    if (validPriceFound) {
      priceString=UtilFormatOut.formatPrice((Double)map.get("price"));
    }
  }
 catch (  Exception e) {
    Debug.logError("Exception calculating price for product [" + product.getString("productId") + "]",module);
  }
  return priceString;
}
