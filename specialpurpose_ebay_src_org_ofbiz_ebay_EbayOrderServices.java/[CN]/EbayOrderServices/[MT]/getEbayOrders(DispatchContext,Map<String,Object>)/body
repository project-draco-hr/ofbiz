{
  GenericDelegator delegator=dctx.getDelegator();
  LocalDispatcher dispatcher=dctx.getDispatcher();
  Locale locale=(Locale)context.get("locale");
  Map<String,Object> result=FastMap.newInstance();
  try {
    Map<String,Object> eBayConfigResult=EbayHelper.buildEbayConfig(context,delegator);
    StringBuffer getOrdersXml=new StringBuffer();
    if (!ServiceUtil.isFailure(buildGetOrdersRequest(context,getOrdersXml,eBayConfigResult.get("token").toString()))) {
      result=EbayHelper.postItem(eBayConfigResult.get("xmlGatewayUri").toString(),getOrdersXml,eBayConfigResult.get("devID").toString(),eBayConfigResult.get("appID").toString(),eBayConfigResult.get("certID").toString(),"GetOrders",eBayConfigResult.get("compatibilityLevel").toString(),eBayConfigResult.get("siteID").toString());
      String success=(String)result.get(ModelService.SUCCESS_MESSAGE);
      if (success != null) {
        result=checkOrders(delegator,dispatcher,locale,context,success);
      }
    }
  }
 catch (  Exception e) {
    String errMsg=UtilProperties.getMessage(resource,"buildEbayConfig.exceptionInGetOrdersFromEbay" + e.getMessage(),locale);
    return ServiceUtil.returnError(errMsg);
  }
  return result;
}
