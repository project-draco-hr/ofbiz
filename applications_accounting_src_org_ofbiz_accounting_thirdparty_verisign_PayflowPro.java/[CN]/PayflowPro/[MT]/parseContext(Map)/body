{
  StringBuffer buf=new StringBuffer();
  Set keySet=context.keySet();
  Iterator i=keySet.iterator();
  while (i.hasNext()) {
    String name=(String)i.next();
    Object valueObj=context.get(name);
    if (valueObj == null || (valueObj instanceof String) && ((String)valueObj).length() == 0) {
    }
 else {
      String value=valueObj.toString();
      try {
        name=URLEncoder.encode(name,"UTF-8");
        value=URLEncoder.encode(value,"UTF-8");
      }
 catch (      UnsupportedEncodingException e) {
        Debug.logError(e,module);
        continue;
      }
      buf.append(name).append("=");
      buf.append(value);
      if (i.hasNext())       buf.append("&");
    }
  }
  return buf.toString();
}
