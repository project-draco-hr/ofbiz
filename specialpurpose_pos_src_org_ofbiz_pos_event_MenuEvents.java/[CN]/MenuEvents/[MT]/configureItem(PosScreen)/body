{
  PosTransaction trans=PosTransaction.getCurrentTx(pos.getSession());
  Journal journal=pos.getJournal();
  String index=journal.getSelectedIdx();
  String productId=journal.getSelectedSku();
  boolean aggregatedItem=false;
  ProductConfigWrapper pcw=null;
  try {
    aggregatedItem=trans.isAggregatedItem(productId);
    if (aggregatedItem) {
      pcw=trans.getProductConfigWrapper(productId,index);
      ConfigureItem configureItem=new ConfigureItem(pcw,trans,pos);
      pcw=configureItem.openDlg();
      configureItem=null;
      trans.modifyConfig(productId,pcw,index);
    }
 else {
      pos.showDialog("dialog/error/itemnotconfigurable");
    }
  }
 catch (  Exception e) {
    Debug.logError(e,module);
    pos.showDialog("dialog/error/producterror");
  }
  trans.calcTax();
  pos.refresh();
  return;
}
