{
  m_dialog=(XDialog)pageMgr.loadPage(m_pos.getScreenLocation() + "/dialog/PaidInOut");
  m_amoutLabel=(XLabel)m_dialog.findComponent("amoutLabel");
  m_amountEdit=(XEdit)m_dialog.findComponent("amountEdit");
  m_reasonLabel=(XLabel)m_dialog.findComponent("reasonLabel");
  m_reasonCombo=(XComboBox)m_dialog.findComponent("reasonCombo");
  m_reasonCommentLabel=(XLabel)m_dialog.findComponent("reasonCommentLabel");
  m_reasonCommentEdit=(XEdit)m_dialog.findComponent("reasonCommentEdit");
  m_cancel=(XButton)m_dialog.findComponent("BtnCancel");
  m_ok=(XButton)m_dialog.findComponent("BtnOk");
  Locale locale=Locale.getDefault();
  XEventHelper.addMouseHandler(this,m_cancel,"cancel");
  XEventHelper.addMouseHandler(this,m_ok,"verify");
  XEventHelper.addMouseHandler(this,m_amountEdit,"editAmount");
  m_comboModel=new DefaultComboBoxModel();
  List<GenericValue> posPaidReasons=new LinkedList<GenericValue>();
  if (m_type.equals("IN")) {
    m_dialog.setCaption(UtilProperties.getMessage(PosTransaction.resource,"PosPaidInTitle",locale));
    try {
      posPaidReasons=m_trans.getSession().getDelegator().findByAnd("Enumeration",UtilMisc.toMap("enumTypeId","POS_PAID_REASON_IN"),null,true);
    }
 catch (    GenericEntityException e) {
      Debug.logError(e,module);
    }
  }
 else {
    m_dialog.setCaption(UtilProperties.getMessage(PosTransaction.resource,"PosPaidOutTitle",locale));
    try {
      posPaidReasons=m_trans.getSession().getDelegator().findByAnd("Enumeration",UtilMisc.toMap("enumTypeId","POS_PAID_REASON_OUT"),null,true);
    }
 catch (    GenericEntityException e) {
      Debug.logError(e,module);
    }
  }
  for (  GenericValue reason : posPaidReasons) {
    m_comboModel.addElement(reason.get("description",locale));
  }
  m_reasonCombo.setModel(m_comboModel);
  m_reasonCombo.setToolTipText(UtilProperties.getMessage(PosTransaction.resource,"PosCreateOrChooseReasonInOut",locale));
  m_dialog.pack();
  m_reasonCombo.requestFocusInWindow();
  m_dialog.showDialog(this);
  if (cancelled) {
    return new HashMap<String,String>();
  }
 else {
    return UtilMisc.toMap("amount",m_amountEdit.getText(),"reason",(String)(posPaidReasons.get(m_reasonCombo.getSelectedIndex())).get("enumId"),"reasonComment",m_reasonCommentEdit.getText());
  }
}
