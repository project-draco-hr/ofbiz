{
  Iterator fieldNamesIter=modelIndex.getIndexFieldsIterator();
  StringBuffer mainCols=new StringBuffer();
  while (fieldNamesIter.hasNext()) {
    String fieldName=(String)fieldNamesIter.next();
    ModelField mainField=entity.getField(fieldName);
    if (mainCols.length() > 0) {
      mainCols.append(", ");
    }
    mainCols.append(mainField.getColName());
  }
  StringBuffer indexSqlBuf=new StringBuffer("CREATE ");
  if (modelIndex.getUnique()) {
    indexSqlBuf.append("UNIQUE ");
  }
  indexSqlBuf.append("INDEX ");
  indexSqlBuf.append(makeIndexName(modelIndex,datasourceInfo.constraintNameClipLength));
  indexSqlBuf.append(" ON ");
  indexSqlBuf.append(entity.getTableName(datasourceInfo));
  indexSqlBuf.append(" (");
  indexSqlBuf.append(mainCols.toString());
  indexSqlBuf.append(")");
  return indexSqlBuf.toString();
}
