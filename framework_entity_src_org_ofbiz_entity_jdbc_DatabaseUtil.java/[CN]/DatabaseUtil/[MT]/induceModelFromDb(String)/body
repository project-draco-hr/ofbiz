{
  Document document=UtilXml.makeEmptyXmlDocument("entitymodel");
  Element root=document.getDocumentElement();
  root.appendChild(document.createElement("title"));
  root.appendChild(document.createElement("description"));
  root.appendChild(document.createElement("copyright"));
  root.appendChild(document.createElement("author"));
  root.appendChild(document.createElement("version"));
  List<String> messages=new ArrayList<String>();
  SortedSet<String> tableNames=this.getTableNames(messages);
  Map<String,Map<String,ColumnCheckInfo>> colInfo=this.getColumnInfo(tableNames,true,messages);
  boolean isCaseSensitive=false;
  DatabaseMetaData dbData=this.getDatabaseMetaData(null,messages);
  if (dbData != null) {
    try {
      isCaseSensitive=dbData.supportsMixedCaseIdentifiers();
    }
 catch (    SQLException e) {
      Debug.logError(e,"Error getting db meta data about case sensitive",module);
    }
  }
  if (UtilValidate.isNotEmpty(packageName)) {
    String catalogName=null;
    try {
      catalogName=this.getConnection().getCatalog();
    }
 catch (    Exception e) {
    }
    packageName="org.ofbiz.ext." + (catalogName != null ? catalogName : "unknown");
  }
  for (  String tableName : new TreeSet<String>(colInfo.keySet())) {
    Map<String,ColumnCheckInfo> colMap=colInfo.get(tableName);
    ModelEntity newEntity=new ModelEntity(tableName,colMap,modelFieldTypeReader,isCaseSensitive);
    root.appendChild(newEntity.toXmlElement(document,"org.ofbiz.ext." + packageName));
  }
  for (  String message : messages) {
    Debug.logInfo(message,module);
  }
  return document;
}
