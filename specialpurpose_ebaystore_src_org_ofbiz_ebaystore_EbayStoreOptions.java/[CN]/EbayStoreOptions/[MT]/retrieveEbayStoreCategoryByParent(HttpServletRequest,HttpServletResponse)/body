{
  LocalDispatcher dispatcher=(LocalDispatcher)request.getAttribute("dispatcher");
  HttpSession session=request.getSession();
  GenericValue userLogin=(GenericValue)session.getAttribute("userLogin");
  Map<String,Object> result=FastMap.newInstance();
  Map<String,Object> context=FastMap.newInstance();
  try {
    Map paramMap=UtilHttp.getCombinedMap(request);
    if (paramMap.get("productStoreId") != null) {
      String ebayCategoryId=(String)paramMap.get("ebayCategoryId");
      context.put("productStoreId",paramMap.get("productStoreId"));
      context.put("ebayStoreCategoryId",ebayCategoryId);
      context.put("userLogin",userLogin);
      result=dispatcher.runSync("getEbayStoreCategories",context);
      if (result != null) {
        List<Map<String,Object>> categories=(List<Map<String,Object>>)result.get("storeCategories");
        if (categories.size() > 0) {
          toJsonObjectList(categories,response);
        }
      }
    }
  }
 catch (  GenericServiceException e) {
    Debug.logError(e.getMessage(),module);
  }
catch (  EventHandlerException e) {
    Debug.logError(e.getMessage(),module);
  }
  return "success";
}
