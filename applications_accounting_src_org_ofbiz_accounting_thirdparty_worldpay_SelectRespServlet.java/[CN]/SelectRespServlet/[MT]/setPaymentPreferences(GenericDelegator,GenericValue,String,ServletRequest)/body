{
  List paymentPrefs=null;
  boolean okay=true;
  try {
    Map paymentFields=UtilMisc.toMap("orderId",orderId,"statusId","PAYMENT_NOT_RECEIVED");
    paymentPrefs=delegator.findByAnd("OrderPaymentPreference",paymentFields);
  }
 catch (  GenericEntityException e) {
    Debug.logError(e,"Cannot get payment preferences for order #" + orderId,module);
  }
  if (paymentPrefs != null && paymentPrefs.size() > 0) {
    Iterator i=paymentPrefs.iterator();
    while (okay && i.hasNext()) {
      GenericValue pref=(GenericValue)i.next();
      okay=setPaymentPreference(pref,userLogin,request);
    }
  }
  return okay;
}
