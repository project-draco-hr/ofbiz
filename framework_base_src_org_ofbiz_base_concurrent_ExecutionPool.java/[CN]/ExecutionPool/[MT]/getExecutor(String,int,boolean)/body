{
  if (threadCount == 0) {
    threadCount=1;
  }
 else   if (threadCount < 0) {
    int numCpus=ManagementFactory.getOperatingSystemMXBean().getAvailableProcessors();
    threadCount=Math.abs(threadCount) * numCpus;
  }
  ThreadFactory threadFactory=createThreadFactory(namePrefix);
  ScheduledThreadPoolExecutor executor=new ScheduledThreadPoolExecutor(threadCount,threadFactory);
  if (preStart) {
    executor.prestartAllCoreThreads();
  }
  return executor;
}
