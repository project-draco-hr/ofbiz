{
  ModelFormField modelFormField=checkField.getModelFormField();
  ModelForm modelForm=modelFormField.getModelForm();
  String currentValue=modelFormField.getEntry(context);
  Boolean allChecked=checkField.isAllChecked(context);
  String className="";
  String alert="false";
  String name=modelFormField.getParameterName(context);
  String event=modelFormField.getEvent();
  String action=modelFormField.getAction(context);
  StringBuilder items=new StringBuilder();
  if (UtilValidate.isNotEmpty(modelFormField.getWidgetStyle())) {
    className=modelFormField.getWidgetStyle();
    if (modelFormField.shouldBeRed(context)) {
      alert="true";
    }
  }
  List allOptionValues=checkField.getAllOptionValues(context,modelForm.getDelegator(context));
  Iterator<ModelFormField.OptionValue> optionValueIter=allOptionValues.iterator();
  items.append("[");
  while (optionValueIter.hasNext()) {
    ModelFormField.OptionValue optionValue=(ModelFormField.OptionValue)optionValueIter.next();
    if (items.length() > 1) {
      items.append(",");
    }
    items.append("{'value':'");
    items.append(optionValue.getKey());
    items.append("'}");
  }
  items.append("]");
  StringWriter sr=new StringWriter();
  sr.append("<@renderCheckField ");
  sr.append("items=");
  sr.append(items.toString());
  sr.append(" className=\"");
  sr.append(className);
  sr.append("\" alert=\"");
  sr.append(alert);
  sr.append("\" allChecked=");
  sr.append(Boolean.toString(allChecked));
  sr.append(" currentValue=\"");
  sr.append(currentValue);
  sr.append("\" name=\"");
  sr.append(name);
  sr.append("\" event=\"");
  if (event != null) {
    sr.append(event);
  }
  sr.append("\" action=\"");
  if (action != null) {
    sr.append(action);
  }
  sr.append("\" />");
  executeMacro(writer,sr.toString());
  this.appendTooltip(writer,context,modelFormField);
}
