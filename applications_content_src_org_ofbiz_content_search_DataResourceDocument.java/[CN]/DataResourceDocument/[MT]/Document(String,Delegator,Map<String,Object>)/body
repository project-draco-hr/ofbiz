{
  Document doc=null;
  GenericValue dataResource=null;
  try {
    dataResource=delegator.findOne("DataResource",UtilMisc.toMap("dataResourceId",id),true);
  }
 catch (  GenericEntityException e) {
    Debug.logError(e,module);
    return doc;
  }
  doc=new Document();
  doc.add(new StringField("dataResourceId",id,Store.YES));
  String mimeTypeId=dataResource.getString("mimeTypeId");
  if (UtilValidate.isEmpty(mimeTypeId)) {
    mimeTypeId="text/html";
  }
  Locale locale=Locale.getDefault();
  String currentLocaleString=dataResource.getString("localeString");
  if (UtilValidate.isNotEmpty(currentLocaleString)) {
    locale=UtilMisc.parseLocale(currentLocaleString);
  }
  StringWriter outWriter=new StringWriter();
  try {
    DataResourceWorker.writeDataResourceText(dataResource,mimeTypeId,locale,context,delegator,outWriter,true);
  }
 catch (  GeneralException e) {
    Debug.logError(e,module);
  }
catch (  IOException e) {
    Debug.logError(e,module);
  }
  String text=outWriter.toString();
  Debug.logInfo("in DataResourceDocument, text:" + text,module);
  if (UtilValidate.isNotEmpty(text))   doc.add(new TextField("content",text,Store.NO));
  return doc;
}
