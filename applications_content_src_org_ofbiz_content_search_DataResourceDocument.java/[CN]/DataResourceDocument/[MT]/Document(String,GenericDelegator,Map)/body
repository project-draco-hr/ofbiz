{
  Document doc=null;
  GenericValue dataResource=null;
  try {
    dataResource=delegator.findByPrimaryKeyCache("DataResource",UtilMisc.toMap("dataResourceId",id));
  }
 catch (  GenericEntityException e) {
    Debug.logError(e,module);
    return doc;
  }
  doc=new Document();
  doc.add(Field.Keyword("dataResourceId",id));
  String mimeTypeId=dataResource.getString("mimeTypeId");
  if (UtilValidate.isEmpty(mimeTypeId)) {
    mimeTypeId="text/html";
  }
  Locale locale=Locale.getDefault();
  String currentLocaleString=dataResource.getString("localeString");
  if (UtilValidate.isNotEmpty(currentLocaleString)) {
    locale=UtilMisc.parseLocale(currentLocaleString);
  }
  StringWriter outWriter=new StringWriter();
  try {
    DataResourceWorker.writeDataResourceText(dataResource,mimeTypeId,locale,context,delegator,outWriter,true);
  }
 catch (  GeneralException e) {
    Debug.logError(e,module);
  }
catch (  IOException e) {
    Debug.logError(e,module);
  }
  String text=outWriter.toString();
  Debug.logInfo("in DataResourceDocument, text:" + text,module);
  if (UtilValidate.isNotEmpty(text))   doc.add(Field.UnStored("content",text));
  return doc;
}
