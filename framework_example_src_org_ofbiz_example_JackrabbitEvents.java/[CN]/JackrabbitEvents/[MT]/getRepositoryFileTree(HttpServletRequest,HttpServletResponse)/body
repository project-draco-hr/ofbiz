{
  GenericValue userLogin=(GenericValue)request.getSession().getAttribute("userLogin");
  JcrRepositoryAccessor repositoryAccess=new JackrabbitRepositoryAccessor(userLogin);
  try {
    JSONArray fileTree=repositoryAccess.getJsonFileTree();
    request.setAttribute("fileTree",StringUtil.wrapString(fileTree.toString()));
  }
 catch (  RepositoryException e) {
    Debug.logError(e,module);
    request.setAttribute("dataTree",new JSONArray());
    request.setAttribute("_ERROR_MESSAGE_",e.toString());
    return "error";
  }
 finally {
    repositoryAccess.closeAccess();
  }
  return "success";
}
