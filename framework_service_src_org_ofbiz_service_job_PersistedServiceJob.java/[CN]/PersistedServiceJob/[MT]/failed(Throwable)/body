{
  super.failed(t);
  GenericValue job=getJob();
  if (nextRecurrence == -1) {
    if (this.canRetry()) {
      Calendar cal=Calendar.getInstance();
      cal.setTime(new Date());
      cal.add(Calendar.MINUTE,ServiceConfigUtil.getFailedRetryMin());
      long next=cal.getTimeInMillis();
      try {
        createRecurrence(job,next);
      }
 catch (      GenericEntityException gee) {
        Debug.logError(gee,"ERROR: Unable to re-schedule job [" + getJobId() + "] to re-run : "+ job,module);
      }
      Debug.logInfo("Persisted Job [" + getJobId() + "] Failed Re-Scheduling : "+ next,module);
    }
 else {
      Debug.logWarning("Persisted Job [" + getJobId() + "] Failed - Max Retry Hit; not re-scheduling",module);
    }
  }
  job.set("statusId","SERVICE_FAILED");
  job.set("finishDateTime",UtilDateTime.nowTimestamp());
  job.set("jobResult",StringUtils.substring(t.getMessage(),0,255));
  try {
    job.store();
  }
 catch (  GenericEntityException e) {
    Debug.logError(e,"Cannot update the job sandbox",module);
  }
}
