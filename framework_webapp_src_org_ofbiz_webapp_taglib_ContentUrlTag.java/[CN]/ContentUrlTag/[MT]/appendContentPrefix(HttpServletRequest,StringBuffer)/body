{
  if (request == null) {
    Debug.logWarning("WARNING: request was null in appendContentPrefix; this probably means this was used where it shouldn't be, like using ofbizContentUrl in a screen rendered through a service; using best-bet behavior: standard prefix from url.properties (no WebSite or security setting known)",module);
    String prefix=UtilProperties.getPropertyValue("url","content.url.prefix.standard");
    if (prefix != null) {
      urlBuffer.append(prefix.trim());
    }
    return;
  }
  GenericValue webSite=WebSiteWorker.getWebSite(request);
  if (request.isSecure()) {
    if (webSite != null && UtilValidate.isNotEmpty(webSite.getString("secureContentPrefix"))) {
      urlBuffer.append(webSite.getString("secureContentPrefix").trim());
    }
 else {
      String prefix=UtilProperties.getPropertyValue("url","content.url.prefix.secure");
      if (prefix != null) {
        urlBuffer.append(prefix.trim());
      }
    }
  }
 else {
    if (webSite != null && UtilValidate.isNotEmpty(webSite.getString("standardContentPrefix"))) {
      urlBuffer.append(webSite.getString("standardContentPrefix").trim());
    }
 else {
      String prefix=UtilProperties.getPropertyValue("url","content.url.prefix.standard");
      if (prefix != null) {
        urlBuffer.append(prefix.trim());
      }
    }
  }
}
