{
  if (entityName == null || condition == null) {
    return 0;
  }
  HashMap<GenericPK,GenericValue> entityCache=cache.get(entityName);
  if (entityCache == null) {
    return 0;
  }
  Iterator it=entityCache.values().iterator();
  int count=0;
  while (it.hasNext()) {
    GenericValue value=(GenericValue)it.next();
    if (condition.entityMatches(value)) {
      it.remove();
      count++;
    }
  }
  return count;
}
