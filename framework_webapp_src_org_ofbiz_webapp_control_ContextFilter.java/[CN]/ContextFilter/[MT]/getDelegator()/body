{
  GenericDelegator delegator=(GenericDelegator)config.getServletContext().getAttribute("delegator");
  if (delegator == null) {
    String delegatorName=config.getServletContext().getInitParameter("entityDelegatorName");
    if (delegatorName == null || delegatorName.length() <= 0) {
      delegatorName="default";
    }
    if (Debug.infoOn())     Debug.logInfo("[ContextFilter.init] Getting Entity Engine Delegator with delegator name " + delegatorName,module);
    delegator=GenericDelegator.getGenericDelegator(delegatorName);
    config.getServletContext().setAttribute("delegator",delegator);
    if (delegator == null) {
      Debug.logError("[ContextFilter.init] ERROR: delegator factory returned null for delegatorName \"" + delegatorName + "\"",module);
    }
  }
  return delegator;
}
