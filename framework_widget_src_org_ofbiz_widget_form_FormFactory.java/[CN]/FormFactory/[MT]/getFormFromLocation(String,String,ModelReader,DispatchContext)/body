{
  String cacheKey=resourceName + "#" + formName;
  ModelForm modelForm=formLocationCache.get(cacheKey);
  if (modelForm == null) {
synchronized (formLocationCache) {
      modelForm=formLocationCache.get(cacheKey);
      if (modelForm == null) {
        URL formFileUrl=FlexibleLocation.resolveLocation(resourceName);
        Document formFileDoc=UtilXml.readXmlDocument(formFileUrl,true);
        if (formFileDoc == null) {
          throw new IllegalArgumentException("Could not find resource [" + resourceName + "]");
        }
        modelForm=createModelForm(formFileDoc,entityModelReader,dispatchContext,resourceName,formName);
        formLocationCache.put(cacheKey,modelForm);
      }
    }
  }
  if (modelForm == null) {
    throw new IllegalArgumentException("Could not find form with name [" + formName + "] in class resource ["+ resourceName+ "]");
  }
  return modelForm;
}
