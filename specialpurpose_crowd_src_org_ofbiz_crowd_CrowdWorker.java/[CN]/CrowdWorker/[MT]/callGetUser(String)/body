{
  SecurityServerHttpBindingStub stub=getStub();
  AuthenticatedToken token=getToken(stub);
  SOAPPrincipal principal;
  try {
    principal=stub.findPrincipalByName(token,user);
  }
 catch (  InvalidAuthorizationTokenException e) {
    Debug.logError(e,module);
    throw e;
  }
catch (  ObjectNotFoundException e) {
    Debug.logError(e,module);
    throw e;
  }
catch (  RemoteException e) {
    Debug.logError(e,module);
    throw e;
  }
  String[] groups;
  try {
    groups=stub.findGroupMemberships(token,user);
  }
 catch (  InvalidAuthorizationTokenException e) {
    Debug.logError(e,module);
    throw e;
  }
catch (  ObjectNotFoundException e) {
    groups=new String[0];
  }
catch (  RemoteException e) {
    Debug.logError(e,module);
    throw e;
  }
  return new UserWrapper(principal,groups);
}
