{
  Delegator delegator=(Delegator)request.getAttribute("delegator");
  String url=null;
  try {
    GenericValue product=delegator.findOne("Product",UtilMisc.toMap("productId",productId),true);
    ProductContentWrapper wrapper=new ProductContentWrapper(product,request);
    List<String> trail=CategoryWorker.getTrail(request);
    url=makeProductUrl(delegator,wrapper,trail,request.getContextPath(),previousCategoryId,productCategoryId,productId);
  }
 catch (  GenericEntityException e) {
    Debug.logWarning(e,"Cannot create product's URL for: " + productId,module);
    return redirectUrl;
  }
  return url;
}
