{
  this.methodType=methodType;
  this.parameters=context;
  this.loader=loader;
  this.locale=(Locale)context.get("locale");
  this.dispatcher=(LocalDispatcher)context.get("dispatcher");
  this.delegator=(GenericDelegator)context.get("delegator");
  this.security=(Security)context.get("security");
  this.userLogin=(GenericValue)context.get("userLogin");
  if (methodType == MethodContext.EVENT) {
    this.request=(HttpServletRequest)context.get("request");
    this.response=(HttpServletResponse)context.get("response");
    if (this.locale == null)     this.locale=UtilHttp.getLocale(request);
    if (this.request != null) {
      if (this.dispatcher == null)       this.dispatcher=(LocalDispatcher)this.request.getAttribute("dispatcher");
      if (this.delegator == null)       this.delegator=(GenericDelegator)this.request.getAttribute("delegator");
      if (this.security == null)       this.security=(Security)this.request.getAttribute("security");
      if (this.userLogin == null)       this.userLogin=(GenericValue)this.request.getSession().getAttribute("userLogin");
    }
  }
 else   if (methodType == MethodContext.SERVICE) {
    this.results=new HashMap();
  }
  if (this.loader == null) {
    try {
      this.loader=Thread.currentThread().getContextClassLoader();
    }
 catch (    SecurityException e) {
      this.loader=this.getClass().getClassLoader();
    }
  }
}
