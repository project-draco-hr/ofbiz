{
  EventHandler handler=null;
  String handlerClass=null;
  try {
    handlerClass=this.requestHandler.getControllerConfig().getEventHandlerMap().get(type);
  }
 catch (  WebAppConfigurationException e) {
    Debug.logError(e,"Exception thrown while parsing controller.xml file: ",module);
  }
  if (handlerClass == null) {
    throw new EventHandlerException("Unknown handler type: " + type);
  }
  try {
    handler=(EventHandler)ObjectType.getInstance(handlerClass);
    handler.init(context);
  }
 catch (  NoClassDefFoundError e) {
    throw new EventHandlerException("No class def found for handler [" + handlerClass + "]",e);
  }
catch (  ClassNotFoundException cnf) {
    throw new EventHandlerException("Cannot load handler class [" + handlerClass + "]",cnf);
  }
catch (  InstantiationException ie) {
    throw new EventHandlerException("Cannot get instance of the handler [" + handlerClass + "]",ie);
  }
catch (  IllegalAccessException iae) {
    throw new EventHandlerException(iae.getMessage(),iae);
  }
  return handler;
}
