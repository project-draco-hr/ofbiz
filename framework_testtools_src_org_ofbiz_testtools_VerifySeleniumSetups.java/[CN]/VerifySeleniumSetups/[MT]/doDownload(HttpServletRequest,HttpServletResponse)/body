{
  URL url=null;
  long bytesRead=0;
  currentValue=0;
  contentLength=0;
  BufferedInputStream in=null;
  BufferedOutputStream out=null;
  try {
    url=new URL(urlSite);
    URLConnection connection=url.openConnection();
    contentLength=connection.getContentLength();
    InputStream stream=connection.getInputStream();
    Debug.log("getContentLength is :" + contentLength);
    in=new BufferedInputStream(stream);
    long totalBytes=in.available();
    Debug.log("totalBytes is : " + totalBytes);
    byte[] b=new byte[1024];
    FileOutputStream file=new FileOutputStream(libPath);
    out=new BufferedOutputStream(file);
    int r;
    Debug.log("currentValue is : " + currentValue + " bytes");
    while ((r=in.read(b,0,b.length)) != -1) {
      out.write(b,0,r);
      bytesRead+=r;
      currentValue=(int)(bytesRead * 100 / contentLength);
    }
    out.flush();
  }
 catch (  IOException ex) {
    Debug.logError("Error message :" + ex.getMessage(),module);
  }
 finally {
    try {
      if (in != null)       in.close();
      if (out != null)       out.close();
    }
 catch (    Exception ex) {
      Debug.logError("Error message :" + ex.getMessage(),module);
    }
  }
}
