{
  Activity at=Activity.getInstance(this,activityId);
  if (at.getState().startsWith("closed")) {
    return new ArrayList();
  }
  List assignments=getAllAssignmentsForActivity(activityId,trans);
  if (at.getResourceUsername() == null) {
    return assignments;
  }
  List valid=new ArrayList();
  Iterator i=assignments.iterator();
  while (i.hasNext()) {
    Assignment as=(Assignment)i.next();
    if (at.getResourceUsername().equals(as.getResourceUsername())) {
      valid.add(as);
    }
  }
  return valid;
}
