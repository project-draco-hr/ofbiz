{
  if (tomcat == null) {
    throw new ContainerException("Cannot load web applications without Tomcat instance!");
  }
  List<ComponentConfig.WebappInfo> webResourceInfos=ComponentConfig.getAllWebappResourceInfos();
  List<String> loadedMounts=FastList.newInstance();
  if (webResourceInfos == null) {
    return;
  }
  ScheduledExecutorService executor=ExecutionPool.getExecutor(CATALINA_THREAD_GROUP,"catalina-startup",-1,true);
  try {
    List<Future<Context>> futures=FastList.newInstance();
    for (int i=webResourceInfos.size(); i > 0; i--) {
      ComponentConfig.WebappInfo appInfo=webResourceInfos.get(i - 1);
      String engineName=appInfo.server;
      List<String> virtualHosts=appInfo.getVirtualHosts();
      String mount=appInfo.getContextRoot();
      List<String> keys=FastList.newInstance();
      if (UtilValidate.isEmpty(virtualHosts)) {
        keys.add(engineName + ":DEFAULT:" + mount);
      }
 else {
        for (        String virtualHost : virtualHosts) {
          keys.add(engineName + ":" + virtualHost+ ":"+ mount);
        }
      }
      if (!keys.removeAll(loadedMounts)) {
        if (appInfo.location != null) {
          futures.add(executor.submit(createContext(appInfo)));
        }
        loadedMounts.addAll(keys);
      }
 else {
        appInfo.appBarDisplay=false;
        Debug.logInfo("Duplicate webapp mount; not loading : " + appInfo.getName() + " / "+ appInfo.getLocation(),module);
      }
    }
    ExecutionPool.getAllFutures(futures);
  }
  finally {
    executor.shutdown();
  }
}
