{
  if (UtilValidate.isEmpty(country)) {
    country=UtilProperties.getPropertyValue("general.properties","country.geo.id.default");
  }
  EntityCondition stateRegionFindCond=EntityCondition.makeCondition(EntityCondition.makeCondition("geoIdFrom",country));
  if (UtilValidate.isEmpty(listOrderBy)) {
    listOrderBy="geoId";
  }
  List<String> sortList=UtilMisc.toList(listOrderBy);
  List<GenericValue> geoList=FastList.newInstance();
  try {
    List<GenericValue> regionList=delegator.findList("GeoAssocAndGeoToWithState",stateRegionFindCond,null,sortList,null,true);
    for (    GenericValue region : regionList) {
      if ("GROUP_MEMBER".equals(region.getString("geoAssocTypeId")) && "GROUP".equals(region.getString("geoTypeId")) && regionList.size() == 1) {
        List<GenericValue> tmpState=delegator.findList("GeoAssocAndGeoToWithState",EntityCondition.makeCondition("geoId",region.getString("geoIdFrom")),null,sortList,null,true);
        for (        GenericValue state : tmpState) {
          geoList.addAll(getAssociatedStateList(delegator,state.getString("geoIdFrom"),listOrderBy));
        }
      }
    }
    EntityCondition stateProvinceFindCond=EntityCondition.makeCondition(EntityCondition.makeCondition("geoIdFrom",country),EntityCondition.makeCondition("geoAssocTypeId","REGIONS"),EntityCondition.makeCondition(EntityOperator.OR,EntityCondition.makeCondition("geoTypeId","STATE"),EntityCondition.makeCondition("geoTypeId","PROVINCE"),EntityCondition.makeCondition("geoTypeId","MUNICIPALITY"),EntityCondition.makeCondition("geoTypeId","COUNTY")));
    geoList.addAll(delegator.findList("GeoAssocAndGeoToWithState",stateProvinceFindCond,null,sortList,null,true));
  }
 catch (  GenericEntityException e) {
    Debug.logError(e,"Cannot lookup Geo",module);
  }
  return geoList;
}
