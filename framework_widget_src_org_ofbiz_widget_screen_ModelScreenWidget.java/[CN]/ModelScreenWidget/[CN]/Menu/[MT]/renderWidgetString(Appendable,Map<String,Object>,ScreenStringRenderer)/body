{
  MenuStringRenderer menuStringRenderer=(MenuStringRenderer)context.get("menuStringRenderer");
  if (menuStringRenderer == null) {
    menuStringRenderer=(MenuStringRenderer)context.get("menuStringRenderer");
    if (menuStringRenderer == null) {
      HttpServletRequest request=(HttpServletRequest)context.get("request");
      HttpServletResponse response=(HttpServletResponse)context.get("response");
      if (request != null && response != null) {
        menuStringRenderer=new HtmlMenuRenderer(request,response);
      }
    }
    if (menuStringRenderer == null) {
      throw new IllegalArgumentException("Could not find a menuStringRenderer in the context, and could not find HTTP request/response objects need to create one.");
    }
  }
  ModelMenu modelMenu=getModelMenu(context);
  modelMenu.renderMenuString(writer,context,menuStringRenderer);
}
