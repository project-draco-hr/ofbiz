{
  while (catIterator.hasNext()) {
    GenericValue cat=(GenericValue)catIterator.next();
    CategoryContentWrapper catContentWrapper=new CategoryContentWrapper(cat,request);
    String id=(String)cat.get("productCategoryId");
    catContentWrappers.put(id,catContentWrapper);
    ArrayList subCat=new ArrayList();
    subCat=getRelatedCategoriesRet(request,"subCatList",id,true);
    if (subCat != null) {
      Iterator subCatIterator=UtilMisc.toIterator(subCat);
      if (subCatIterator != null) {
        getCategoryContentWrappers(catContentWrappers,subCatIterator,request);
      }
    }
  }
  return catContentWrappers;
}
