{
  initScreens("screenfop");
  ScreenRenderer screens=(ScreenRenderer)context.get("screens");
  screens.render(screenLocation + "Fop");
  String screenOutString=writer.toString();
  assertNotNull("FopScreen failed to return the screen " + screenLocation + "Fop",screenOutString);
  if (!screenOutString.startsWith("<?xml")) {
    screenOutString="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + screenOutString;
  }
  Reader reader=new StringReader(screenOutString);
  StreamSource src=new StreamSource(reader);
  ByteArrayOutputStream out=new ByteArrayOutputStream();
  try {
    Fop fop=ApacheFopWorker.createFopInstance(out,"application/pdf");
    ApacheFopWorker.transform(src,null,fop);
  }
 catch (  Exception e) {
    assertTrue("Unable to transform FO file : see https://localhost:8443/webtools/control/WebtoolsLayoutDemoPdf for more detail",false);
  }
}
