{
  List<StartupLoader> loaders=new ArrayList<StartupLoader>();
  List<String> loaderArgs=StartupCommandUtil.adaptStartupCommandsToLoaderArgs(ofbizCommands);
  Thread adminServer=createAdminServer(config,serverState,loaders);
  Classpath classPath=createClassPath(config);
  NativeLibClassLoader classLoader=createAndSetContextClassLoader(config,classPath);
  createLogDirectoryIfMissing(config);
  createRuntimeShutdownHook(config,loaders,serverState);
  loadStartupLoaders(config,loaders,loaderArgs,serverState,classLoader);
  startStartupLoaders(loaders,serverState);
  executeShutdownAfterLoadIfConfigured(config,loaders,serverState,adminServer);
}
