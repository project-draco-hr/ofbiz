{
  String productStoreId=(String)context.get("productStoreId");
  String customXml="";
  if (UtilValidate.isNotEmpty(productStoreId)) {
    GenericValue eBayConfig=delegator.findOne("EbayConfig",false,UtilMisc.toMap("productStoreId",productStoreId));
    if (UtilValidate.isNotEmpty(eBayConfig.getString("customXml"))) {
      customXml=eBayConfig.getString("customXml");
    }
 else {
      customXml=UtilProperties.getPropertyValue(configFileName,"eBayExport.customXml");
    }
  }
 else {
    customXml=UtilProperties.getPropertyValue(configFileName,"eBayExport.customXml");
  }
  if (UtilValidate.isNotEmpty(customXml)) {
    Document customXmlDoc=UtilXml.readXmlDocument(customXml);
    if (UtilValidate.isNotEmpty(customXmlDoc)) {
      Element customXmlElement=customXmlDoc.getDocumentElement();
      List<? extends Element> eBayElements=UtilXml.childElementList(customXmlElement);
      for (      Element eBayElement : eBayElements) {
        Node importedElement=itemElem.getOwnerDocument().importNode(eBayElement,true);
        itemElem.appendChild(importedElement);
      }
    }
  }
}
