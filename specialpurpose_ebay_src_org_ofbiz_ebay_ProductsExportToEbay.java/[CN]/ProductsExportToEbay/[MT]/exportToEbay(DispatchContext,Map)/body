{
  Locale locale=(Locale)context.get("locale");
  Map result=null;
  try {
    String configString="ebayExport.properties";
    String devID=UtilProperties.getPropertyValue(configString,"eBayExport.devID");
    String appID=UtilProperties.getPropertyValue(configString,"eBayExport.appID");
    String certID=UtilProperties.getPropertyValue(configString,"eBayExport.certID");
    String token=UtilProperties.getPropertyValue(configString,"eBayExport.token");
    String compatibilityLevel=UtilProperties.getPropertyValue(configString,"eBayExport.compatibilityLevel");
    String siteID=UtilProperties.getPropertyValue(configString,"eBayExport.siteID");
    String xmlGatewayUri=UtilProperties.getPropertyValue(configString,"eBayExport.xmlGatewayUri");
    StringBuffer dataItemsXml=new StringBuffer();
    if (!ServiceUtil.isFailure(buildDataItemsXml(dctx,context,dataItemsXml,token))) {
      result=postItem(xmlGatewayUri,dataItemsXml,devID,appID,certID,"AddItem",compatibilityLevel,siteID);
      if (ServiceUtil.isFailure(result)) {
        return ServiceUtil.returnFailure(ServiceUtil.getErrorMessage(result));
      }
    }
 else {
      return ServiceUtil.returnFailure(UtilProperties.getMessage(resource,"productsExportToEbay.exceptionInExportToEbay",locale));
    }
  }
 catch (  Exception e) {
    Debug.logError("Exception in exportToEbay " + e,module);
    return ServiceUtil.returnFailure(UtilProperties.getMessage(resource,"productsExportToEbay.exceptionInExportToEbay",locale));
  }
  String successMessage=UtilProperties.getMessage(resource,"productsExportToEbay.productItemsSentToEbay",locale);
  if (result != null) {
    String responseString=(String)result.get("successMessage");
    if (UtilValidate.isNotEmpty(responseString)) {
      successMessage=responseString;
    }
  }
  return ServiceUtil.returnSuccess(successMessage);
}
