{
  GenericValue calendarProperties=delegator.findByPrimaryKey("WorkEffort",UtilMisc.toMap("workEffortId",workEffortId));
  if (calendarProperties == null || !"PUBLISH_PROPS".equals(calendarProperties.get("workEffortTypeId"))) {
    return null;
  }
  net.fortuna.ical4j.model.Calendar calendar=makeCalendar(calendarProperties);
  ComponentList components=calendar.getComponents();
  List<GenericValue> workEfforts=getRelatedWorkEfforts(calendarProperties);
  for (  GenericValue workEffort : workEfforts) {
    components.add(makeEvent(workEffort));
  }
  return calendar;
}
