{
  ProductConfigWrapper configWrapper=null;
  String catalogId=CatalogWorker.getCurrentCatalogId(request);
  String webSiteId=CatalogWorker.getWebSiteId(request);
  String productStoreId=ProductStoreWorker.getProductStoreId(request);
  GenericValue autoUserLogin=(GenericValue)request.getSession().getAttribute("autoUserLogin");
  try {
    String cacheKey=productId + SEPARATOR + productStoreId+ SEPARATOR+ catalogId+ SEPARATOR+ webSiteId+ SEPARATOR+ currencyUomId;
    if (!productConfigCache.containsKey(cacheKey)) {
      configWrapper=new ProductConfigWrapper((Delegator)request.getAttribute("delegator"),(LocalDispatcher)request.getAttribute("dispatcher"),productId,productStoreId,catalogId,webSiteId,currencyUomId,UtilHttp.getLocale(request),autoUserLogin);
      productConfigCache.put(cacheKey,new ProductConfigWrapper(configWrapper));
    }
 else {
      configWrapper=new ProductConfigWrapper(productConfigCache.get(cacheKey));
    }
  }
 catch (  ProductConfigWrapperException we) {
    configWrapper=null;
  }
catch (  Exception e) {
    Debug.logWarning(e.getMessage(),module);
  }
  return configWrapper;
}
