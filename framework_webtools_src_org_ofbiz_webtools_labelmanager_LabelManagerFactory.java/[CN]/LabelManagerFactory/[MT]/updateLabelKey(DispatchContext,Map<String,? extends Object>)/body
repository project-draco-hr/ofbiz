{
  String key=(String)context.get("key");
  String update_label=(String)context.get("update_label");
  String fileName=(String)context.get("fileName");
  String confirm=(String)context.get("confirm");
  List<String> localeNames=UtilGenerics.cast(context.get("localeNames"));
  List<String> localeValues=UtilGenerics.cast(context.get("localeValues"));
  Locale locale=(Locale)context.get("locale");
  if (UtilValidate.isNotEmpty(confirm)) {
    LabelInfo label=labels.get(key + keySeparator + fileName);
    if (update_label.equalsIgnoreCase("Y")) {
      if (UtilValidate.isNotEmpty(label)) {
        updateLabelValue(localeNames,localeValues,label,key,fileName);
      }
    }
 else {
      if (UtilValidate.isNotEmpty(label)) {
        return ServiceUtil.returnError(UtilProperties.getMessage(resource,"WebtoolsLabelManagerNewLabelExisting",UtilMisc.toMap("key",key,"fileName",fileName),locale));
      }
 else {
        if (UtilValidate.isEmpty(key)) {
          return ServiceUtil.returnError(UtilProperties.getMessage(resource,"WebtoolsLabelManagerNewLabelEmptyKey",locale));
        }
 else {
          int notEmptyLabels=updateLabelValue(localeNames,localeValues,null,key,fileName);
          if (notEmptyLabels == 0) {
            return ServiceUtil.returnError(UtilProperties.getMessage(resource,"WebtoolsLabelManagerNewLabelEmpty",locale));
          }
        }
      }
    }
  }
  return ServiceUtil.returnSuccess();
}
