{
  GenericDelegator delegator=ctx.getDelegator();
  GenericValue userLogin=(GenericValue)context.get("userLogin");
  List groupWorkEfforts=null;
  if (userLogin != null && userLogin.get("partyId") != null) {
    try {
      List constraints=new LinkedList();
      constraints.add(new EntityExpr("partyId",EntityOperator.EQUALS,userLogin.get("partyId")));
      constraints.add(new EntityExpr("workEffortTypeId",EntityOperator.EQUALS,"ACTIVITY"));
      constraints.add(new EntityExpr("statusId",EntityOperator.NOT_EQUAL,"CAL_DECLINED"));
      constraints.add(new EntityExpr("statusId",EntityOperator.NOT_EQUAL,"CAL_DELEGATED"));
      constraints.add(new EntityExpr("statusId",EntityOperator.NOT_EQUAL,"CAL_COMPLETED"));
      constraints.add(new EntityExpr("statusId",EntityOperator.NOT_EQUAL,"CAL_CANCELLED"));
      constraints.add(new EntityExpr("currentStatusId",EntityOperator.NOT_EQUAL,"WF_COMPLETED"));
      constraints.add(new EntityExpr("currentStatusId",EntityOperator.NOT_EQUAL,"WF_TERMINATED"));
      constraints.add(new EntityExpr("currentStatusId",EntityOperator.NOT_EQUAL,"WF_ABORTED"));
      groupWorkEfforts=delegator.findByAnd("WorkEffortPartyAssignByGroup",constraints,UtilMisc.toList("priority"));
    }
 catch (    GenericEntityException e) {
      Debug.logWarning(e,module);
      return ServiceUtil.returnError("Error finding desired WorkEffort records: " + e.toString());
    }
  }
  Map result=new HashMap();
  if (groupWorkEfforts == null)   groupWorkEfforts=new LinkedList();
  result.put("groupActivities",groupWorkEfforts);
  return result;
}
