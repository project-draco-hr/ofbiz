{
  List entityExprList=UtilMisc.toList(EntityCondition.makeCondition("currentStatusId",EntityOperator.NOT_EQUAL,"CAL_CANCELLED"),EntityCondition.makeCondition("currentStatusId",EntityOperator.NOT_EQUAL,"PRUN_CANCELLED"));
  List typesList=UtilMisc.toList(EntityCondition.makeCondition("workEffortTypeId",EntityOperator.EQUALS,"EVENT"));
  if (partyIds != null && partyIds.size() > 0) {
    entityExprList.add(EntityCondition.makeCondition("partyId",EntityOperator.IN,partyIds));
  }
  if (UtilValidate.isNotEmpty(facilityId)) {
    entityExprList.add(EntityCondition.makeCondition("facilityId",EntityOperator.EQUALS,facilityId));
    typesList.add(EntityCondition.makeCondition("workEffortTypeId",EntityOperator.EQUALS,"PROD_ORDER_HEADER"));
    entityExprList.add(EntityCondition.makeCondition("currentStatusId",EntityOperator.NOT_EQUAL,"PRUN_CREATED"));
    entityExprList.add(EntityCondition.makeCondition("currentStatusId",EntityOperator.NOT_EQUAL,"PRUN_COMPLETED"));
    entityExprList.add(EntityCondition.makeCondition("currentStatusId",EntityOperator.NOT_EQUAL,"PRUN_CLOSED"));
  }
  if (UtilValidate.isNotEmpty(fixedAssetId)) {
    entityExprList.add(EntityCondition.makeCondition("fixedAssetId",EntityOperator.EQUALS,fixedAssetId));
    typesList.add(EntityCondition.makeCondition("workEffortTypeId",EntityOperator.EQUALS,"PROD_ORDER_TASK"));
    entityExprList.add(EntityCondition.makeCondition("currentStatusId",EntityOperator.NOT_EQUAL,"PRUN_CREATED"));
    entityExprList.add(EntityCondition.makeCondition("currentStatusId",EntityOperator.NOT_EQUAL,"PRUN_COMPLETED"));
    entityExprList.add(EntityCondition.makeCondition("currentStatusId",EntityOperator.NOT_EQUAL,"PRUN_CLOSED"));
  }
  EntityCondition typesCondition=null;
  if (typesList.size() == 1) {
    typesCondition=(EntityExpr)typesList.get(0);
  }
 else {
    typesCondition=EntityCondition.makeCondition(typesList,EntityJoinOperator.OR);
  }
  entityExprList.add(typesCondition);
  return entityExprList;
}
