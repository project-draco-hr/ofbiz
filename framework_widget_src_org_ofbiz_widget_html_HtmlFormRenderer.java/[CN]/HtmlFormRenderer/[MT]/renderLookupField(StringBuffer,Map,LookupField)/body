{
  ModelFormField modelFormField=lookupField.getModelFormField();
  buffer.append("<input type=\"text\"");
  String className=modelFormField.getWidgetStyle();
  if (UtilValidate.isNotEmpty(className)) {
    buffer.append(" class=\"");
    buffer.append(className);
    buffer.append('"');
  }
  if (modelFormField.shouldBeRed(context)) {
    buffer.append(" style=\"color: red;\"");
  }
  buffer.append(" name=\"");
  buffer.append(modelFormField.getParameterName(context));
  buffer.append('"');
  String value=modelFormField.getEntry(context,lookupField.getDefaultValue(context));
  if (UtilValidate.isNotEmpty(value)) {
    buffer.append(" value=\"");
    buffer.append(value);
    buffer.append('"');
  }
  buffer.append(" size=\"");
  buffer.append(lookupField.getSize());
  buffer.append('"');
  Integer maxlength=lookupField.getMaxlength();
  if (maxlength != null) {
    buffer.append(" maxlength=\"");
    buffer.append(maxlength.intValue());
    buffer.append('"');
  }
  buffer.append("/>");
  String descriptionFieldName=lookupField.getDescriptionFieldName();
  if (UtilValidate.isNotEmpty(descriptionFieldName)) {
    buffer.append("<a href=\"javascript:call_fieldlookup3(document.");
    buffer.append(modelFormField.getModelForm().getCurrentFormName(context));
    buffer.append('.');
    buffer.append(modelFormField.getParameterName(context));
    buffer.append(",'");
    buffer.append(descriptionFieldName);
    buffer.append(",'");
  }
 else {
    buffer.append("<a href=\"javascript:call_fieldlookup2(document.");
    buffer.append(modelFormField.getModelForm().getCurrentFormName(context));
    buffer.append('.');
    buffer.append(modelFormField.getParameterName(context));
    buffer.append(",'");
  }
  buffer.append(lookupField.getFormName(context));
  buffer.append("'");
  List targetParameterList=lookupField.getTargetParameterList();
  if (targetParameterList.size() > 0) {
    Iterator targetParameterIter=targetParameterList.iterator();
    while (targetParameterIter.hasNext()) {
      String targetParameter=(String)targetParameterIter.next();
      buffer.append(", document.");
      buffer.append(modelFormField.getModelForm().getCurrentFormName(context));
      buffer.append(".");
      buffer.append(targetParameter);
      buffer.append(".value");
    }
  }
  buffer.append(");\">");
  buffer.append("<img src=\"");
  this.appendContentUrl(buffer,"/content/images/fieldlookup.gif");
  buffer.append("\" width=\"16\" height=\"16\" border=\"0\" alt=\"Lookup\"/></a>");
  this.makeHyperlinkString(buffer,lookupField.getSubHyperlink(),context);
  this.appendTooltip(buffer,context,modelFormField);
  this.appendWhitespace(buffer);
}
