{
  this.maxInMemory=newSize;
  Map<K,CacheLine<V>> oldmap=null;
  if (this.memoryTable != null) {
    oldmap=FastMap.newInstance();
    oldmap.putAll(this.memoryTable);
  }
  if (newSize > 0) {
    this.memoryTable=new LRUMap<K,CacheLine<V>>(newSize);
    if (isNullSet) {
      this.memoryTable.put(null,nullValue);
      isNullSet=false;
      nullValue=null;
    }
  }
 else {
    this.memoryTable=FastMap.newInstance();
  }
  if (oldmap != null) {
    this.memoryTable.putAll(oldmap);
  }
}
