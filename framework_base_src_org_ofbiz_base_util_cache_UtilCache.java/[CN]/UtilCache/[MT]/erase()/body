{
  if (fileTable != null) {
synchronized (this) {
      Set<Object> keys=new HashSet<Object>();
      try {
        addAllFileTableKeys(keys);
      }
 catch (      IOException e) {
        Debug.logError(e,module);
      }
      for (      Object key : keys) {
        try {
          V value=fileTable.get(key);
          noteRemoval(toKey(key),value);
          removeHitCount.incrementAndGet();
          fileTable.remove(key);
          jdbmMgr.commit();
        }
 catch (        IOException e) {
          Debug.logError(e,module);
        }
      }
    }
    memoryTable.clear();
  }
 else {
    Iterator<Map.Entry<Object,CacheLine<V>>> it=memoryTable.entrySet().iterator();
    while (it.hasNext()) {
      Map.Entry<Object,CacheLine<V>> entry=it.next();
      noteRemoval(toKey(entry.getKey()),entry.getValue().getValue());
      removeHitCount.incrementAndGet();
      it.remove();
    }
  }
}
