{
  Iterator<? extends Factory<R,A>> it=ServiceRegistry.lookupProviders(factoryInterface);
  while (it.hasNext()) {
    Factory<R,A> factory=it.next();
    R instance=factory.getInstance(obj);
    if (instance != null) {
      return instance;
    }
  }
  throw new ClassNotFoundException(factoryInterface.getClass().getName());
}
