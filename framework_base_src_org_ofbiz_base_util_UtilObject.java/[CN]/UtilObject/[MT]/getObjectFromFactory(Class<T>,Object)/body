{
  Iterator<Factory<T>> it=(Iterator<Factory<T>>)ServiceRegistry.lookupProviders(factoryInterface);
  while (it.hasNext()) {
    Factory<T> factory=it.next();
    T instance=factory.getInstance(obj);
    if (instance != null) {
      return instance;
    }
  }
  throw new ClassNotFoundException(factoryInterface.getClass().getName());
}
