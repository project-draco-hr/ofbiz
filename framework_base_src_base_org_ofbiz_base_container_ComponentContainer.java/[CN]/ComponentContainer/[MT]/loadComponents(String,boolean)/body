{
  if (!loaded) {
    loaded=true;
  }
 else {
    throw new AlreadyLoadedException("Components already loaded, cannot start");
  }
  List components=ComponentLoaderConfig.getRootComponents(loaderConfig);
  String parentPath;
  try {
    parentPath=new File(System.getProperty("ofbiz.home")).getCanonicalFile().toString().replaceAll("\\\\","/");
  }
 catch (  MalformedURLException e) {
    throw new ComponentException(e.getMessage(),e);
  }
catch (  IOException e) {
    throw new ComponentException(e.getMessage(),e);
  }
  if (components != null) {
    Iterator ci=components.iterator();
    while (ci.hasNext()) {
      ComponentLoaderConfig.ComponentDef def=(ComponentLoaderConfig.ComponentDef)ci.next();
      this.loadComponentFromConfig(parentPath,def);
    }
  }
  if (updateClasspath) {
    System.setProperty("java.class.path",classPath.toString());
    ClassLoader cl=classPath.getClassLoader();
    Thread.currentThread().setContextClassLoader(cl);
  }
  Debug.logInfo("All components loaded",module);
}
