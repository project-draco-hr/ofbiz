{
  String localRequestName=UtilHttp.encodeAmpersands(requestName);
  if ("intra-app".equals(targetType)) {
    appendOfbizUrl(writer,"/" + localRequestName,request,response);
  }
 else   if ("inter-app".equals(targetType)) {
    String fullTarget=localRequestName;
    writer.write(fullTarget);
    String externalLoginKey=(String)request.getAttribute("externalLoginKey");
    if (UtilValidate.isNotEmpty(externalLoginKey)) {
      if (fullTarget.indexOf('?') == -1) {
        writer.write('?');
      }
 else {
        writer.write("&amp;");
      }
      writer.write("externalLoginKey=");
      writer.write(externalLoginKey);
    }
  }
 else   if ("content".equals(targetType)) {
    appendContentUrl(writer,localRequestName,request);
  }
 else   if ("plain".equals(targetType)) {
    writer.write(localRequestName);
  }
 else {
    writer.write(localRequestName);
  }
}
