{
  String localRequestName=UtilHttp.encodeAmpersands(requestName);
  if ("intra-app".equals(targetType)) {
    appendOfbizUrl(buffer,"/" + localRequestName,request,response);
  }
 else   if ("inter-app".equals(targetType)) {
    String fullTarget=localRequestName;
    buffer.append(fullTarget);
    String externalLoginKey=(String)request.getAttribute("externalLoginKey");
    if (UtilValidate.isNotEmpty(externalLoginKey)) {
      if (fullTarget.indexOf('?') == -1) {
        buffer.append('?');
      }
 else {
        buffer.append("&amp;");
      }
      buffer.append("externalLoginKey=");
      buffer.append(externalLoginKey);
    }
  }
 else   if ("content".equals(targetType)) {
    appendContentUrl(buffer,localRequestName,request);
  }
 else   if ("plain".equals(targetType)) {
    buffer.append(localRequestName);
  }
 else {
    buffer.append(localRequestName);
  }
}
