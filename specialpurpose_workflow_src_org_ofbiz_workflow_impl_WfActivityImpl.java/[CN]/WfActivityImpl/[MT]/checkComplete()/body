{
  String mode=getDefinitionObject().getString("finishModeEnumId");
  if (mode == null)   throw new CannotComplete("Finish mode cannot be null");
  if (mode.equals("WAM_AUTOMATIC")) {
    if (state().equals("open.running")) {
      Iterator i=getIteratorAssignment();
      while (i.hasNext())       ((WfAssignment)i.next()).changeStatus("CAL_COMPLETED");
      this.complete();
    }
  }
}
