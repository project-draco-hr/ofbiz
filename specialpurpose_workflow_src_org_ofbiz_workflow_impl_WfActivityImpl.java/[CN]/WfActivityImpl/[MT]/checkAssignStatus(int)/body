{
  boolean acceptAll=false;
  boolean completeAll=false;
  GenericValue valueObject=getDefinitionObject();
  if (valueObject.get("acceptAllAssignments") != null)   acceptAll=valueObject.getBoolean("acceptAllAssignments").booleanValue();
  if (valueObject.get("completeAllAssignments") != null)   completeAll=valueObject.getBoolean("completeAllAssignments").booleanValue();
  List<String> validStatus=null;
  if (type == CHECK_ASSIGN)   validStatus=UtilMisc.toList("CAL_ACCEPTED","CAL_COMPLETED","CAL_DELEGATED");
 else   if (type == CHECK_COMPLETE)   validStatus=UtilMisc.toList("CAL_COMPLETED","CAL_DELEGATED");
 else   throw new WfException("Invalid status type");
  boolean foundOne=false;
  for (  GenericValue value : this.getAllAssignments()) {
    String party=value.getString("partyId");
    String role=value.getString("roleTypeId");
    java.sql.Timestamp from=value.getTimestamp("fromDate");
    WfAssignment a=WfFactory.getWfAssignment(getDelegator(),runtimeKey(),party,role,from);
    if (validStatus.contains(a.status())) {
      foundOne=true;
    }
 else {
      if ((type == CHECK_COMPLETE && completeAll) || (type == CHECK_ASSIGN && acceptAll))       return false;
    }
  }
  if ((type == CHECK_COMPLETE && completeAll) || (type == CHECK_ASSIGN && acceptAll)) {
    return true;
  }
 else {
    Debug.logVerbose("[checkAssignStatus] : need only one assignment to pass",module);
    if (foundOne)     return true;
    Debug.logVerbose("[checkAssignStatus] : found no assignment(s)",module);
    return false;
  }
}
