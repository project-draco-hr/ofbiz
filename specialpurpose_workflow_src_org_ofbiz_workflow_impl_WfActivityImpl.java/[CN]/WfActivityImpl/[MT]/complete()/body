{
  if (howManyAssignment() > 0 && !checkAssignStatus(CHECK_COMPLETE))   throw new CannotComplete("All assignments have not been completed");
  try {
    container().receiveResults(this,result());
  }
 catch (  InvalidData e) {
    throw new WfException("Invalid result data was passed",e);
  }
  try {
    changeState("closed.completed");
    GenericValue activityWe=getRuntimeObject();
    activityWe.set("actualCompletionDate",UtilDateTime.nowTimestamp());
    activityWe.store();
  }
 catch (  InvalidState is) {
    throw new WfException("Invalid WF State",is);
  }
catch (  TransitionNotAllowed tna) {
    throw new WfException(tna.getMessage(),tna);
  }
catch (  GenericEntityException gee) {
    throw new WfException(gee.getMessage(),gee);
  }
  container().activityComplete(this);
}
