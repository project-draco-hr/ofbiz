{
  try {
    Reader templateReader=new StringReader(macro);
    Template template=new Template((new java.util.Date()).toString(),templateReader,FreeMarkerWorker.getDefaultOfbizConfig());
    templateReader.close();
    if (writer != null) {
      Map<String,Object> input=UtilMisc.toMap("key",null);
      Environment tmpEnvironment=FreeMarkerWorker.renderTemplate(macroLibrary,input,writer);
      tmpEnvironment.include(template);
    }
 else {
      environment.include(template);
    }
  }
 catch (  TemplateException e) {
    Debug.logError(e,"Error rendering screen thru ftl",module);
  }
catch (  IOException e) {
    Debug.logError(e,"Error rendering screen thru ftl",module);
  }
}
