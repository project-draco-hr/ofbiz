{
  GenericDelegator delegator=(GenericDelegator)request.getAttribute("delegator");
  String sessionId=request.getParameter("sessionId");
  String visitId=request.getParameter("visitId");
  sessionId=sessionId.trim();
  visitId=visitId.trim();
  String responseString="";
  GenericValue visit=null;
  try {
    visit=delegator.findByPrimaryKey("Visit",UtilMisc.toMap("visitId",visitId));
  }
 catch (  GenericEntityException e) {
    Debug.logError(e,"Cannot Visit Object",module);
  }
  if (visit != null && visit.getString("sessionId").equals(sessionId) && appletSessions.containsKey(sessionId)) {
    Map sessionMap=(Map)appletSessions.get(sessionId);
    if (sessionMap != null && sessionMap.containsKey("followPage"))     responseString=(String)sessionMap.remove("followPage");
  }
  try {
    PrintWriter out=response.getWriter();
    response.setContentType("text/plain");
    out.println(responseString);
    out.close();
  }
 catch (  IOException e) {
    Debug.logError(e,"Problems writing servlet output!",module);
  }
  return "success";
}
