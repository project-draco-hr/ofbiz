{
  GenericDelegator delegator=(GenericDelegator)request.getAttribute("delegator");
  String sessionId=request.getParameter("sessionId");
  String visitId=request.getParameter("visitId");
  sessionId=sessionId.trim();
  visitId=visitId.trim();
  String responseString="ERROR";
  GenericValue visit=null;
  try {
    visit=delegator.findByPrimaryKey("Visit",UtilMisc.toMap("visitId",visitId));
  }
 catch (  GenericEntityException e) {
    Debug.logError(e,"Cannot Visit Object",module);
  }
  if (visit.getString("sessionId").equals(sessionId)) {
    String currentPage=request.getParameter("currentPage");
    if (appletSessions.containsKey(sessionId)) {
      Map sessionMap=(Map)appletSessions.get(sessionId);
      String followers=(String)sessionMap.get("followers");
      List folList=StringUtil.split(followers,",");
      Iterator i=folList.iterator();
      while (i.hasNext()) {
        String follower=(String)i.next();
        Map folSesMap=UtilMisc.toMap("followPage",currentPage);
        appletSessions.put(follower,folSesMap);
      }
    }
    responseString="OK";
  }
  try {
    PrintWriter out=response.getWriter();
    response.setContentType("text/plain");
    out.println(responseString);
    out.close();
  }
 catch (  IOException e) {
    Debug.logError(e,"Problems writing servlet output!",module);
  }
  return "success";
}
