{
  if (currentState != State.QUEUED) {
    throw new InvalidJobException("Illegal state change");
  }
  currentState=State.RUNNING;
  init();
  Map<String,Object> result=null;
  try {
    LocalDispatcher dispatcher=dctx.getDispatcher();
    result=dispatcher.runSync(getServiceName(),getContext());
    if (ServiceUtil.isError(result)) {
      this.failed(new Exception(ServiceUtil.getErrorMessage(result)));
    }
    if (requester != null) {
      requester.receiveResult(result);
    }
  }
 catch (  Throwable t) {
    if (requester != null) {
      requester.receiveThrowable(t);
    }
    this.failed(t);
  }
  this.finish(result);
}
