{
  LocalDispatcher dispatcher=dctx.getDispatcher();
  Delegator delegator=dctx.getDelegator();
  GenericValue userLogin=(GenericValue)context.get("userLogin");
  String contentId=(String)context.get("contentId");
  String dataResourceName=(String)context.get("dataResourceName");
  String productId=(String)context.get("productId");
  try {
    if (UtilValidate.isNotEmpty(contentId)) {
      String imageFilenameFormat=UtilProperties.getPropertyValue("catalog","image.filename.format");
      String imageServerPath=FlexibleStringExpander.expandString(UtilProperties.getPropertyValue("catalog","image.server.path"),context);
      FlexibleStringExpander filenameExpander=FlexibleStringExpander.getInstance(imageFilenameFormat);
      String fileLocation=filenameExpander.expandString(UtilMisc.toMap("location","products","type","management/" + productId,"id",contentId));
      String filePathPrefix="";
      String filenameToUse=fileLocation;
      if (fileLocation.lastIndexOf("/") != -1) {
        filePathPrefix=fileLocation.substring(0,fileLocation.lastIndexOf("/") + 1);
        filenameToUse=fileLocation.substring(fileLocation.lastIndexOf("/") + 1);
      }
      String fileName=dataResourceName;
      if (fileName.lastIndexOf(".") > 0) {
        String fileType=fileName.substring(fileName.lastIndexOf("."));
        if (fileType.equals(".jpeg") || fileType.equals(".jpg")) {
          filenameToUse+=".jpg";
        }
 else {
          filenameToUse+=fileName.substring(fileName.lastIndexOf("."));
        }
      }
      File file=new File(imageServerPath + "/products/management/" + productId+ "/"+ filenameToUse);
      file.delete();
    }
  }
 catch (  Exception e) {
    return ServiceUtil.returnError(e.getMessage());
  }
  return ServiceUtil.returnSuccess();
}
