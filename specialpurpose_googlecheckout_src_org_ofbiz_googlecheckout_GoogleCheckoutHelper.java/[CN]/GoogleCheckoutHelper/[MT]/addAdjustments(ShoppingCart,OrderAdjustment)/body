{
  Shipping shipping=adjustment.getShipping();
  BigDecimal shipAmount=new BigDecimal(shipping.getShippingCost());
  GenericValue shipAdj=delegator.makeValue("OrderAdjustment",FastMap.newInstance());
  shipAdj.set("orderAdjustmentTypeId","SHIPPING_CHARGES");
  shipAdj.set("amount",shipAmount);
  cart.addAdjustment(shipAdj);
  BigDecimal taxAmount=new BigDecimal(adjustment.getTotalTax());
  GenericValue taxAdj=delegator.makeValue("OrderAdjustment",FastMap.newInstance());
  taxAdj.set("orderAdjustmentTypeId","SALES_TAX");
  taxAdj.set("amount",taxAmount);
  cart.addAdjustment(taxAdj);
  Collection<MerchantCodes> merchantCodes=adjustment.getMerchantCodes();
  for (  MerchantCodes codes : merchantCodes) {
    GenericValue promoAdj=delegator.makeValue("OrderAdjustment",FastMap.newInstance());
    promoAdj.set("orderAdjustmentTypeId","PROMOTION_ADJUSTMENT");
    promoAdj.set("description","Promotion Code: " + codes.getCode());
    promoAdj.set("comments","Google Promotion: " + codes.getMessage());
    promoAdj.set("amount",new BigDecimal(-1 * (codes.getAppliedAmount())));
    cart.addAdjustment(promoAdj);
  }
}
