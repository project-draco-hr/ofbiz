{
  Element rootElement=null;
  try {
    rootElement=handler.getDocument().getDocumentElement();
  }
 catch (  GenericConfigException e) {
    Debug.logError(e,module);
    return;
  }
  String resourceLocation=handler.getLocation();
  try {
    resourceLocation=handler.getURL().toExternalForm();
  }
 catch (  GenericConfigException e) {
    Debug.logError(e,"Could not get resource URL",module);
  }
  int numDefs=0;
  for (  Element e : UtilXml.childElementList(rootElement,"eca")) {
    String serviceName=e.getAttribute("service");
    String eventName=e.getAttribute("event");
    Map<String,List<ServiceEcaRule>> eventMap=ecaCache.get(serviceName);
    List<ServiceEcaRule> rules=null;
    if (eventMap == null) {
      eventMap=FastMap.newInstance();
      rules=FastList.newInstance();
      ecaCache.put(serviceName,eventMap);
      eventMap.put(eventName,rules);
    }
 else {
      rules=eventMap.get(eventName);
      if (rules == null) {
        rules=FastList.newInstance();
        eventMap.put(eventName,rules);
      }
    }
    rules.add(new ServiceEcaRule(e,resourceLocation));
    numDefs++;
  }
  if (Debug.importantOn()) {
    Debug.logImportant("Loaded [" + StringUtil.leftPad(Integer.toString(numDefs),2) + "] Service ECA Rules from "+ resourceLocation,module);
  }
}
