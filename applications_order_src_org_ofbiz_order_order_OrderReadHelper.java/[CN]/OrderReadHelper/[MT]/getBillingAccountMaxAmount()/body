{
  if (getBillingAccount() == null) {
    return BigDecimal.ZERO;
  }
 else {
    List<GenericValue> paymentPreferences=getPaymentPreferences();
    GenericValue billingAccountPaymentPreference=EntityUtil.getFirst(EntityUtil.filterByAnd(paymentPreferences,UtilMisc.toMap("paymentMethodTypeId","EXT_BILLACT")));
    if ((billingAccountPaymentPreference != null) && (billingAccountPaymentPreference.getBigDecimal("maxAmount") != null)) {
      return billingAccountPaymentPreference.getBigDecimal("maxAmount");
    }
 else {
      return BigDecimal.ZERO;
    }
  }
}
