{
  List<GenericValue> orderPayments=FastList.newInstance();
  List<GenericValue> prefs=null;
  if (orderPaymentPreference == null) {
    prefs=getPaymentPreferences();
  }
 else {
    prefs=UtilMisc.toList(orderPaymentPreference);
  }
  if (prefs != null) {
    Iterator<GenericValue> i=prefs.iterator();
    while (i.hasNext()) {
      GenericValue payPref=i.next();
      try {
        orderPayments.addAll(payPref.getRelated("Payment"));
      }
 catch (      GenericEntityException e) {
        Debug.logError(e,module);
        return null;
      }
    }
  }
  return orderPayments;
}
