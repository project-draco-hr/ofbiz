{
  List orderPayments=new ArrayList();
  List prefs=null;
  if (orderPaymentPreference == null) {
    prefs=getPaymentPreferences();
  }
 else {
    prefs=UtilMisc.toList(orderPaymentPreference);
  }
  if (prefs != null) {
    Iterator i=prefs.iterator();
    while (i.hasNext()) {
      GenericValue payPref=(GenericValue)i.next();
      try {
        orderPayments.addAll(payPref.getRelated("Payment"));
      }
 catch (      GenericEntityException e) {
        Debug.logError(e,module);
        return null;
      }
    }
  }
  return orderPayments;
}
