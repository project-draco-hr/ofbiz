{
  BigDecimal total=ZERO;
  for (Iterator<GenericValue> iter=getPaymentPreferences().iterator(); iter.hasNext(); ) {
    GenericValue preference=iter.next();
    if (preference.get("maxAmount") == null)     continue;
    if (paymentMethodTypeId == null || paymentMethodTypeId.equals(preference.get("paymentMethodTypeId"))) {
      total=total.add(preference.getBigDecimal("maxAmount")).setScale(scale,rounding);
    }
  }
  return total;
}
