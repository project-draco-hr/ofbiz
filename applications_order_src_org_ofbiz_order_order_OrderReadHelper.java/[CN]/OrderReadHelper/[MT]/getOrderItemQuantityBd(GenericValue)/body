{
  String cancelQtyField="cancelQuantity";
  String quantityField="quantity";
  if ("OrderItemAndShipGroupAssoc".equals(orderItem.getEntityName())) {
    cancelQtyField="cancelQuantity";
    quantityField="quantity";
  }
  BigDecimal cancelQty=orderItem.getBigDecimal(cancelQtyField);
  BigDecimal orderQty=orderItem.getBigDecimal(quantityField);
  if (cancelQty == null)   cancelQty=ZERO;
  if (orderQty == null)   orderQty=ZERO;
  return orderQty.subtract(cancelQty).setScale(scale,rounding);
}
