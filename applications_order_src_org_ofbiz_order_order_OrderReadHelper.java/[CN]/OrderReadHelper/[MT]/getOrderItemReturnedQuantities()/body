{
  List returnItems=getOrderReturnItems();
  Map returnMap=FastMap.newInstance();
  for (Iterator iter=this.getValidOrderItems().iterator(); iter.hasNext(); ) {
    GenericValue orderItem=(GenericValue)iter.next();
    List group=EntityUtil.filterByAnd(returnItems,UtilMisc.toMap("orderId",orderItem.get("orderId"),"orderItemSeqId",orderItem.get("orderItemSeqId")));
    BigDecimal returned=BigDecimal.ZERO;
    for (Iterator groupiter=group.iterator(); groupiter.hasNext(); ) {
      GenericValue returnItem=(GenericValue)groupiter.next();
      if (returnItem.getBigDecimal("returnQuantity") != null) {
        returned=returned.add(returnItem.getBigDecimal("returnQuantity"));
      }
    }
    returnMap.put(orderItem.get("orderItemSeqId"),returned);
  }
  return returnMap;
}
