{
  ServiceDispatcher sd=null;
  String dispatcherKey=delegator != null ? delegator.getDelegatorName() : "null";
  sd=(ServiceDispatcher)dispatchers.get(dispatcherKey);
  if (sd == null) {
synchronized (ServiceDispatcher.class) {
      if (Debug.verboseOn())       Debug.logVerbose("[ServiceDispatcher.getInstance] : No instance found (" + delegator.getDelegatorName() + ").",module);
      sd=(ServiceDispatcher)dispatchers.get(dispatcherKey);
      if (sd == null) {
        sd=new ServiceDispatcher(delegator);
        dispatchers.put(dispatcherKey,sd);
      }
    }
  }
  if (name != null && context != null) {
    sd.register(name,context);
  }
  return sd;
}
