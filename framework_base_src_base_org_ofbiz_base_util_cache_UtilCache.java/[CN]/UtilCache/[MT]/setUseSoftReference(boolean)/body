{
  if (this.useSoftReference != useSoftReference) {
    this.useSoftReference=useSoftReference;
    Iterator keys=cacheLineTable.keySet().iterator();
    while (keys.hasNext()) {
      Object key=keys.next();
      CacheLine line=(CacheLine)cacheLineTable.get(key);
      if (useSoftReference) {
        if (line instanceof SoftRefCacheLine)         continue;
        cacheLineTable.put(key,new SoftRefCacheLine(line.getValue(),line.loadTime,line.expireTime));
      }
 else {
        if (line instanceof HardRefCacheLine)         continue;
        cacheLineTable.put(key,new HardRefCacheLine(line.getValue(),line.loadTime,line.expireTime));
      }
    }
  }
}
