{
  GenericValue system=null;
  try {
    system=dctx.getDelegator().findByPrimaryKey("UserLogin",UtilMisc.toMap("userLoginId","system"));
  }
 catch (  GenericEntityException e) {
    throw new GeneralException(e.getMessage(),e);
  }
  parameters.put("userLogin",system);
  if (!parameters.containsKey("locale")) {
    parameters.put("locale",Locale.getDefault());
  }
  Writer writer=new StringWriter();
  try {
    ScreenRenderer screens=new ScreenRenderer(writer,null,htmlScreenRenderer);
    screens.populateContextForService(dctx,parameters);
    screens.render(screen);
  }
 catch (  Throwable t) {
    throw new GeneralException("Problems rendering FOP XSL-FO",t);
  }
  return writer.toString().getBytes();
}
