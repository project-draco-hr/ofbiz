{
  Map result=new HashMap();
  GenericDelegator delegator=ctx.getDelegator();
  LocalDispatcher dispatcher=ctx.getDispatcher();
  Security security=ctx.getSecurity();
  Locale locale=(Locale)context.get("locale");
  GenericValue userLogin=(GenericValue)context.get("userLogin");
  String productionRunId=(String)context.get("productionRunId");
  if (!UtilValidate.isEmpty(productionRunId)) {
    ProductionRun productionRun=new ProductionRun(productionRunId,delegator,dispatcher);
    if (productionRun.exist()) {
      if (!productionRun.getGenericValue().getString("currentStatusId").equals("PRUN_CREATED")) {
        return ServiceUtil.returnError(UtilProperties.getMessage(resource,"ManufacturingProductionRunPrinted",locale));
      }
      Double quantity=(Double)context.get("quantity");
      if (quantity != null && !quantity.equals(productionRun.getQuantity()))       productionRun.setQuantity(quantity);
      Timestamp estimatedStartDate=(Timestamp)context.get("estimatedStartDate");
      if (estimatedStartDate != null && !estimatedStartDate.equals(productionRun.getEstimatedStartDate()))       productionRun.setEstimatedStartDate(estimatedStartDate);
      String workEffortName=(String)context.get("workEffortName");
      if (workEffortName != null)       productionRun.setProductionRunName(workEffortName);
      String description=(String)context.get("description");
      if (description != null)       productionRun.setDescription(description);
      String facilityId=(String)context.get("facilityId");
      if (facilityId != null)       productionRun.getGenericValue().set("facilityId",facilityId);
      if (productionRun.store())       return ServiceUtil.returnSuccess();
 else {
        Debug.logError("productionRun.store() fail for productionRunId =" + productionRunId,module);
        return ServiceUtil.returnError(UtilProperties.getMessage(resource,"ManufacturingProductionRunNotUpdated",locale));
      }
    }
    Debug.logError("no productionRun for productionRunId =" + productionRunId,module);
    return ServiceUtil.returnError(UtilProperties.getMessage(resource,"ManufacturingProductionRunNotUpdated",locale));
  }
  Debug.logError("service updateProductionRun call with productionRunId empty",module);
  return ServiceUtil.returnError(UtilProperties.getMessage(resource,"ManufacturingProductionRunNotUpdated",locale));
}
