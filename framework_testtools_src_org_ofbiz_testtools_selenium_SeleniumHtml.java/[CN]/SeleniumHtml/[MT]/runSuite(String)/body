{
  TestSuite suite=new TestSuite();
  suite.file=new File(filename);
  File suiteDirectory=suite.file.getParentFile();
  this.document=parseDocument(filename);
  Element table=(Element)this.document.getElementsByTagName("table").item(0);
  NodeList tableRows=table.getElementsByTagName("tr");
  Element tableNameRow=(Element)tableRows.item(0);
  suite.name=tableNameRow.getTextContent();
  suite.result=true;
  suite.tests=new Test[tableRows.getLength() - 1];
  Map<String,Object> results=FastMap.newInstance();
  List<String> messages=FastList.newInstance();
  Map<String,Object> testResults;
  for (int i=1; i < tableRows.getLength(); i++) {
    Element tableRow=(Element)tableRows.item(i);
    Element cell=(Element)tableRow.getElementsByTagName("td").item(0);
    Element link=(Element)cell.getElementsByTagName("a").item(0);
    Test test=new Test();
    test.label=link.getTextContent();
    test.file=new File(suiteDirectory,link.getAttribute("href"));
    SeleniumHtml subclient=new SeleniumHtml();
    subclient.setHost(this.host);
    subclient.setPort(this.port);
    subclient.setBrowser(this.browser);
    subclient.setBaseUrl(this.baseUrl);
    testResults=subclient.runTest(test);
    suite.result&=test.result;
    suite.tests[i - 1]=test;
    messages=UtilGenerics.checkList(testResults.get("log"));
  }
  results.put("logs",messages);
  results.put("status",suite.result);
  return results;
}
