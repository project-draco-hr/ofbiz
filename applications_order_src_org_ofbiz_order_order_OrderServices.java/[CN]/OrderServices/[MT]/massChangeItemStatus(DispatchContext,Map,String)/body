{
  LocalDispatcher dispatcher=dctx.getDispatcher();
  Delegator delegator=dctx.getDelegator();
  GenericValue userLogin=(GenericValue)context.get("userLogin");
  List orderIds=(List)context.get("orderIdList");
  Locale locale=(Locale)context.get("locale");
  Iterator i=orderIds.iterator();
  while (i.hasNext()) {
    String orderId=(String)i.next();
    if (UtilValidate.isEmpty(orderId)) {
      continue;
    }
    GenericValue orderHeader=null;
    try {
      orderHeader=delegator.findByPrimaryKey("OrderHeader",UtilMisc.toMap("orderId",orderId));
    }
 catch (    GenericEntityException e) {
      Debug.logError(e,module);
      return ServiceUtil.returnError(e.getMessage());
    }
    if (orderHeader == null) {
      return ServiceUtil.returnFailure(UtilProperties.getMessage(resource,"OrderOrderNotFound",UtilMisc.toMap("orderId",orderId),locale));
    }
    Map ctx=FastMap.newInstance();
    ctx.put("statusId",statusId);
    ctx.put("orderId",orderId);
    ctx.put("userLogin",userLogin);
    Map resp=null;
    try {
      resp=dispatcher.runSync("changeOrderItemStatus",ctx);
    }
 catch (    GenericServiceException e) {
      Debug.logError(e,module);
      return ServiceUtil.returnError(e.getMessage());
    }
    if (ServiceUtil.isError(resp)) {
      return ServiceUtil.returnError("Error changing order item status: ",null,null,resp);
    }
  }
  return ServiceUtil.returnSuccess();
}
