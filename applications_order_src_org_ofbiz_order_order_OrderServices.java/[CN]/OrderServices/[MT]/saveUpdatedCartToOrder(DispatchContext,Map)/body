{
  LocalDispatcher dispatcher=dctx.getDispatcher();
  Delegator delegator=dctx.getDelegator();
  String orderId=(String)context.get("orderId");
  GenericValue userLogin=(GenericValue)context.get("userLogin");
  ShoppingCart cart=(ShoppingCart)context.get("shoppingCart");
  Map changeMap=(Map)context.get("changeMap");
  Locale locale=(Locale)context.get("locale");
  Map result=null;
  try {
    saveUpdatedCartToOrder(dispatcher,delegator,cart,locale,userLogin,orderId,changeMap);
    result=ServiceUtil.returnSuccess();
  }
 catch (  GeneralException e) {
    Debug.logError(e,module);
    result=ServiceUtil.returnError(e.getMessage());
  }
  result.put("orderId",orderId);
  return result;
}
