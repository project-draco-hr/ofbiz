{
  Timestamp fromDate;
  Timestamp thruDate;
  if (timePeriod.get("fromDate") instanceof Timestamp) {
    fromDate=timePeriod.getTimestamp("fromDate");
    thruDate=timePeriod.getTimestamp("thruDate");
  }
 else {
    fromDate=UtilDateTime.toTimestamp(timePeriod.getDate("fromDate"));
    thruDate=UtilDateTime.toTimestamp(timePeriod.getDate("thruDate"));
  }
  EntityConditionList betweenCondition=new EntityConditionList(UtilMisc.toList(new EntityExpr(fieldName,EntityOperator.GREATER_THAN,fromDate),new EntityExpr(fieldName,EntityOperator.LESS_THAN_EQUAL_TO,thruDate)),EntityOperator.AND);
  List conditions=UtilMisc.toList(new EntityExpr(fieldName,EntityOperator.NOT_EQUAL,null),betweenCondition);
  return new EntityConditionList(UtilMisc.toList(conditions),EntityOperator.AND);
}
