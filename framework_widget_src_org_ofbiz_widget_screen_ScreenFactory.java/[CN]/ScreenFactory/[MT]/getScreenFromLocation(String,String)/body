{
  Map modelScreenMap=(Map)screenLocationCache.get(resourceName);
  if (modelScreenMap == null) {
synchronized (ScreenFactory.class) {
      modelScreenMap=(Map)screenLocationCache.get(resourceName);
      if (modelScreenMap == null) {
        long startTime=System.currentTimeMillis();
        ClassLoader loader=Thread.currentThread().getContextClassLoader();
        if (loader == null) {
          loader=ScreenFactory.class.getClassLoader();
        }
        URL screenFileUrl=null;
        screenFileUrl=FlexibleLocation.resolveLocation(resourceName,loader);
        if (screenFileUrl == null) {
          throw new IllegalArgumentException("Could not resolve location to URL: " + resourceName);
        }
        Document screenFileDoc=UtilXml.readXmlDocument(screenFileUrl,true);
        modelScreenMap=readScreenDocument(screenFileDoc,resourceName);
        screenLocationCache.put(resourceName,modelScreenMap);
        double totalSeconds=(System.currentTimeMillis() - startTime) / 1000.0;
        Debug.logInfo("Got " + modelScreenMap.size() + " screens in "+ totalSeconds+ "s from: "+ screenFileUrl.toExternalForm(),module);
      }
    }
  }
  ModelScreen modelScreen=(ModelScreen)modelScreenMap.get(screenName);
  if (modelScreen == null) {
    throw new IllegalArgumentException("Could not find screen with name [" + screenName + "] in class resource ["+ resourceName+ "]");
  }
  return modelScreen;
}
