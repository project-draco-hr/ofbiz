{
  String cacheKey=xmlFilename.concat("#").concat(loaderName);
  ResourceLoader loader=loaderCache.get(cacheKey);
  if (loader == null) {
    Element rootElement=null;
    URL xmlUrl=UtilURL.fromResource(xmlFilename);
    if (xmlUrl == null) {
      throw new GenericConfigException("ERROR: could not find the [" + xmlFilename + "] XML file on the classpath");
    }
    try {
      rootElement=UtilXml.readXmlDocument(xmlUrl,true,true).getDocumentElement();
    }
 catch (    Exception e) {
      throw new GenericConfigException("Error reading " + xmlFilename + ": ",e);
    }
    Element loaderElement=UtilXml.firstChildElement(rootElement,"resource-loader","name",loaderName);
    loader=makeLoader(loaderElement);
    if (loader != null) {
      loader=loaderCache.putIfAbsentAndGet(cacheKey,loader);
    }
  }
  return loader;
}
