{
  List<CartPaymentInfo> foundRecords=new LinkedList<CartPaymentInfo>();
  Iterator<CartPaymentInfo> i=paymentInfo.iterator();
  while (i.hasNext()) {
    CartPaymentInfo inf=i.next();
    if (isPaymentMethod && inf.paymentMethodId != null) {
      if (hasRefNum && inf.refNum != null) {
        foundRecords.add(inf);
      }
 else       if (!hasRefNum && inf.refNum == null) {
        foundRecords.add(inf);
      }
    }
 else     if (isPaymentMethodType && inf.paymentMethodTypeId != null) {
      if (hasRefNum && inf.refNum != null) {
        foundRecords.add(inf);
      }
 else       if (!hasRefNum && inf.refNum == null) {
        foundRecords.add(inf);
      }
    }
  }
  return foundRecords;
}
