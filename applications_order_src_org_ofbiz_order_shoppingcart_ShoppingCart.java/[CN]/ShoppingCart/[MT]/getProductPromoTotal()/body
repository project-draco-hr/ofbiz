{
  double totalDiscount=0;
  List cartAdjustments=this.getAdjustments();
  if (cartAdjustments != null) {
    Iterator cartAdjustmentIter=cartAdjustments.iterator();
    while (cartAdjustmentIter.hasNext()) {
      GenericValue checkOrderAdjustment=(GenericValue)cartAdjustmentIter.next();
      if (UtilValidate.isNotEmpty(checkOrderAdjustment.getString("productPromoId")) && UtilValidate.isNotEmpty(checkOrderAdjustment.getString("productPromoRuleId")) && UtilValidate.isNotEmpty(checkOrderAdjustment.getString("productPromoActionSeqId"))) {
        if (checkOrderAdjustment.get("amount") != null) {
          totalDiscount+=checkOrderAdjustment.getDouble("amount").doubleValue();
        }
      }
    }
  }
  Iterator cartItemIter=this.iterator();
  while (cartItemIter.hasNext()) {
    ShoppingCartItem checkItem=(ShoppingCartItem)cartItemIter.next();
    Iterator checkOrderAdjustments=UtilMisc.toIterator(checkItem.getAdjustments());
    while (checkOrderAdjustments != null && checkOrderAdjustments.hasNext()) {
      GenericValue checkOrderAdjustment=(GenericValue)checkOrderAdjustments.next();
      if (UtilValidate.isNotEmpty(checkOrderAdjustment.getString("productPromoId")) && UtilValidate.isNotEmpty(checkOrderAdjustment.getString("productPromoRuleId")) && UtilValidate.isNotEmpty(checkOrderAdjustment.getString("productPromoActionSeqId"))) {
        if (checkOrderAdjustment.get("amount") != null) {
          totalDiscount+=checkOrderAdjustment.getDouble("amount").doubleValue();
        }
      }
    }
  }
  return totalDiscount;
}
