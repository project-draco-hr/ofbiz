{
  BigDecimal totalDiscount=BigDecimal.ZERO;
  List<GenericValue> cartAdjustments=this.getAdjustments();
  if (cartAdjustments != null) {
    Iterator<GenericValue> cartAdjustmentIter=cartAdjustments.iterator();
    while (cartAdjustmentIter.hasNext()) {
      GenericValue checkOrderAdjustment=cartAdjustmentIter.next();
      if (UtilValidate.isNotEmpty(checkOrderAdjustment.getString("productPromoId")) && UtilValidate.isNotEmpty(checkOrderAdjustment.getString("productPromoRuleId")) && UtilValidate.isNotEmpty(checkOrderAdjustment.getString("productPromoActionSeqId"))) {
        if (checkOrderAdjustment.get("amount") != null) {
          totalDiscount=totalDiscount.add(checkOrderAdjustment.getBigDecimal("amount"));
        }
      }
    }
  }
  Iterator<ShoppingCartItem> cartItemIter=this.iterator();
  while (cartItemIter.hasNext()) {
    ShoppingCartItem checkItem=cartItemIter.next();
    Iterator<GenericValue> checkOrderAdjustments=UtilMisc.toIterator(checkItem.getAdjustments());
    while (checkOrderAdjustments != null && checkOrderAdjustments.hasNext()) {
      GenericValue checkOrderAdjustment=checkOrderAdjustments.next();
      if (UtilValidate.isNotEmpty(checkOrderAdjustment.getString("productPromoId")) && UtilValidate.isNotEmpty(checkOrderAdjustment.getString("productPromoRuleId")) && UtilValidate.isNotEmpty(checkOrderAdjustment.getString("productPromoActionSeqId"))) {
        if (checkOrderAdjustment.get("amount") != null) {
          totalDiscount=totalDiscount.add(checkOrderAdjustment.getBigDecimal("amount"));
        }
      }
    }
  }
  return totalDiscount;
}
