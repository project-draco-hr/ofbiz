{
  if (itemIndex > -1) {
    CartShipInfo csi=this.getShipInfo(idx);
    if (quantity < 0) {
      quantity=0;
    }
    if (quantity > item.getQuantity()) {
      quantity=item.getQuantity();
    }
    csi.resetShipBeforeDateIfAfter(item.getShipBeforeDate());
    csi.resetShipAfterDateIfBefore(item.getShipAfterDate());
    CartShipInfo.CartShipItemInfo csii=csi.setItemInfo(item,quantity);
    this.checkShipItemInfo(csi,csii);
  }
}
