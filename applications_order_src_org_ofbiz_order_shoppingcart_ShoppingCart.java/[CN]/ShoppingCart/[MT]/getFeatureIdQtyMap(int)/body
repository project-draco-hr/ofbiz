{
  CartShipInfo info=this.getShipInfo(idx);
  Map featureMap=new HashMap();
  for (  ShoppingCartItem item : info.shipItemInfo.keySet()) {
    CartShipInfo.CartShipItemInfo csii=(CartShipInfo.CartShipItemInfo)info.shipItemInfo.get(item);
    if (csii != null && csii.quantity.compareTo(BigDecimal.ZERO) > 0) {
      featureMap.putAll(item.getFeatureIdQtyMap(csii.quantity));
    }
  }
  return featureMap;
}
