{
  if (productCategoryId == null)   return this.items();
  GenericDelegator delegator=this.getDelegator();
  List itemsToReturn=FastList.newInstance();
  try {
    Iterator cartItemIter=this.cartLines.iterator();
    while (cartItemIter.hasNext()) {
      ShoppingCartItem cartItem=(ShoppingCartItem)cartItemIter.next();
      if (UtilValidate.isNotEmpty(groupNumber) && !cartItem.isInItemGroup(groupNumber)) {
        continue;
      }
      if (CategoryWorker.isProductInCategory(delegator,cartItem.getProductId(),productCategoryId)) {
        itemsToReturn.add(cartItem);
      }
 else {
      }
    }
  }
 catch (  GenericEntityException e) {
    Debug.logError(e,"Error getting cart items that are in a category: " + e.toString(),module);
  }
  return itemsToReturn;
}
