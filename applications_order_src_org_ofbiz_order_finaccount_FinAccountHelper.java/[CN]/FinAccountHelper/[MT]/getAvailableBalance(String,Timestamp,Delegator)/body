{
  if (asOfDateTime == null)   asOfDateTime=UtilDateTime.nowTimestamp();
  BigDecimal netBalance=getBalance(finAccountId,asOfDateTime,delegator);
  EntityConditionList<EntityCondition> authorizationConditions=EntityCondition.makeCondition(UtilMisc.toList(EntityCondition.makeCondition("finAccountId",EntityOperator.EQUALS,finAccountId),EntityCondition.makeCondition("authorizationDate",EntityOperator.LESS_THAN_EQUAL_TO,asOfDateTime),EntityUtil.getFilterByDateExpr(asOfDateTime)),EntityOperator.AND);
  List<GenericValue> authSums=delegator.findList("FinAccountAuthSum",authorizationConditions,UtilMisc.toSet("amount"),null,null,false);
  BigDecimal authorizationsTotal=addFirstEntryAmount(ZERO,authSums,"amount",(decimals + 1),rounding);
  return netBalance.subtract(authorizationsTotal).setScale(decimals,rounding);
}
