{
  String entityName=entityNameFse.expandString(methodContext.getEnvMap());
  String delegatorName=delegatorNameFse.expandString(methodContext.getEnvMap());
  boolean useCache="true".equals(useCacheFse.expandString(methodContext.getEnvMap()));
  boolean useIterator="true".equals(useIteratorFse.expandString(methodContext.getEnvMap()));
  List<String> orderByNames=orderByListFma.get(methodContext.getEnvMap());
  Collection<String> fieldsToSelectList=fieldsToSelectListFma.get(methodContext.getEnvMap());
  Delegator delegator=methodContext.getDelegator();
  if (!delegatorName.isEmpty()) {
    delegator=DelegatorFactory.getDelegator(delegatorName);
  }
  try {
    EntityCondition whereCond=null;
    Map<String,? extends Object> fieldMap=mapFma.get(methodContext.getEnvMap());
    if (fieldMap != null) {
      whereCond=EntityCondition.makeCondition(fieldMap);
    }
    if (useIterator) {
      listFma.put(methodContext.getEnvMap(),delegator.find(entityName,whereCond,null,UtilMisc.toSet(fieldsToSelectList),orderByNames,null));
    }
 else {
      listFma.put(methodContext.getEnvMap(),delegator.findList(entityName,whereCond,UtilMisc.toSet(fieldsToSelectList),orderByNames,null,useCache));
    }
  }
 catch (  GenericEntityException e) {
    String errMsg="Exception thrown while performing entity find: " + e.getMessage();
    Debug.logWarning(e,errMsg,module);
    simpleMethod.addErrorMessage(methodContext,errMsg);
    return false;
  }
  return true;
}
