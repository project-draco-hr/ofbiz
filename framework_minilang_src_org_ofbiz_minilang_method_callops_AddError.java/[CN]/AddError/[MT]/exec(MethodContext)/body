{
  String message=null;
  if (!this.messageFse.isEmpty()) {
    message=this.messageFse.expandString(methodContext.getEnvMap());
  }
 else   if (this.propertyResource != null) {
    message=UtilProperties.getMessage(this.propertyResource,this.propertykey,methodContext.getEnvMap(),methodContext.getLocale());
  }
  if (message != null) {
    List<String> messages=null;
    if (methodContext.getMethodType() == MethodContext.EVENT) {
      messages=methodContext.getEnv(this.simpleMethod.getEventErrorMessageListName());
      if (messages == null) {
        messages=FastList.newInstance();
        methodContext.putEnv(this.simpleMethod.getEventErrorMessageListName(),messages);
      }
    }
 else {
      messages=methodContext.getEnv(this.simpleMethod.getServiceErrorMessageListName());
      if (messages == null) {
        messages=FastList.newInstance();
        methodContext.putEnv(this.simpleMethod.getServiceErrorMessageListName(),messages);
      }
    }
    messages.add(message);
    Debug.logInfo("<add-error> message = " + message + ", location = "+ this.simpleMethod.getLocationAndName()+ ", line = "+ this.getLineNumber(),this.getClass().getName());
  }
  return true;
}
