{
  this.isRunning=true;
  Iterator ti=tools.iterator();
  while (ti.hasNext()) {
    ToolContext tool=(ToolContext)ti.next();
    runners.add(new ToolRunner(tool));
  }
  while (isRunning) {
    Iterator ri=runners.iterator();
    while (ri.hasNext()) {
      ToolRunner runner=(ToolRunner)ri.next();
      if (!runner.isRunning()) {
        Throwable toolError=runner.getError();
        if (toolError != null) {
        }
 else {
          Map thisResult=runner.getResults();
          if (thisResult != null) {
            toolResults.putAll(thisResult);
          }
        }
        ri.remove();
      }
    }
    try {
      Thread.sleep(5000);
    }
 catch (    InterruptedException e) {
    }
  }
  SharkTransaction trans=null;
  WfActivityInternal act=null;
  try {
    trans=SharkUtilities.createTransaction();
    act=SharkUtilities.getActivity(trans,processKey,activityKey);
    act.set_process_context(trans,toolResults);
    act.finish(trans);
  }
 catch (  TransactionException e) {
    e.printStackTrace();
  }
catch (  BaseException e) {
    e.printStackTrace();
  }
catch (  UpdateNotAllowed e) {
    e.printStackTrace();
  }
catch (  InvalidData e) {
    e.printStackTrace();
  }
catch (  CannotComplete e) {
    e.printStackTrace();
  }
  ThreadedToolAgentManager.removeToolMonitor(this);
}
