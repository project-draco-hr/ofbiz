{
  autoFieldsEntities.add(autoFieldsEntity);
  ModelEntity modelEntity=null;
  try {
    modelEntity=this.entityModelReader.getModelEntity(autoFieldsEntity.entityName);
  }
 catch (  GenericEntityException e) {
    Debug.logError(e,module);
  }
  if (modelEntity == null) {
    throw new IllegalArgumentException("Error finding Entity with name " + autoFieldsEntity.entityName + " for auto-fields-entity in a form widget");
  }
  Iterator<ModelField> modelFieldIter=modelEntity.getFieldsIterator();
  while (modelFieldIter.hasNext()) {
    ModelField modelField=modelFieldIter.next();
    if (modelField.getIsAutoCreatedInternal()) {
      continue;
    }
    ModelFormField modelFormField=this.addFieldFromEntityField(modelEntity,modelField,autoFieldsEntity.defaultFieldType,autoFieldsEntity.defaultPosition);
    if (UtilValidate.isNotEmpty(autoFieldsEntity.mapName)) {
      modelFormField.setMapName(autoFieldsEntity.mapName);
    }
  }
}
