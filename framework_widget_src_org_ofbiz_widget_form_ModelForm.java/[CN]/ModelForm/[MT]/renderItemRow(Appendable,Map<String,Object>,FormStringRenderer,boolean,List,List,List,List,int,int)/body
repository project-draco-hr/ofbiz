{
  int numOfCells=innerDisplayHyperlinkFieldsBegin.size() + innerDisplayHyperlinkFieldsEnd.size() + (innerFormFields.size() > 0 ? 1 : 0);
  int numOfColumnsToSpan=numOfColumns - numOfCells + 1;
  if (numOfColumnsToSpan < 1) {
    numOfColumnsToSpan=1;
  }
  formStringRenderer.renderFormatItemRowOpen(writer,localContext,this);
  Iterator innerDisplayHyperlinkFieldIter=innerDisplayHyperlinkFieldsBegin.iterator();
  while (innerDisplayHyperlinkFieldIter.hasNext()) {
    ModelFormField modelFormField=(ModelFormField)innerDisplayHyperlinkFieldIter.next();
    if (innerDisplayHyperlinkFieldIter.hasNext() || numOfCells > innerDisplayHyperlinkFieldsBegin.size()) {
      formStringRenderer.renderFormatItemRowCellOpen(writer,localContext,this,modelFormField,1);
    }
 else {
      formStringRenderer.renderFormatItemRowCellOpen(writer,localContext,this,modelFormField,numOfColumnsToSpan);
    }
    modelFormField.renderFieldString(writer,localContext,formStringRenderer);
    formStringRenderer.renderFormatItemRowCellClose(writer,localContext,this,modelFormField);
  }
  if (innerFormFields.size() > 0) {
    formStringRenderer.renderFormatItemRowFormCellOpen(writer,localContext,this);
    if (formPerItem) {
      formStringRenderer.renderFormOpen(writer,localContext,this);
    }
    this.renderHiddenIgnoredFields(writer,localContext,formStringRenderer,hiddenIgnoredFieldList);
    Iterator innerFormFieldIter=innerFormFields.iterator();
    while (innerFormFieldIter.hasNext()) {
      ModelFormField modelFormField=(ModelFormField)innerFormFieldIter.next();
      if (separateColumns || modelFormField.getSeparateColumn()) {
        formStringRenderer.renderFormatItemRowCellOpen(writer,localContext,this,modelFormField,1);
      }
      modelFormField.renderFieldString(writer,localContext,formStringRenderer);
      if (separateColumns || modelFormField.getSeparateColumn()) {
        formStringRenderer.renderFormatItemRowCellClose(writer,localContext,this,modelFormField);
      }
    }
    if (formPerItem) {
      formStringRenderer.renderFormClose(writer,localContext,this);
    }
    formStringRenderer.renderFormatItemRowFormCellClose(writer,localContext,this);
  }
  innerDisplayHyperlinkFieldIter=innerDisplayHyperlinkFieldsEnd.iterator();
  while (innerDisplayHyperlinkFieldIter.hasNext()) {
    ModelFormField modelFormField=(ModelFormField)innerDisplayHyperlinkFieldIter.next();
    if (innerDisplayHyperlinkFieldIter.hasNext()) {
      formStringRenderer.renderFormatItemRowCellOpen(writer,localContext,this,modelFormField,1);
    }
 else {
      formStringRenderer.renderFormatItemRowCellOpen(writer,localContext,this,modelFormField,numOfColumnsToSpan);
    }
    modelFormField.renderFieldString(writer,localContext,formStringRenderer);
    formStringRenderer.renderFormatItemRowCellClose(writer,localContext,this,modelFormField);
  }
  formStringRenderer.renderFormatItemRowClose(writer,localContext,this);
}
