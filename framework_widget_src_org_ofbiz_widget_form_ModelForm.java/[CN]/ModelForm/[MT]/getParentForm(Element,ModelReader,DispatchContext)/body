{
  ModelForm parent=null;
  String parentResource=formElement.getAttribute("extends-resource");
  String parentForm=formElement.getAttribute("extends");
  if (parentForm.length() > 0) {
    if (parentResource.length() > 0) {
      try {
        parent=FormFactory.getFormFromLocation(parentResource,parentForm,entityModelReader,dispatchContext);
      }
 catch (      Exception e) {
        Debug.logError(e,"Failed to load parent form definition '" + parentForm + "' at resource '"+ parentResource+ "'",module);
      }
    }
 else     if (!parentForm.equals(formElement.getAttribute("name"))) {
      Element rootElement=formElement.getOwnerDocument().getDocumentElement();
      List<? extends Element> formElements=UtilXml.childElementList(rootElement,"form");
      for (      Element formElementEntry : formElements) {
        if (formElementEntry.getAttribute("name").equals(parentForm)) {
          parent=new ModelForm(formElementEntry,parentResource,entityModelReader,dispatchContext);
          break;
        }
      }
      if (parent == null) {
        Debug.logError("Failed to find parent form definition '" + parentForm + "' in same document.",module);
      }
    }
 else {
      Debug.logError("Recursive form definition found for '" + formElement.getAttribute("name") + ".'",module);
    }
  }
  return parent;
}
