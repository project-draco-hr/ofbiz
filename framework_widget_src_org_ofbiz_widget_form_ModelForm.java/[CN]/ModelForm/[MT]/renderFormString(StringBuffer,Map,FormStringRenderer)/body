{
  ModelFormAction.runSubActions(this.actions,context);
  setWidgetBoundaryComments(context);
  if ("list".equals(this.type) || "multi".equals(this.type)) {
    context.put("useRequestParameters",Boolean.FALSE);
  }
  int positions=1;
  Iterator fieldIter=this.fieldList.iterator();
  while (fieldIter.hasNext()) {
    ModelFormField modelFormField=(ModelFormField)fieldIter.next();
    int curPos=modelFormField.getPosition();
    if (curPos > positions) {
      positions=curPos;
    }
    ModelFormField.FieldInfo currentFieldInfo=modelFormField.getFieldInfo();
    if (currentFieldInfo != null) {
      ModelFormField fieldInfoFormField=currentFieldInfo.getModelFormField();
      if (fieldInfoFormField != null) {
        fieldInfoFormField.setModelForm(this);
      }
    }
 else {
      throw new IllegalArgumentException("Error rendering form, a field has no FieldInfo, ie no sub-element for the type of field for field named: " + modelFormField.getName());
    }
  }
  if ("single".equals(this.type)) {
    this.renderSingleFormString(buffer,context,formStringRenderer,positions);
  }
 else   if ("list".equals(this.type)) {
    this.renderListFormString(buffer,context,formStringRenderer,positions);
  }
 else   if ("multi".equals(this.type)) {
    this.renderMultiFormString(buffer,context,formStringRenderer,positions);
  }
 else   if ("upload".equals(this.type)) {
    this.renderSingleFormString(buffer,context,formStringRenderer,positions);
  }
 else {
    throw new IllegalArgumentException("The type " + this.getType() + " is not supported for form with name "+ this.getName());
  }
}
