{
  try {
    res.setContentType("text/xml");
    Map<String,Object> results=FastMap.newInstance();
    results.put("errorMessage",errorMessage);
    String xmlResults=XmlSerializer.serialize(results);
    XMLStreamReader xmlReader=XMLInputFactory.newInstance().createXMLStreamReader(new StringReader(xmlResults));
    StAXOMBuilder resultsBuilder=new StAXOMBuilder(xmlReader);
    OMElement resultSer=resultsBuilder.getDocumentElement();
    SOAPFactory factory=OMAbstractFactory.getSOAP11Factory();
    SOAPEnvelope resEnv=factory.createSOAPEnvelope();
    SOAPBody resBody=factory.createSOAPBody();
    OMElement errMsg=factory.createOMElement(new QName("Response"));
    errMsg.addChild(resultSer.getFirstElement());
    resBody.addChild(errMsg);
    resEnv.addChild(resBody);
    if (Debug.verboseOn()) {
      try {
        Debug.log("Response Message:\n" + resEnv + "\n",module);
      }
 catch (      Throwable t) {
      }
    }
    resEnv.serialize(res.getOutputStream());
    res.getOutputStream().flush();
  }
 catch (  Exception e) {
    throw new EventHandlerException(e.getMessage(),e);
  }
}
