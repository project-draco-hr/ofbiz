{
  if (fma != null) {
    Object theObj=session.getAttribute(attributeName);
    if (isListReference) {
      List lst=(List)theObj;
      return fma.remove((Map)lst.get(listIndex));
    }
 else {
      return fma.remove((Map)theObj);
    }
  }
 else {
    if (isListReference) {
      List lst=(List)session.getAttribute(attributeName);
      return lst.remove(listIndex);
    }
 else {
      Object theValue=session.getAttribute(attributeName);
      session.removeAttribute(attributeName);
      return theValue;
    }
  }
}
