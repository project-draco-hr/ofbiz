{
  Debug.logInfo(">!!!!!!!!!!!!!!!!!!!!!! getProcessesWhere(SharkTransaction trans, String sqlWhere)",module);
  Debug.logInfo(">!!!!!!!!!!!!!!!!!!!!!! sqlWhere = " + sqlWhere,module);
  StringTokenizer st=null;
  StringTokenizer strtoc=null;
  List returnList=new ArrayList();
  List l=new ArrayList();
  String prcsMngrName=new String();
  String procState=new String();
  String element=null;
  if (sqlWhere != null) {
    st=new StringTokenizer(sqlWhere);
    while (st.hasMoreElements()) {
      element=(String)st.nextElement();
      if (element.equalsIgnoreCase("ProcessDefinitions")) {
        st.nextElement();
        st.nextElement();
        st.nextElement();
        prcsMngrName=(String)st.nextElement();
        strtoc=new StringTokenizer(prcsMngrName,"\'");
        prcsMngrName=strtoc.nextToken();
      }
      if (element.equalsIgnoreCase("ProcessStates")) {
        st.nextElement();
        st.nextElement();
        st.nextElement();
        procState=(String)st.nextElement();
        strtoc=new StringTokenizer(procState,"\'");
        procState=strtoc.nextToken();
        break;
      }
    }
    l=getAllProcessesForMgr(prcsMngrName,trans);
    for (int i=0; i < l.size(); i++) {
      if (((Process)l.get(i)).getState().startsWith(new String(procState.substring(0,procState.length() - 1))))       returnList.add(l.get(i));
    }
  }
 else {
    returnList=getAllProcesses(trans);
    return returnList;
  }
  return returnList;
}
