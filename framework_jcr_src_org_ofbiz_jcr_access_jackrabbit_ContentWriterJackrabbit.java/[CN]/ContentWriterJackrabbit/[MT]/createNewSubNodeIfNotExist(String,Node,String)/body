{
  if (parentNode.hasNode(node)) {
    parentNode=parentNode.getNode(node);
    versioningManager.checkOutContentObject(parentNode.getPath());
  }
 else {
    versioningManager.checkOutContentObject(parentNode.getPath());
    Node newNode=addNewNode(primaryNodeType,parentNode,node);
    versioningManager.addContentToCheckInList(newNode.getPath());
    parentNode=newNode;
  }
  return parentNode;
}
