{
  String contentId=content.getString("contentId");
  Set visitedSet=(Set)context.get("visitedSet");
  if (visitedSet == null) {
    visitedSet=new HashSet();
    context.put("visitedSet",visitedSet);
  }
 else {
    if (visitedSet.contains(contentId)) {
      Debug.logWarning("visitedSet already contains:" + contentId,module);
      return;
    }
 else {
      visitedSet.add(contentId);
    }
  }
  String contentTypeId=content.getString("contentTypeId");
  String newContentTypeId="SUBPAGE_NODE";
  content.put("contentTypeId",newContentTypeId);
  content.store();
  List kids=ContentWorker.getAssociatedContent(content,"from",UtilMisc.toList("SUB_CONTENT"),null,null,null);
  Iterator iter=kids.iterator();
  while (iter.hasNext()) {
    GenericValue kidContent=(GenericValue)iter.next();
    updatePageNodeChildren(kidContent,context);
  }
}
