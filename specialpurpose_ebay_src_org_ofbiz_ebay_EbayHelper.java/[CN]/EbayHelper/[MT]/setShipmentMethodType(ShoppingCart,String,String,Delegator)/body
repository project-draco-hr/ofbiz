{
  String partyId="_NA_";
  String shipmentMethodTypeId="NO_SHIPPING";
  try {
    GenericValue ebayShippingMethod=delegator.findOne("EbayShippingMethod",UtilMisc.toMap("shipmentMethodName",shippingService,"productStoreId",productStoreId),false);
    if (UtilValidate.isNotEmpty(ebayShippingMethod)) {
      partyId=ebayShippingMethod.getString("carrierPartyId");
      shipmentMethodTypeId=ebayShippingMethod.getString("shipmentMethodTypeId");
    }
 else {
      List<GenericValue> ebayShippingMethods=delegator.findByAnd("EbayShippingMethod",UtilMisc.toMap("shipmentMethodName",shippingService),null,false);
      ebayShippingMethod=EntityUtil.getFirst(ebayShippingMethods);
      ebayShippingMethod.put("productStoreId",productStoreId);
      delegator.create(ebayShippingMethod);
      partyId=ebayShippingMethod.getString("carrierPartyId");
      shipmentMethodTypeId=ebayShippingMethod.getString("shipmentMethodTypeId");
    }
  }
 catch (  GenericEntityException e) {
    Debug.logInfo("Unable to find EbayShippingMethod",module);
  }
  cart.setCarrierPartyId(partyId);
  cart.setShipmentMethodTypeId(shipmentMethodTypeId);
}
