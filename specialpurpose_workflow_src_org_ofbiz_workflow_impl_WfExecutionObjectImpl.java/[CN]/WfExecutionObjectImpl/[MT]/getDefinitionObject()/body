{
  String entityName=activityId != null ? "WorkflowActivity" : "WorkflowProcess";
  GenericValue value=null;
  Map<String,Object> fields=UtilMisc.toMap("packageId",(Object)packageId,"packageVersion",packageVersion,"processId",processId,"processVersion",processVersion);
  if (activityId != null)   fields.put("activityId",activityId);
  try {
    value=getDelegator().findOne(entityName,fields,false);
  }
 catch (  GenericEntityException e) {
    throw new WfException(e.getMessage(),e);
  }
  return value;
}
