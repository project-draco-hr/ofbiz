{
  Set<K> keysToRemove=FastSet.newInstance();
  for (  Map.Entry<K,V> mapEntry : map.entrySet()) {
    Object entryValue=mapEntry.getValue();
    if (entryValue != null && !(entryValue instanceof Serializable)) {
      keysToRemove.add(mapEntry.getKey());
      Debug.logInfo("Found Map value that is not Serializable: " + mapEntry.getKey() + "="+ mapEntry.getValue(),module);
    }
    if (entryValue instanceof ServletContext) {
      keysToRemove.add(mapEntry.getKey());
      Debug.logInfo("Found Map value that is a ServletContext: " + mapEntry.getKey() + "="+ mapEntry.getValue(),module);
    }
  }
  for (  K keyToRemove : keysToRemove) {
    map.remove(keyToRemove);
  }
}
