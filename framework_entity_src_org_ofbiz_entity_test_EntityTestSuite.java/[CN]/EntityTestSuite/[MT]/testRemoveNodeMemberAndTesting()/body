{
  flushAndRecreateTree("rnmat");
  createNodeMembers("TEST-RNMAT","remove-node-member-and-testing","rnmat");
  EntityCondition isNodeWithMember=EntityCondition.makeCondition("testingId",EntityOperator.LIKE,"rnmat:%");
  List<GenericValue> values=delegator.findList("TestingNodeMember",isNodeWithMember,null,null,null,false);
  ArrayList<GenericValue> testings=new ArrayList<GenericValue>();
  for (  GenericValue nodeMember : values) {
    testings.add(nodeMember.getRelatedOne("Testing",false));
  }
  delegator.removeAll(values);
  values=delegator.findList("TestingNodeMember",isNodeWithMember,null,null,null,false);
  assertEquals("No more Node Member entities",0,values.size());
  delegator.removeAll(testings);
  values=delegator.findList("Testing",EntityCondition.makeCondition("description",EntityOperator.LIKE,"rnmat:%"),null,null,null,false);
  assertEquals("No more Testing entities",0,values.size());
}
