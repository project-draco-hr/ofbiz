{
  GenericDelegator delegator=SharkContainer.getDelegator();
  GenericValue xpdl=null;
  try {
    xpdl=delegator.findByPrimaryKey("WfRepository",UtilMisc.toMap("xpdlId",xpdlId,"xpdlVersion",xpdlVersion));
    if (!includeHistorical && xpdl.get("isHistorical") != null && xpdl.getString("isHistorical").equalsIgnoreCase("Y")) {
      xpdl=null;
    }
  }
 catch (  GenericEntityException e) {
    throw new RepositoryException(e);
  }
  return xpdl;
}
