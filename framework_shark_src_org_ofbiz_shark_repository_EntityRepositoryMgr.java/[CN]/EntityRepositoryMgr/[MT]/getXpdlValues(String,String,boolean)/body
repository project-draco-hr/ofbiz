{
  GenericDelegator delegator=SharkContainer.getDelegator();
  List exprList=new ArrayList();
  if (xpdlId != null) {
    exprList.add(new EntityExpr("xpdlId",EntityOperator.EQUALS,xpdlId));
  }
  if (xpdlVersion != null) {
    exprList.add(new EntityExpr("xpdlVersion",EntityOperator.EQUALS,xpdlVersion));
  }
  if (!includeHistory) {
    exprList.add(new EntityExpr("isHistorical",EntityOperator.NOT_EQUAL,"Y"));
  }
  EntityCondition cond=new EntityConditionList(exprList,EntityOperator.AND);
  List lookupList=null;
  try {
    lookupList=delegator.findByCondition("WfRepository",cond,null,UtilMisc.toList("-xpdlVersion"));
  }
 catch (  GenericEntityException e) {
    throw new RepositoryException(e);
  }
 finally {
    Debug.set(Debug.VERBOSE,false);
  }
  return lookupList;
}
