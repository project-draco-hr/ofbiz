{
  GenericValue inventoryEventPlanned=null;
  inventoryEventPlanned=delegator.findByPrimaryKey("InventoryEventPlanned",inventoryEventPlannedKeyMap);
  if (inventoryEventPlanned == null) {
    inventoryEventPlanned=delegator.makeValue("InventoryEventPlanned",inventoryEventPlannedKeyMap);
    inventoryEventPlanned.put("eventQuantity",newQuantity);
    inventoryEventPlanned.put("eventName",eventName);
    inventoryEventPlanned.put("facilityId",facilityId);
    inventoryEventPlanned.put("isLate",(isLate ? "Y" : "N"));
    inventoryEventPlanned.create();
  }
 else {
    double qties=newQuantity.doubleValue() + ((Double)inventoryEventPlanned.get("eventQuantity")).doubleValue();
    inventoryEventPlanned.put("eventQuantity",new Double(qties));
    if (!UtilValidate.isEmpty(eventName)) {
      String existingEventName=inventoryEventPlanned.getString("eventName");
      inventoryEventPlanned.put("eventName",(UtilValidate.isEmpty(existingEventName) ? eventName : existingEventName + ", " + eventName));
    }
    if (isLate) {
      inventoryEventPlanned.put("isLate","Y");
    }
    inventoryEventPlanned.store();
  }
}
