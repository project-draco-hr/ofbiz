{
  Assert.notNull("context",context,"protectedKeys",protectedKeys);
  context.put(WIDGET_CONTEXT_KEY,context);
  context.put("context",context);
  ScriptContext scriptContext=new SimpleScriptContext();
  Bindings bindings=new ProtectedBindings(context,Collections.unmodifiableSet(protectedKeys));
  scriptContext.setBindings(bindings,ScriptContext.ENGINE_SCOPE);
  ScriptHelper helper=createScriptHelper(scriptContext);
  if (helper != null) {
    context.put(SCRIPT_HELPER_KEY,helper);
  }
  return scriptContext;
}
