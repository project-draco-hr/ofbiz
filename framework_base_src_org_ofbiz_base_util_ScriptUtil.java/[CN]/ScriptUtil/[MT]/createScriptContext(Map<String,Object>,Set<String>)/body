{
  Assert.notNull("context",context,"protectedKeys",protectedKeys);
  context.put(WIDGET_CONTEXT_KEY,context);
  context.put("context",context);
  ScriptContext scriptContext=new SimpleScriptContext();
  Bindings bindings=new ProtectedBindings(context,Collections.unmodifiableSet(protectedKeys));
  scriptContext.setBindings(bindings,ScriptContext.ENGINE_SCOPE);
  return scriptContext;
}
