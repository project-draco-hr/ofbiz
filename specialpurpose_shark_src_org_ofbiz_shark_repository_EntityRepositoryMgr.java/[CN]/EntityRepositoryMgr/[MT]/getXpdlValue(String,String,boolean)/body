{
  Delegator delegator=SharkContainer.getDelegator();
  GenericValue xpdl=null;
  try {
    xpdl=delegator.findOne(org.ofbiz.shark.SharkConstants.WfRepository,UtilMisc.toMap(org.ofbiz.shark.SharkConstants.xpdlId,xpdlId,org.ofbiz.shark.SharkConstants.xpdlVersion,xpdlVersion),false);
    if (!includeHistorical && xpdl.get(org.ofbiz.shark.SharkConstants.isHistorical) != null && xpdl.getString(org.ofbiz.shark.SharkConstants.isHistorical).equalsIgnoreCase("Y")) {
      xpdl=null;
    }
  }
 catch (  GenericEntityException e) {
    throw new RepositoryException(e);
  }
  return xpdl;
}
