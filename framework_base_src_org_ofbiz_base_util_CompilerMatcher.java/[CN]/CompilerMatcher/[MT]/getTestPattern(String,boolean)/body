{
  Pattern pattern=compiledPatterns.get(stringPattern);
  if (pattern == null) {
    if (caseSensitive) {
      pattern=compiler.compile(stringPattern);
    }
 else {
      pattern=compiler.compile(stringPattern,Perl5Compiler.CASE_INSENSITIVE_MASK);
    }
    compiledPatterns.put(stringPattern,pattern);
    Debug.logVerbose("Compiled and cached a pattern: '" + stringPattern + "' - "+ Thread.currentThread(),module);
  }
  return pattern;
}
