{
  GenericDelegator delegator=SharkContainer.getDelegator();
  GenericValue user=delegator.makeValue(org.ofbiz.shark.SharkConstants.SharkUser);
  user.set(org.ofbiz.shark.SharkConstants.userName,username);
  user.set(org.ofbiz.shark.SharkConstants.firstName,firstName);
  user.set(org.ofbiz.shark.SharkConstants.lastName,lastName);
  user.set(org.ofbiz.shark.SharkConstants.passwd,password);
  user.set(org.ofbiz.shark.SharkConstants.emailAddress,email);
  try {
    delegator.create(user);
  }
 catch (  GenericEntityException e) {
    Debug.logError(e,module);
    throw new RootException(e);
  }
  if (groupName != null) {
    this.addUserToGroup(trans,groupName,username);
  }
}
