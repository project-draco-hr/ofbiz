{
  if (dummyPKs == null) {
    return 0;
  }
  boolean beganTransaction=false;
  int numRemoved=0;
  try {
    for (    GenericEntity value : dummyPKs) {
      if (value.containsPrimaryKey()) {
        numRemoved+=this.removeByPrimaryKey(value.getPrimaryKey(),doCacheClear);
      }
 else {
        numRemoved+=this.removeByAnd(value.getEntityName(),value.getAllFields(),doCacheClear);
      }
    }
    return numRemoved;
  }
 catch (  GenericEntityException e) {
    String errMsg="Failure in removeAll operation: " + e.toString() + ". Rolling back transaction.";
    Debug.logError(e,errMsg,module);
    try {
      TransactionUtil.rollback(beganTransaction,errMsg,e);
    }
 catch (    GenericEntityException e2) {
      Debug.logError(e2,"[GenericDelegator] Could not rollback transaction: " + e2.toString(),module);
    }
    throw e;
  }
 finally {
    TransactionUtil.commit(beganTransaction);
  }
}
