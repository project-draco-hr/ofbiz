{
  Iterator<String> enames=UtilMisc.toIterator(getModelGroupReader().getEntityNamesByGroup(groupName));
  Map<String,ModelEntity> entities=FastMap.newInstance();
  if (enames == null || !enames.hasNext()) {
    return entities;
  }
  int errorCount=0;
  while (enames.hasNext()) {
    String ename=enames.next();
    try {
      ModelEntity entity=getModelReader().getModelEntity(ename);
      if (entity != null) {
        entities.put(entity.getEntityName(),entity);
      }
 else {
        throw new IllegalStateException("Could not find entity with name " + ename);
      }
    }
 catch (    GenericEntityException ex) {
      errorCount++;
      Debug.logError("Entity " + ename + " named in Entity Group with name "+ groupName+ " are not defined in any Entity Definition file",module);
    }
  }
  if (errorCount > 0) {
    Debug.logError(errorCount + " entities were named in ModelGroup but not defined in any EntityModel",module);
  }
  return entities;
}
