{
  ModelEntity model=entity.getModelEntity();
  String entityName=model.getEntityName();
  Iterator i=model.getFieldsIterator();
  while (i.hasNext()) {
    ModelField field=(ModelField)i.next();
    if (field.getEncrypt()) {
      Object obj=entity.get(field.getName());
      if (obj != null) {
        if (obj instanceof String && UtilValidate.isEmpty((String)obj)) {
          continue;
        }
        entity.dangerousSetNoCheckButFast(field,this.encryptFieldValue(entityName,obj));
      }
    }
  }
}
