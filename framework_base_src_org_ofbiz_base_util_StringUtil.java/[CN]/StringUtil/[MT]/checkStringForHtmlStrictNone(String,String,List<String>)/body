{
  if (UtilValidate.isEmpty(value))   return value;
  try {
    value=defaultWebEncoder.canonicalize(value,true);
  }
 catch (  EncodingException e) {
    Debug.logError("Canonicalization (format consistency, character escaping that is mixed or double, etc) error for attribute named [" + valueName + "], String ["+ value+ "]: "+ e.toString(),module);
    errorMessageList.add("In field [" + valueName + "] found character espacing (mixed or double) that is not allowed or other format consistency error: "+ e.toString());
  }
  if (value.indexOf("<") >= 0 || value.indexOf(">") >= 0) {
    errorMessageList.add("In field [" + valueName + "] less-than (<) and greater-than (>) symbols are not allowed.");
  }
  int curAmpIndex=value.indexOf("&");
  while (curAmpIndex >= 0) {
    if (' ' != value.charAt(curAmpIndex + 1)) {
      errorMessageList.add("In field [" + valueName + "] the ampersand (&) symbol is only allowed if followed by a space.");
      break;
    }
    curAmpIndex=value.indexOf("&",curAmpIndex + 1);
  }
  int curPercIndex=value.indexOf("%");
  while (curPercIndex >= 0) {
    if (' ' != value.charAt(curPercIndex + 1)) {
      errorMessageList.add("In field [" + valueName + "] the percent (%) symbol is only allowed if followed by a space.");
      break;
    }
    curPercIndex=value.indexOf("%",curPercIndex + 1);
  }
  return value;
}
