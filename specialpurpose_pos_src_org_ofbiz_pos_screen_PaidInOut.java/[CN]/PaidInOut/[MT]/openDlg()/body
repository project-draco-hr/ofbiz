{
  m_dialog=(XDialog)pageMgr.loadPage(m_pos.getScreenLocation() + "/dialog/PaidInOut");
  m_amountEdit=(XEdit)m_dialog.findComponent("amountEdit");
  m_reasonsCombo=(XComboBox)m_dialog.findComponent("ReasonsCombo");
  m_cancel=(XButton)m_dialog.findComponent("BtnCancel");
  m_ok=(XButton)m_dialog.findComponent("BtnOk");
  m_amoutLabel=(XLabel)m_dialog.findComponent("amoutLabel");
  m_reasonLabel=(XLabel)m_dialog.findComponent("reasonLabel");
  XEventHelper.addMouseHandler(this,m_cancel,"cancel");
  XEventHelper.addMouseHandler(this,m_ok,"verify");
  XEventHelper.addMouseHandler(this,m_amountEdit,"editAmount");
  m_comboModel=new DefaultComboBoxModel();
  ResourceBundle reasons=null;
  Enumeration reasonsKeys=null;
  if (m_type.equals("IN")) {
    m_dialog.setCaption(UtilProperties.getMessage("pos","PaidInTitle",Locale.getDefault()));
    reasons=ResourceBundle.getBundle(m_pos.getScreenLocation() + "/dialog/PaidIn",Locale.getDefault());
    reasonsKeys=reasons.getKeys();
  }
 else {
    m_dialog.setCaption(UtilProperties.getMessage("pos","PaidOutTitle",Locale.getDefault()));
    reasons=ResourceBundle.getBundle(m_pos.getScreenLocation() + "/dialog/PaidOut",Locale.getDefault());
    reasonsKeys=reasons.getKeys();
  }
  while (reasonsKeys.hasMoreElements()) {
    String key=(String)reasonsKeys.nextElement();
    String val=reasons.getString(key);
    m_comboModel.addElement(val);
  }
  m_reasonsCombo.setModel(m_comboModel);
  m_reasonsCombo.setToolTipText(UtilProperties.getMessage("pos","CreateOrChooseReasonInOut",Locale.getDefault()));
  m_dialog.pack();
  m_reasonsCombo.requestFocusInWindow();
  m_dialog.showDialog(this);
  if (cancelled) {
    return new HashMap();
  }
 else {
    return UtilMisc.toMap("amount",m_amountEdit.getText(),"reason",(String)m_reasonsCombo.getSelectedItem());
  }
}
