{
  m_dialog=(XDialog)pageMgr.loadPage(m_pos.getScreenLocation() + "/dialog/PaidInOut");
  m_amountEdit=(XEdit)m_dialog.findComponent("amountEdit");
  m_reasonsCombo=(XComboBox)m_dialog.findComponent("ReasonsCombo");
  m_cancel=(XButton)m_dialog.findComponent("BtnCancel");
  m_ok=(XButton)m_dialog.findComponent("BtnOk");
  m_amoutLabel=(XLabel)m_dialog.findComponent("amoutLabel");
  m_reasonLabel=(XLabel)m_dialog.findComponent("reasonLabel");
  Locale locale=Locale.getDefault();
  XEventHelper.addMouseHandler(this,m_cancel,"cancel");
  XEventHelper.addMouseHandler(this,m_ok,"verify");
  XEventHelper.addMouseHandler(this,m_amountEdit,"editAmount");
  m_comboModel=new DefaultComboBoxModel();
  List<GenericValue> posPaidReasons=FastList.newInstance();
  if (m_type.equals("IN")) {
    m_dialog.setCaption(UtilProperties.getMessage(PosTransaction.resource,"PaidInTitle",locale));
    try {
      posPaidReasons=m_trans.getSession().getDelegator().findByAndCache("Enumeration",UtilMisc.toMap("enumTypeId","POS_PAID_REASON_IN"));
    }
 catch (    GenericEntityException e) {
      Debug.logError(e,module);
    }
  }
 else {
    m_dialog.setCaption(UtilProperties.getMessage(PosTransaction.resource,"PaidOutTitle",locale));
    try {
      posPaidReasons=m_trans.getSession().getDelegator().findByAndCache("Enumeration",UtilMisc.toMap("enumTypeId","POS_PAID_REASON_OUT"));
    }
 catch (    GenericEntityException e) {
      Debug.logError(e,module);
    }
  }
  for (  GenericValue reason : posPaidReasons) {
    m_comboModel.addElement(reason.get("description",locale));
  }
  m_reasonsCombo.setModel(m_comboModel);
  m_reasonsCombo.setToolTipText(UtilProperties.getMessage(PosTransaction.resource,"CreateOrChooseReasonInOut",locale));
  m_dialog.pack();
  m_reasonsCombo.requestFocusInWindow();
  m_dialog.showDialog(this);
  if (cancelled) {
    return new HashMap();
  }
 else {
    return UtilMisc.toMap("amount",m_amountEdit.getText(),"reason",(String)m_reasonsCombo.getSelectedItem());
  }
}
