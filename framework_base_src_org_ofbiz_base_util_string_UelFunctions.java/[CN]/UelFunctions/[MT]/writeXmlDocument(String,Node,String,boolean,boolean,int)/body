{
  Element element=null;
  if (node instanceof Document) {
    element=((Document)node).getDocumentElement();
  }
 else {
    try {
      element=(Element)node;
    }
 catch (    Exception e) {
    }
  }
  if (element != null) {
    try {
      File file=FileUtil.getFile(str);
      if (file != null) {
        FileOutputStream os=new FileOutputStream(file);
        UtilXml.writeXmlDocument(element,os,encoding,omitXmlDeclaration,indent,indentAmount);
        os.close();
        return true;
      }
 else {
        Debug.logError("Unable to create XML document " + str,module);
      }
    }
 catch (    Exception e) {
      Debug.logError(e,"Error while writing XML document " + str,module);
    }
  }
 else {
    Debug.logError("Error while writing XML document " + str + ": Node is not an instance of Document or Element - "+ node.getClass().getName(),module);
  }
  return false;
}
