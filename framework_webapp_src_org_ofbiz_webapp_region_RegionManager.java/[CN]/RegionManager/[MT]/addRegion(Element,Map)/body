{
  Region newRegion=null;
  String idAttr=defineElement.getAttribute("id");
  String templateAttr=defineElement.getAttribute("template");
  String regionAttr=defineElement.getAttribute("region");
  if (UtilValidate.isNotEmpty(templateAttr) && UtilValidate.isNotEmpty(regionAttr)) {
    throw new IllegalArgumentException("Cannot use both template and region attributes");
  }
  if (UtilValidate.isNotEmpty(templateAttr)) {
    newRegion=new Region(idAttr,templateAttr,null);
  }
 else {
    if (UtilValidate.isNotEmpty(regionAttr)) {
      Region parentRegion=(Region)regions.get(regionAttr);
      if (parentRegion == null) {
        throw new IllegalArgumentException("can't find page definition attribute with this key: " + regionAttr);
      }
      newRegion=new Region(idAttr,parentRegion.getContent(),parentRegion.getSections());
    }
 else {
      throw new IllegalArgumentException("Must specify either the template or the region attribute");
    }
  }
  regions.put(idAttr,newRegion);
  List putElements=UtilXml.childElementList(defineElement,"put");
  Iterator putIter=putElements.iterator();
  while (putIter.hasNext()) {
    Element putElement=(Element)putIter.next();
    newRegion.put(makeSection(putElement));
  }
}
