{
  if (design == null || design.getDesignObject() == null)   throw new ReportServiceException(BirtResources.getMessage(ResourceConstants.GENERAL_EXCEPTION_NO_REPORT_DESIGN));
  HttpServletRequest request=(HttpServletRequest)options.getOption(InputOptions.OPT_REQUEST);
  try {
    ViewerAttributeBean attrBean=(ViewerAttributeBean)request.getAttribute(IBirtConstants.ATTRIBUTE_BEAN);
    String reportTitle=ParameterAccessor.htmlDecode(attrBean.getReportTitle());
    IReportRunnable runnable=(IReportRunnable)design.getDesignObject();
    Integer maxRows=null;
    if (ParameterAccessor.isReportParameterExist(request,ParameterAccessor.PARAM_MAXROWS))     maxRows=Integer.valueOf(ParameterAccessor.getMaxRows(request));
    try {
      ReportEngineService.getInstance().getEngineConfig().getAppContext().putAll(BirtContainer.getReportEngine().getConfig().getAppContext());
    }
 catch (    Exception e) {
      Debug.logError(e,module);
    }
    ReportEngineService.getInstance().runAndRenderReport(runnable,out,options,parameters,null,null,null,displayTexts,reportTitle,maxRows);
  }
 catch (  RemoteException e) {
    throwReportServiceException(e);
  }
}
