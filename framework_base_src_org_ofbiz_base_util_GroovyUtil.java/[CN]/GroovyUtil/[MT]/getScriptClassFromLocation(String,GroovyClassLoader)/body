{
  try {
    Class<?> scriptClass=null;
synchronized (parsedScripts) {
      scriptClass=parsedScripts.get(location);
    }
    if (scriptClass == null) {
      URL scriptUrl=FlexibleLocation.resolveLocation(location);
      if (scriptUrl == null) {
        throw new GeneralException("Script not found at location [" + location + "]");
      }
      if (groovyClassLoader != null) {
        scriptClass=parseClass(scriptUrl.openStream(),location,groovyClassLoader);
      }
 else {
        scriptClass=parseClass(scriptUrl.openStream(),location);
      }
synchronized (parsedScripts) {
        Class<?> scriptClassCached=parsedScripts.get(location);
        if (scriptClassCached == null) {
          if (Debug.verboseOn()) {
            Debug.logVerbose("Caching Groovy script at: " + location,module);
          }
          parsedScripts.put(location,scriptClass);
        }
 else {
          scriptClass=scriptClassCached;
        }
      }
    }
    return scriptClass;
  }
 catch (  Exception e) {
    throw new GeneralException("Error loading Groovy script at [" + location + "]: ",e);
  }
}
