{
  String retVal=null;
  if (this.description != null && !this.description.isEmpty()) {
    retVal=this.description.expandString(context);
  }
 else {
    retVal=modelFormField.getEntry(context);
  }
  if (retVal == null || retVal.length() == 0) {
    retVal="";
  }
 else   if ("currency".equals(type)) {
    Locale locale=(Locale)context.get("locale");
    if (locale == null)     locale=Locale.getDefault();
    String isoCode=null;
    if (this.currency != null && !this.currency.isEmpty()) {
      isoCode=this.currency.expandString(context);
    }
    try {
      BigDecimal parsedRetVal=new BigDecimal(retVal);
      retVal=UtilFormatOut.formatCurrency(parsedRetVal,isoCode,locale,10);
    }
 catch (    NumberFormatException e) {
      String errMsg="Error formatting currency value [" + retVal + "]: "+ e.toString();
      Debug.logError(e,errMsg,module);
      throw new IllegalArgumentException(errMsg);
    }
  }
 else   if ("date".equals(type) && retVal.length() > 10) {
    retVal=retVal.substring(0,10);
  }
  return retVal;
}
