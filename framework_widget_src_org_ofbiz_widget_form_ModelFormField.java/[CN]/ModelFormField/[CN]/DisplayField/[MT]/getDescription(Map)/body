{
  String retVal=null;
  if (this.description != null && !this.description.isEmpty()) {
    retVal=this.description.expandString(context);
  }
 else {
    retVal=modelFormField.getEntry(context);
  }
  if (retVal == null || retVal.length() == 0) {
    retVal="&nbsp;";
  }
 else   if ("currency".equals(type)) {
    Locale locale=(Locale)context.get("locale");
    if (locale == null)     locale=Locale.getDefault();
    String isoCode=null;
    if (this.currency != null && !this.currency.isEmpty()) {
      isoCode=this.currency.expandString(context);
    }
    try {
      Double parsedRetVal=(Double)ObjectType.simpleTypeConvert(retVal,"Double",null,locale,false);
      retVal=UtilFormatOut.formatCurrency(parsedRetVal,isoCode,locale);
    }
 catch (    GeneralException e) {
      String errMsg="Error formatting currency value [" + retVal + "]: "+ e.toString();
      Debug.logError(e,errMsg,module);
      throw new IllegalArgumentException(errMsg);
    }
  }
  return retVal;
}
