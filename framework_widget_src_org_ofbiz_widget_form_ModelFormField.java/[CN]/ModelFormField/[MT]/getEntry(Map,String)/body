{
  Boolean isError=(Boolean)context.get("isError");
  Boolean useRequestParameters=(Boolean)context.get("useRequestParameters");
  Locale locale=(Locale)context.get("locale");
  if (locale == null)   locale=Locale.getDefault();
  if ((Boolean.TRUE.equals(isError) && !Boolean.FALSE.equals(useRequestParameters)) || (Boolean.TRUE.equals(useRequestParameters))) {
    Map parameters=(Map)context.get("parameters");
    if (parameters != null && parameters.get(this.getParameterName(context)) != null) {
      return (String)parameters.get(this.getParameterName(context));
    }
 else {
      return defaultValue;
    }
  }
 else {
    Map dataMap=this.getMap(context);
    boolean dataMapIsContext=false;
    if (dataMap == null) {
      dataMap=context;
      dataMapIsContext=true;
    }
    Object retVal=null;
    if (this.entryAcsr != null && !this.entryAcsr.isEmpty()) {
      if (dataMap instanceof GenericEntity) {
        GenericEntity genEnt=(GenericEntity)dataMap;
        if (genEnt.getModelEntity().isField(this.entryAcsr.getOriginalName())) {
          retVal=genEnt.get(this.entryAcsr.getOriginalName());
        }
 else {
        }
      }
 else {
        retVal=this.entryAcsr.get(dataMap);
      }
    }
 else {
      retVal=dataMap.get(this.name);
    }
    if (dataMapIsContext && retVal == null && !Boolean.FALSE.equals(useRequestParameters)) {
      Map parameters=(Map)context.get("parameters");
      if (parameters != null) {
        if (this.entryAcsr != null && !this.entryAcsr.isEmpty()) {
          retVal=this.entryAcsr.get(parameters);
        }
 else {
          retVal=parameters.get(this.name);
        }
      }
    }
    if (retVal != null) {
      if (retVal instanceof Double || retVal instanceof Float || retVal instanceof BigDecimal) {
        NumberFormat nf=NumberFormat.getInstance(locale);
        nf.setMaximumFractionDigits(10);
        return nf.format(retVal);
      }
 else {
        return retVal.toString();
      }
    }
 else {
      return defaultValue;
    }
  }
}
