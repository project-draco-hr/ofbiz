{
  HashMap result=new HashMap();
  GenericDelegator delegator=dctx.getDelegator();
  String dataResourceId=(String)context.get("dataResourceId");
  ByteWrapper byteWrapper=(ByteWrapper)context.get("imageData");
  if (byteWrapper != null) {
    byte[] imageBytes=byteWrapper.getBytes();
    try {
      GenericValue imageDataResource=delegator.makeValue("ImageDataResource",UtilMisc.toMap("dataResourceId",dataResourceId));
      imageDataResource.setBytes("imageData",imageBytes);
      if (Debug.infoOn())       Debug.logInfo("imageDataResource(C):" + imageDataResource,module);
      imageDataResource.create();
    }
 catch (    GenericEntityException e) {
      return ServiceUtil.returnError(e.getMessage());
    }
  }
  return result;
}
