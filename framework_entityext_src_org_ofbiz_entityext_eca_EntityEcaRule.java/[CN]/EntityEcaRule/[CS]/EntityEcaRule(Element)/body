{
  this.entityName=eca.getAttribute("entity");
  this.operationName=eca.getAttribute("operation");
  this.eventName=eca.getAttribute("event");
  this.runOnError="true".equals(eca.getAttribute("run-on-error"));
  List condList=UtilXml.childElementList(eca,"condition");
  Iterator ci=condList.iterator();
  while (ci.hasNext()) {
    conditions.add(new EntityEcaCondition((Element)ci.next(),true));
  }
  List condFList=UtilXml.childElementList(eca,"condition-field");
  Iterator cfi=condFList.iterator();
  while (cfi.hasNext()) {
    conditions.add(new EntityEcaCondition((Element)cfi.next(),false));
  }
  if (Debug.verboseOn())   Debug.logVerbose("Conditions: " + conditions,module);
  Set nameSet=FastSet.newInstance();
  nameSet.add("set");
  nameSet.add("action");
  List actionAndSetList=UtilXml.childElementList(eca,nameSet);
  Iterator si=actionAndSetList.iterator();
  while (si.hasNext()) {
    Element actionOrSetElement=(Element)si.next();
    if ("action".equals(actionOrSetElement.getNodeName())) {
      this.actionsAndSets.add(new EntityEcaAction(actionOrSetElement));
    }
 else {
      this.actionsAndSets.add(new EntityEcaSetField(actionOrSetElement));
    }
  }
  if (Debug.verboseOn())   Debug.logVerbose("actions and sets (intermixed): " + actionsAndSets,module);
}
