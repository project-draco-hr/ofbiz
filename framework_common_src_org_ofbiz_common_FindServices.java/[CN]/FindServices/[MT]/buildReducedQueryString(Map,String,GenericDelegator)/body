{
  ModelEntity modelEntity=delegator.getModelEntity(entityName);
  HashMap normalizedFields=new HashMap();
  Iterator ifIter=inputFields.keySet().iterator();
  while (ifIter.hasNext()) {
    String fieldNameRaw=null;
    String fieldNameRoot=null;
    String fieldPair=null;
    Object fieldValue=null;
    int iPos=-1;
    int iPos2=-1;
    String fieldMode=null;
    fieldNameRaw=(String)ifIter.next();
    fieldValue=inputFields.get(fieldNameRaw);
    if (ObjectType.isEmpty(fieldValue)) {
      continue;
    }
    iPos=fieldNameRaw.indexOf("_");
    if (iPos >= 0) {
      String suffix=fieldNameRaw.substring(iPos + 1);
      iPos2=suffix.indexOf("_");
      if (iPos2 == 1) {
        continue;
      }
    }
    if (iPos < 0) {
      fieldNameRoot=fieldNameRaw;
      fieldPair="fld0";
      fieldMode="value";
    }
 else {
      fieldNameRoot=fieldNameRaw.substring(0,iPos);
    }
    if (modelEntity.isField(fieldNameRoot)) {
      normalizedFields.put(fieldNameRaw,fieldValue);
    }
  }
  return normalizedFields;
}
