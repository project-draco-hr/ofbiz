{
  String entityName=(String)context.get("entityName");
  EntityConditionList<EntityCondition> entityConditionList=UtilGenerics.cast(context.get("entityConditionList"));
  List<String> orderByList=checkList(context.get("orderByList"),String.class);
  boolean noConditionFind="Y".equals(context.get("noConditionFind"));
  boolean distinct="Y".equals(context.get("distinct"));
  List<String> fieldList=UtilGenerics.checkList(context.get("fieldList"));
  Locale locale=(Locale)context.get("locale");
  Set<String> fieldSet=null;
  if (fieldList != null) {
    fieldSet=UtilMisc.makeSetWritable(fieldList);
  }
  Integer maxRows=(Integer)context.get("maxRows");
  maxRows=maxRows != null ? maxRows : -1;
  Delegator delegator=dctx.getDelegator();
  EntityListIterator listIt=null;
  int listSize=0;
  try {
    if (noConditionFind || (entityConditionList != null && entityConditionList.getConditionListSize() > 0)) {
      listIt=delegator.find(entityName,entityConditionList,null,fieldSet,orderByList,new EntityFindOptions(true,EntityFindOptions.TYPE_SCROLL_INSENSITIVE,EntityFindOptions.CONCUR_READ_ONLY,-1,maxRows,distinct));
      listSize=listIt.getResultsSizeAfterPartialList();
    }
  }
 catch (  GenericEntityException e) {
    return ServiceUtil.returnError(UtilProperties.getMessage(resource,"CommonFindErrorRunning",UtilMisc.toMap("entityName",entityName,"errorString",e.getMessage()),locale));
  }
  Map<String,Object> results=ServiceUtil.returnSuccess();
  results.put("listIt",listIt);
  results.put("listSize",listSize);
  return results;
}
