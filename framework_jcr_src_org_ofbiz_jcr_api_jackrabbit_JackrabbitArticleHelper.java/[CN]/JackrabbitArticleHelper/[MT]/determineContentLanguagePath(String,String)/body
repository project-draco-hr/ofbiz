{
  if (ConstantsJackrabbit.ROOTPATH.equals(contentPath)) {
    return contentPath;
  }
  String canonicalizedContentPath=canonicalizeContentPath(contentPath);
  Session session=super.access.getSession();
  try {
    if (!session.itemExists(canonicalizedContentPath + contentLanguage) || (!session.getNode(canonicalizedContentPath + contentLanguage).hasProperty("localized") || !session.getNode(canonicalizedContentPath + contentLanguage).getProperty("localized").getBoolean())) {
      if (!session.itemExists(canonicalizedContentPath + determindeTheDefaultLanguage())) {
        NodeIterator childNodes=session.getNode(canonicalizedContentPath).getNodes();
        while (childNodes.hasNext()) {
          Node child=childNodes.nextNode();
          if (possibleLocales.contains(child.getName())) {
            contentPath=child.getPath();
            break;
          }
        }
        childNodes=null;
      }
 else {
        contentPath=canonicalizedContentPath + determindeTheDefaultLanguage();
      }
    }
 else {
      contentPath=canonicalizedContentPath + contentLanguage;
    }
  }
 catch (  RepositoryException e) {
    Debug.logError(e,module);
  }
  return contentPath;
}
