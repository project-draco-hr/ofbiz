{
  if (internalDelegator == null) {
    if (delegatorName == null)     delegatorName="default";
    if (delegatorName != null)     try {
      internalDelegator=UtilObject.getObjectFromFactory(DelegatorFactory.class,delegatorName);
    }
 catch (    ClassNotFoundException e) {
      Debug.logError(e,module);
    }
    if (internalDelegator == null) {
      throw new IllegalStateException("[GenericEntity.getDelegator] could not find delegator with name " + delegatorName);
    }
  }
  return internalDelegator;
}
