{
  GenericDelegator delegator=dctx.getDelegator();
  String cardNumber=(String)context.get("cardNumber");
  String pinNumber=(String)context.get("pinNumber");
  if (!validatePin(delegator,cardNumber,pinNumber)) {
    return ServiceUtil.returnError("PIN number is not valid!");
  }
  String currencyUom=UtilProperties.getPropertyValue("general.properties","currency.uom.id.default","USD");
  double balance=0.00;
  try {
    balance=FinAccountHelper.getAvailableBalance(cardNumber,currencyUom,delegator).doubleValue();
  }
 catch (  GeneralException e) {
    return ServiceUtil.returnError(e.getMessage());
  }
  Map result=ServiceUtil.returnSuccess();
  result.put("balance",new Double(balance));
  Debug.log("GC Balance Result - " + result,module);
  return result;
}
