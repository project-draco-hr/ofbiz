{
  if (entity == null)   return passedPurposes;
  List<String> purposeIds=null;
  if (passedPurposes == null) {
    purposeIds=FastList.newInstance();
  }
 else {
    purposeIds=FastList.newInstance();
    purposeIds.addAll(passedPurposes);
  }
  String entityName=entity.getEntityName();
  String lcEntityName=entityName.toLowerCase();
  List<GenericValue> purposes=null;
  try {
    purposes=entity.getRelated(entityName + "Purpose",null,null,true);
  }
 catch (  GenericEntityException e) {
    Debug.logError(e,"No associated purposes found. ",module);
    return purposeIds;
  }
  for (  GenericValue val : purposes) {
    purposeIds.add((String)val.get(lcEntityName + "PurposeTypeId"));
  }
  return purposeIds;
}
