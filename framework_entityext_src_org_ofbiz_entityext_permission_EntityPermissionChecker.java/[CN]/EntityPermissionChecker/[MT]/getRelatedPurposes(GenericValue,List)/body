{
  if (entity == null)   return passedPurposes;
  List purposeIds=null;
  if (passedPurposes == null) {
    purposeIds=new ArrayList();
  }
 else {
    purposeIds=new ArrayList(passedPurposes);
  }
  String entityName=entity.getEntityName();
  String lcEntityName=entityName.toLowerCase();
  List purposes=null;
  try {
    purposes=entity.getRelatedCache(entityName + "Purpose");
  }
 catch (  GenericEntityException e) {
    Debug.logError(e,"No associated purposes found. ",module);
    return purposeIds;
  }
  Iterator purposesIter=purposes.iterator();
  while (purposesIter.hasNext()) {
    GenericValue val=(GenericValue)purposesIter.next();
    purposeIds.add(val.get(lcEntityName + "PurposeTypeId"));
  }
  return purposeIds;
}
