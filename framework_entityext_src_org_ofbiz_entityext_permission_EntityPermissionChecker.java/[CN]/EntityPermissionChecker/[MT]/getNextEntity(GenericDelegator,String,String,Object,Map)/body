{
  GenericValue entity=null;
  if (obj instanceof String) {
    String entityId=(String)obj;
    if (entities != null)     entity=(GenericValue)entities.get(entityId);
    if (entity == null)     entity=delegator.findByPrimaryKeyCache(entityName,UtilMisc.toMap(pkFieldName,entityId));
  }
 else   if (obj instanceof GenericValue) {
    entity=(GenericValue)obj;
  }
  return entity;
}
