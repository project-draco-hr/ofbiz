{
  if (exclude == null) {
    productSearchContext.includeFeatureIdOrSetAndList.add(productFeatureIdSet);
  }
 else   if (exclude.equals(Boolean.TRUE)) {
    productSearchContext.excludeFeatureIds.addAll(productFeatureIdSet);
  }
 else   if (exclude.equals(Boolean.FALSE)) {
    productSearchContext.alwaysIncludeFeatureIdOrSetAndList.add(productFeatureIdSet);
  }
  StringBuffer featureIdInfo=new StringBuffer();
  Iterator featureIdIter=this.productFeatureIdSet.iterator();
  while (featureIdIter.hasNext()) {
    String featureId=(String)featureIdIter.next();
    featureIdInfo.append(featureId);
    if (featureIdIter.hasNext()) {
      featureIdInfo.append(",");
    }
  }
  productSearchContext.productSearchConstraintList.add(productSearchContext.getDelegator().makeValue("ProductSearchConstraint",UtilMisc.toMap("constraintName",constraintName,"infoString",featureIdInfo.toString())));
}
