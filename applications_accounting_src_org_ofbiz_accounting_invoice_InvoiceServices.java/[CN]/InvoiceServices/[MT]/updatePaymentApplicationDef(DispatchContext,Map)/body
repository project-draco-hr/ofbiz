{
  if (!context.containsKey("useHighestAmount")) {
    context.put("useHighestAmount","Y");
  }
  Double amountApplied=(Double)context.get("amountApplied");
  if (amountApplied != null) {
    BigDecimal amountAppliedBd=new BigDecimal(amountApplied.toString());
    context.put("amountApplied",amountAppliedBd);
  }
 else {
    BigDecimal amountAppliedBd=ZERO;
    context.put("amountApplied",amountAppliedBd);
  }
  return updatePaymentApplicationBd(dctx,context);
}
