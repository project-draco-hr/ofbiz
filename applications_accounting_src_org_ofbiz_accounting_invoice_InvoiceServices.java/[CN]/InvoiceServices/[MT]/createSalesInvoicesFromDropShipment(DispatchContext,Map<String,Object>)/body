{
  LocalDispatcher dispatcher=dctx.getDispatcher();
  String shipmentId=(String)context.get("shipmentId");
  Locale locale=(Locale)context.get("locale");
  Map<String,Object> serviceContext=UtilMisc.toMap("shipmentIds",UtilMisc.toList(shipmentId),"createSalesInvoicesForDropShipments",Boolean.TRUE,"userLogin",context.get("userLogin"));
  Map<String,Object> serviceResult;
  try {
    serviceResult=dispatcher.runSync("createInvoicesFromShipments",serviceContext);
  }
 catch (  GenericServiceException e) {
    String errorMessage=UtilProperties.getMessage(resource,"AccountingTroubleCallingCreateInvoicesFromShipmentService",UtilMisc.toMap("shipmentId",shipmentId),locale);
    Debug.logError(e,errorMessage,module);
    return ServiceUtil.returnError(errorMessage);
  }
  return serviceResult;
}
