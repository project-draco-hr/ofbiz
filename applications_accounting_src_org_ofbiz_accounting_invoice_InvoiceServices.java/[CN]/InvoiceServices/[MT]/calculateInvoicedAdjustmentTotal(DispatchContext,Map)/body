{
  GenericDelegator delegator=dctx.getDelegator();
  Locale locale=(Locale)context.get("locale");
  GenericValue orderAdjustment=(GenericValue)context.get("orderAdjustment");
  Map result=ServiceUtil.returnSuccess();
  BigDecimal invoicedTotal=ZERO;
  List invoicedAdjustments=null;
  try {
    invoicedAdjustments=delegator.findByAnd("OrderAdjustmentBilling",UtilMisc.toMap("orderAdjustmentId",orderAdjustment.getString("orderAdjustmentId")));
  }
 catch (  GenericEntityException e) {
    String errMsg=UtilProperties.getMessage(resource,"AccountingTroubleCallingCalculateInvoicedAdjustmentTotalService" + ": " + e.getMessage(),locale);
    Debug.logError(e,errMsg,module);
    return ServiceUtil.returnError(errMsg);
  }
  Iterator iait=invoicedAdjustments.iterator();
  while (iait.hasNext()) {
    GenericValue invoicedAdjustment=(GenericValue)iait.next();
    invoicedTotal=invoicedTotal.add(invoicedAdjustment.getBigDecimal("amount").setScale(decimals,rounding));
  }
  result.put("invoicedTotal",invoicedTotal);
  return result;
}
