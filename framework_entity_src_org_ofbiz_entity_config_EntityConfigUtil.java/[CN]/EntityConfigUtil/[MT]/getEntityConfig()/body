{
  EntityConfig instance=entityConfigCache.get("instance");
  if (instance == null) {
synchronized (EntityConfigUtil.class) {
      Element entityConfigElement=getXmlDocument().getDocumentElement();
      instance=new EntityConfig(entityConfigElement);
      EntityConfig previousInstance=entityConfigCache.putIfAbsent("instance",instance);
      instance=entityConfigCache.get("instance");
      if (previousInstance == null) {
        for (        EntityConfigListener listener : getConfigListeners()) {
          try {
            listener.onEntityConfigChange(instance);
          }
 catch (          Exception e) {
            Debug.logError(e,"Exception thrown while notifying listener " + listener + ": ",module);
          }
        }
      }
    }
  }
  return instance;
}
