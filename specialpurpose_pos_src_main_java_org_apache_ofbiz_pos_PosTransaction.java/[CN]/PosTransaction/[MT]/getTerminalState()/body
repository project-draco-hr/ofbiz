{
  Delegator delegator=session.getDelegator();
  GenericValue state=null;
  try {
    state=EntityQuery.use(delegator).from("PosTerminalState").where("posTerminalId",this.getTerminalId()).filterByDate(UtilDateTime.nowTimestamp(),"openedDate","closedDate").queryFirst();
  }
 catch (  GenericEntityException e) {
    Debug.logError(e,module);
  }
  return state;
}
