{
  OfbizLayout ofbizLayout=(OfbizLayout)layout;
  Delegator delegator=null;
  try {
    delegator=UtilObject.getObjectFromFactory(DelegatorFactory.class,ofbizLayout.delegatorName);
  }
 catch (  ClassNotFoundException e) {
    Debug.logError(e,WebslingerContextMapper.class.getName());
  }
  context.setAttribute("delegator",delegator);
  context.setAttribute("dispatcher",new WebslingerGenericDispatcher(context,layout.getTarget(),delegator,globalReaderURLs));
  context.setAttribute("authz",AuthorizationFactory.getInstance(delegator));
  context.setAttribute("security",SecurityFactory.getInstance(delegator));
}
