{
  Locale locale=UtilMisc.ensureLocale(context.get("locale"));
  String mimeTypeId="text/html";
  String expandedContentId=content.getContentId(context);
  String renderedContent=null;
  GenericDelegator delegator=(GenericDelegator)context.get("delegator");
  if (Debug.verboseOn())   Debug.logVerbose("expandedContentId:" + expandedContentId,module);
  try {
    if (UtilValidate.isNotEmpty(expandedContentId)) {
      if (WidgetContentWorker.contentWorker != null) {
        renderedContent=WidgetContentWorker.contentWorker.renderContentAsTextCacheExt(delegator,expandedContentId,context,null,locale,mimeTypeId);
      }
 else {
        Debug.logError("Not rendering content, not ContentWorker found.",module);
      }
    }
    if (UtilValidate.isEmpty(renderedContent)) {
      String editRequest=content.getEditRequest(context);
      if (UtilValidate.isNotEmpty(editRequest)) {
        if (WidgetContentWorker.contentWorker != null) {
          WidgetContentWorker.contentWorker.renderContentAsTextCacheExt(delegator,"NOCONTENTFOUND",writer,context,null,locale,mimeTypeId);
        }
 else {
          Debug.logError("Not rendering content, not ContentWorker found.",module);
        }
      }
    }
 else {
      if (content.xmlEscape()) {
        renderedContent=UtilFormatOut.encodeXmlValue(renderedContent);
      }
      writer.write(renderedContent);
    }
  }
 catch (  GeneralException e) {
    String errMsg="Error rendering included content with id [" + expandedContentId + "] : "+ e.toString();
    Debug.logError(e,errMsg,module);
  }
catch (  IOException e2) {
    String errMsg="Error rendering included content with id [" + expandedContentId + "] : "+ e2.toString();
    Debug.logError(e2,errMsg,module);
  }
}
