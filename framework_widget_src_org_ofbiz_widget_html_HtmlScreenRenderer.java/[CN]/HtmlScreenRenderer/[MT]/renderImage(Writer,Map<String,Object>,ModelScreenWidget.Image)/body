{
  writer.write("<img ");
  String id=image.getId(context);
  if (UtilValidate.isNotEmpty(id)) {
    writer.write(" id=\"");
    writer.write(id);
    writer.write("\"");
  }
  String style=image.getStyle(context);
  if (UtilValidate.isNotEmpty(style)) {
    writer.write(" class=\"");
    writer.write(style);
    writer.write("\"");
  }
  String wid=image.getWidth(context);
  if (UtilValidate.isNotEmpty(wid)) {
    writer.write(" width=\"");
    writer.write(wid);
    writer.write("\"");
  }
  String hgt=image.getHeight(context);
  if (UtilValidate.isNotEmpty(hgt)) {
    writer.write(" height=\"");
    writer.write(hgt);
    writer.write("\"");
  }
  String border=image.getBorder(context);
  if (UtilValidate.isNotEmpty(border)) {
    writer.write(" border=\"");
    writer.write(border);
    writer.write("\"");
  }
  String src=image.getSrc(context);
  if (UtilValidate.isNotEmpty(src)) {
    writer.write(" src=\"");
    String urlMode=image.getUrlMode();
    boolean fullPath=false;
    boolean secure=false;
    boolean encode=false;
    HttpServletResponse response=(HttpServletResponse)context.get("response");
    HttpServletRequest request=(HttpServletRequest)context.get("request");
    if (urlMode != null && urlMode.equalsIgnoreCase("intra-app")) {
      if (request != null && response != null) {
        ServletContext ctx=(ServletContext)request.getAttribute("servletContext");
        RequestHandler rh=(RequestHandler)ctx.getAttribute("_REQUEST_HANDLER_");
        String urlString=rh.makeLink(request,response,src,fullPath,secure,encode);
        writer.write(urlString);
      }
 else {
        writer.write(src);
      }
    }
 else     if (urlMode != null && urlMode.equalsIgnoreCase("content")) {
      if (request != null && response != null) {
        StringBuffer newURL=new StringBuffer();
        ContentUrlTag.appendContentPrefix(request,newURL);
        newURL.append(src);
        writer.write(newURL.toString());
      }
    }
 else {
      writer.write(src);
    }
    writer.write("\"");
  }
  writer.write("/>");
  appendWhitespace(writer);
}
