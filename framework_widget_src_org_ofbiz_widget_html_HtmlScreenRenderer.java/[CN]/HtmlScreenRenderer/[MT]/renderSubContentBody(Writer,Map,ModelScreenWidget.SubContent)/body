{
  Locale locale=Locale.getDefault();
  String mimeTypeId="text/html";
  String expandedContentId=content.getContentId(context);
  String expandedMapKey=content.getMapKey(context);
  String renderedContent=null;
  GenericDelegator delegator=(GenericDelegator)context.get("delegator");
  Timestamp fromDate=UtilDateTime.nowTimestamp();
  HttpServletRequest request=(HttpServletRequest)context.get("request");
  GenericValue userLogin=null;
  if (request != null) {
    HttpSession session=request.getSession();
    userLogin=(GenericValue)session.getAttribute("userLogin");
  }
  try {
    if (WidgetContentWorker.contentWorker != null) {
      renderedContent=WidgetContentWorker.contentWorker.renderSubContentAsTextCacheExt(delegator,expandedContentId,expandedMapKey,null,context,locale,mimeTypeId,userLogin,fromDate);
    }
 else {
      Debug.logError("Not rendering content, not ContentWorker found.",module);
    }
    if (UtilValidate.isEmpty(renderedContent)) {
      String editRequest=content.getEditRequest(context);
      if (UtilValidate.isNotEmpty(editRequest)) {
        if (WidgetContentWorker.contentWorker != null) {
          WidgetContentWorker.contentWorker.renderContentAsTextCacheExt(delegator,"NOCONTENTFOUND",writer,context,null,locale,mimeTypeId);
        }
 else {
          Debug.logError("Not rendering content, ContentWorker not found.",module);
        }
      }
    }
 else {
      if (content.xmlEscape()) {
        renderedContent=UtilFormatOut.encodeXmlValue(renderedContent);
      }
      writer.write(renderedContent);
    }
  }
 catch (  GeneralException e) {
    String errMsg="Error rendering included content with id [" + expandedContentId + "] : "+ e.toString();
    Debug.logError(e,errMsg,module);
  }
catch (  IOException e2) {
    String errMsg="Error rendering included content with id [" + expandedContentId + "] : "+ e2.toString();
    Debug.logError(e2,errMsg,module);
  }
}
