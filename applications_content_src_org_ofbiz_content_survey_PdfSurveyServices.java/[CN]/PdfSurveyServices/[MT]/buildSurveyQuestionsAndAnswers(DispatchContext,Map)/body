{
  GenericDelegator delegator=dctx.getDelegator();
  Map results=ServiceUtil.returnSuccess();
  String surveyResponseId=(String)context.get("surveyResponseId");
  String surveyId=null;
  List qAndA=new ArrayList();
  Document document=new Document();
  try {
    if (UtilValidate.isNotEmpty(surveyResponseId)) {
      GenericValue surveyResponse=delegator.findByPrimaryKey("SurveyResponse",UtilMisc.toMap("surveyResponseId",surveyResponseId));
      if (surveyResponse != null) {
        surveyId=surveyResponse.getString("surveyId");
      }
    }
    List responses=delegator.findByAnd("SurveyResponseAnswer",UtilMisc.toMap("surveyResponseId",surveyResponseId));
    Iterator iter=responses.iterator();
    while (iter.hasNext()) {
      String value=null;
      GenericValue surveyResponseAnswer=(GenericValue)iter.next();
      String surveyQuestionId=(String)surveyResponseAnswer.get("surveyQuestionId");
      GenericValue surveyQuestion=delegator.findByPrimaryKey("SurveyQuestion",UtilMisc.toMap("surveyQuestionId",surveyQuestionId));
      qAndA.add(UtilMisc.toMap("question",surveyQuestion,"response",surveyResponseAnswer));
    }
    results.put("questionsAndAnswers",qAndA);
  }
 catch (  GenericEntityException e) {
    System.err.println(e.getMessage());
    ServiceUtil.returnError(e.getMessage());
  }
  return results;
}
