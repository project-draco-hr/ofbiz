{
  String value=methodContext.expandString(string);
  String prefixValue=methodContext.expandString(prefix);
  String suffixValue=methodContext.expandString(suffix);
  if (!argListAcsr.isEmpty()) {
    List argList=(List)argListAcsr.get(methodContext);
    if (argList != null && argList.size() > 0) {
      value=MessageFormat.format(value,argList.toArray());
    }
  }
  StringBuffer newValue=new StringBuffer();
  if (value != null && value.length() > 0) {
    if (oldValue == null || oldValue.length() == 0) {
      newValue.append(value);
    }
 else {
      newValue.append(oldValue);
      if (prefixValue != null)       newValue.append(prefixValue);
      newValue.append(value);
      if (suffixValue != null)       newValue.append(suffixValue);
    }
  }
 else {
    if (oldValue == null || oldValue.length() == 0) {
      newValue.append(oldValue);
    }
  }
  return newValue.toString();
}
