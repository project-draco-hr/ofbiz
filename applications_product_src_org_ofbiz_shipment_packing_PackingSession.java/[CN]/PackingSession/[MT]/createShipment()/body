{
  Map<String,Object> newShipment=FastMap.newInstance();
  newShipment.put("originFacilityId",this.facilityId);
  newShipment.put("primaryShipGroupSeqId",primaryShipGrp);
  newShipment.put("primaryOrderId",primaryOrderId);
  newShipment.put("shipmentTypeId","OUTGOING_SHIPMENT");
  newShipment.put("statusId","SHIPMENT_INPUT");
  newShipment.put("handlingInstructions",instructions);
  newShipment.put("picklistBinId",picklistBinId);
  newShipment.put("additionalShippingCharge",additionalShippingCharge);
  newShipment.put("userLogin",userLogin);
  Debug.log("Creating new shipment with context: " + newShipment,module);
  Map<String,Object> newShipResp=this.getDispatcher().runSync("createShipment",newShipment);
  if (ServiceUtil.isError(newShipResp)) {
    throw new GeneralException(ServiceUtil.getErrorMessage(newShipResp));
  }
  this.shipmentId=(String)newShipResp.get("shipmentId");
}
