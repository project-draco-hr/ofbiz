{
  if (productId != null) {
    try {
      productId=ProductWorker.findProductId(this.getDelegator(),productId);
    }
 catch (    GenericEntityException e) {
      Debug.logError(e,module);
    }
  }
  double total=0.0;
  if (productId != null) {
    List<PackingSessionLine> lines=this.getLines();
    Iterator<PackingSessionLine> i=lines.iterator();
    while (i.hasNext()) {
      PackingSessionLine line=i.next();
      if (productId.equals(line.getProductId())) {
        if (packageSeq == -1 || packageSeq == line.getPackageSeq()) {
          total+=line.getQuantity();
        }
      }
    }
  }
  return total;
}
