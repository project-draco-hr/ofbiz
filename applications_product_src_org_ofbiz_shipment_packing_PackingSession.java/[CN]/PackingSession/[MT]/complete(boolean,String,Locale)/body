{
  if (this.getLines().size() == 0) {
    return "EMPTY";
  }
  this.checkPackedQty(orderId,locale);
  this.status=0;
  String shipmentId=this.getShipmentId();
  if (UtilValidate.isEmpty(shipmentId)) {
    this.createShipment();
  }
  this.createPackages();
  this.changeOrderItemStatus(orderId,shipmentId);
  this.applyItemsToPackages();
  this.updateShipmentRouteSegments();
  this.setShipmentToPacked();
  this.setPickerOnPicklist();
  this.runEvents(PackingEvent.EVENT_CODE_COMPLETE);
  return this.shipmentId;
}
