{
  GenericDelegator delegator=(GenericDelegator)request.getAttribute("delegator");
  try {
    GenericValue userLogin=delegator.findOne("UserLogin",false,"userLoginId",userLoginId);
    if (userLogin != null) {
      String enabled=userLogin.getString("enabled");
      if (enabled == null || "Y".equals(enabled)) {
        userLogin.set("hasLoggedOut","N");
        userLogin.store();
        Map<String,Object> ulSessionMap=LoginServices.getUserLoginSession(userLogin);
        return doMainLogin(request,response,userLogin,ulSessionMap);
      }
    }
  }
 catch (  GeneralException e) {
    Debug.logError(e,module);
  }
  return "error";
}
