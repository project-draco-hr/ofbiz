{
  HttpSession session=request.getSession();
  session.setAttribute("userLogin",userLogin);
  ModelEntity modelUserLogin=userLogin.getModelEntity();
  if (modelUserLogin.isField("partyId")) {
    try {
      GenericValue person=userLogin.getRelatedOne("Person");
      GenericValue partyGroup=userLogin.getRelatedOne("PartyGroup");
      if (person != null)       session.setAttribute("person",person);
      if (partyGroup != null)       session.setAttribute("partyGroup",partyGroup);
    }
 catch (    GenericEntityException e) {
      Debug.logError(e,"Error getting person/partyGroup info for session, ignoring...",module);
    }
  }
  VisitHandler.setUserLogin(session,userLogin,false);
}
