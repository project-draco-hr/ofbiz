{
  if (UtilValidate.isEmpty(modelService.location)) {
    throw new GenericServiceException("Cannot run Groovy service with empty location");
  }
  String location=this.getLocation(modelService);
  try {
    Object resultObj=BshUtil.runBshAtLocation(location,context);
    if (resultObj != null && resultObj instanceof Map) {
      Debug.logInfo("Got result Map from script return: " + resultObj,module);
      return cast(resultObj);
    }
 else     if (context.get("result") != null && context.get("result") instanceof Map) {
      Debug.logInfo("Got result Map from context: " + resultObj,module);
      return cast(context.get("result"));
    }
  }
 catch (  GeneralException e) {
    throw new GenericServiceException(e);
  }
  return ServiceUtil.returnSuccess();
}
