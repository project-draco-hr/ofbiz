{
  Delegator delegator=dispatcher.getDelegator();
  if (modelService.location == null || modelService.invoke == null)   throw new GenericServiceException("Cannot locate service to invoke");
  ServiceClient client=null;
  QName serviceName=null;
  try {
    client=new ServiceClient();
    Options options=new Options();
    EndpointReference endPoint=new EndpointReference(this.getLocation(modelService));
    options.setTo(endPoint);
    client.setOptions(options);
  }
 catch (  AxisFault e) {
    throw new GenericServiceException("RPC service error",e);
  }
  List<ModelParam> inModelParamList=modelService.getInModelParamList();
  if (Debug.infoOn())   Debug.logInfo("[SOAPClientEngine.invoke] : Parameter length - " + inModelParamList.size(),module);
  if (UtilValidate.isNotEmpty(modelService.nameSpace)) {
    serviceName=new QName(modelService.nameSpace,modelService.invoke);
  }
 else {
    serviceName=new QName(modelService.invoke);
  }
  int i=0;
  Map<String,Object> parameterMap=FastMap.newInstance();
  for (  ModelParam p : inModelParamList) {
    if (Debug.infoOn())     Debug.logInfo("[SOAPClientEngine.invoke} : Parameter: " + p.name + " ("+ p.mode+ ") - "+ i,module);
    if (!p.internal) {
      parameterMap.put(p.name,context.get(p.name));
    }
    i++;
  }
  OMElement parameterSer=null;
  try {
    String xmlParameters=XmlSerializer.serialize(parameterMap);
    XMLStreamReader reader=XMLInputFactory.newInstance().createXMLStreamReader(new StringReader(xmlParameters));
    StAXOMBuilder builder=new StAXOMBuilder(reader);
    parameterSer=builder.getDocumentElement();
  }
 catch (  Exception e) {
    Debug.logError(e,module);
  }
  Map<String,Object> results=null;
  try {
    OMFactory factory=OMAbstractFactory.getOMFactory();
    OMElement payload=factory.createOMElement(serviceName);
    payload.addChild(parameterSer.getFirstElement());
    OMElement respOMElement=client.sendReceive(payload);
    results=UtilGenerics.cast(XmlSerializer.deserialize(respOMElement.toString(),delegator));
  }
 catch (  Exception e) {
    Debug.logError(e,module);
  }
  return results;
}
