{
  HttpSession session=request.getSession();
  GenericDelegator delegator=(GenericDelegator)request.getAttribute("delegator");
  Security security=(Security)request.getAttribute("security");
  if (security != null && userLogin != null) {
    Security.userLoginSecurityGroupByUserLoginId.remove(userLogin.getString("userLoginId"));
  }
  LoginWorker.setLoggedOut(userLogin.getString("userLoginId"),delegator);
  String currCatalog=(String)session.getAttribute("CURRENT_CATALOG_ID");
  String delegatorName=(String)session.getAttribute("delegatorName");
  session.invalidate();
  session=request.getSession(true);
  if (currCatalog != null)   session.setAttribute("CURRENT_CATALOG_ID",currCatalog);
  if (delegatorName != null)   session.setAttribute("delegatorName",delegatorName);
}
