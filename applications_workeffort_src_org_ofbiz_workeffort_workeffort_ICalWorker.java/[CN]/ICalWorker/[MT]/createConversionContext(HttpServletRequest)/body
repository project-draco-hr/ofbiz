{
  Map<String,Object> context=FastMap.newInstance();
  Enumeration<String> attributeEnum=request.getAttributeNames();
  while (attributeEnum.hasMoreElements()) {
    String attributeName=attributeEnum.nextElement();
    context.put(attributeName,request.getAttribute(attributeName));
  }
  context.put("parameters",request.getParameterMap());
  context.put("locale",UtilHttp.getLocale(request));
  return context;
}
