{
  if (base == null)   return null;
  if (this.extName == null)   return null;
  if (this.subMapAccessor != null) {
    base=this.subMapAccessor.getOrCreateSubMap(base);
  }
  Object namedObj=base.get(this.extName);
  if (this.isListReference && (namedObj == null || namedObj instanceof List)) {
    List<Object> lst=checkList(namedObj);
    if (lst == null) {
      lst=FastList.newInstance();
      base.put(this.extName,lst);
    }
    Map<String,Object> extMap=null;
    if (lst.size() > this.listIndex) {
      extMap=checkMap(lst.get(this.listIndex));
    }
    if (extMap == null) {
      extMap=FastMap.newInstance();
      lst.add(this.listIndex,extMap);
    }
    return extMap;
  }
 else   if (namedObj == null || namedObj instanceof Map) {
    Map<String,Object> extMap=checkMap(namedObj);
    if (extMap == null) {
      extMap=FastMap.newInstance();
      base.put(this.extName,extMap);
    }
    return extMap;
  }
 else {
    return null;
  }
}
