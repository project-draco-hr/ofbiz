{
  GenericValue capTrans=null;
  try {
    List order=UtilMisc.toList("-transactionDate");
    List transactions=orderPaymentPreference.getRelated("PaymentGatewayResponse",null,order);
    List exprs=UtilMisc.toList(new EntityExpr("paymentServiceTypeEnumId",EntityOperator.EQUALS,CAPTURE_SERVICE_TYPE));
    List capTransactions=EntityUtil.filterByAnd(transactions,exprs);
    capTrans=EntityUtil.getFirst(capTransactions);
  }
 catch (  GenericEntityException e) {
    Debug.logError(e,"ERROR: Problem getting capture information from PaymentGatewayResponse",module);
  }
  return capTrans;
}
