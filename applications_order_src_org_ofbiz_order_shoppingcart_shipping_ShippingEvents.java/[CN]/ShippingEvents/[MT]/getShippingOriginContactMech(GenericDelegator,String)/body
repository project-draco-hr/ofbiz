{
  List conditions=UtilMisc.toList(new EntityExpr("partyId",EntityOperator.EQUALS,supplierPartyId),new EntityExpr("contactMechTypeId",EntityOperator.EQUALS,"POSTAL_ADDRESS"),new EntityExpr("contactMechPurposeTypeId",EntityOperator.IN,UtilMisc.toList("SHIP_ORIG_LOCATION","GENERAL_LOCATION")),EntityUtil.getFilterByDateExpr("contactFromDate","contactThruDate"),EntityUtil.getFilterByDateExpr("purposeFromDate","purposeThruDate"));
  List<GenericValue> addresses=delegator.findByAnd("PartyContactWithPurpose",conditions,UtilMisc.toList("contactMechPurposeTypeId DESC"));
  GenericValue generalAddress=null;
  GenericValue originAddress=null;
  for (  GenericValue address : addresses) {
    if ("GENERAL_LOCATION".equals(address.get("contactMechPurposeTypeId")))     generalAddress=address;
 else     if ("SHIP_ORIG_LOCATION".equals(address.get("contactMechPurposeTypeId")))     originAddress=address;
  }
  return originAddress != null ? originAddress : generalAddress;
}
