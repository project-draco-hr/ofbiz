{
  Double externalShipAmt=null;
  if (storeShipMeth.get("serviceName") != null) {
    String serviceName=storeShipMeth.getString("serviceName");
    String configProps=storeShipMeth.getString("configProps");
    if (UtilValidate.isNotEmpty(serviceName)) {
      context.put("serviceConfigProps",configProps);
      Map serviceResp=null;
      try {
        Debug.log("Service : " + serviceName + " / "+ configProps+ " -- "+ context,module);
        serviceResp=dispatcher.runSync(serviceName,context,0,true);
      }
 catch (      GenericServiceException e) {
        Debug.logError(e,"Shipment Service Error",module);
        throw new GeneralException();
      }
      if (!ServiceUtil.isError(serviceResp)) {
        externalShipAmt=(Double)serviceResp.get("shippingEstimateAmount");
      }
 else {
        String errMsg="Error getting external shipment cost estimate: " + ServiceUtil.getErrorMessage(serviceResp);
        Debug.logError(errMsg,module);
        throw new GeneralException(errMsg);
      }
    }
  }
  return externalShipAmt;
}
