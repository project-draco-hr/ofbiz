{
  if (!enabled) {
    Debug.logInfo("Service MCA [" + ruleName + "] is disabled; not running.",module);
    return;
  }
  boolean allCondTrue=true;
  Iterator i=conditions.iterator();
  while (i.hasNext()) {
    ServiceMcaCondition cond=(ServiceMcaCondition)i.next();
    if (!cond.eval(dispatcher,messageWrapper,userLogin)) {
      allCondTrue=false;
      break;
    }
  }
  if (allCondTrue) {
    Iterator a=actions.iterator();
    boolean allOkay=true;
    while (a.hasNext() && allOkay) {
      ServiceMcaAction action=(ServiceMcaAction)a.next();
      if (!actionsRun.contains(action.serviceName)) {
        if (action.runAction(dispatcher,messageWrapper,userLogin)) {
          actionsRun.add(action.serviceName);
        }
 else {
          allOkay=false;
        }
      }
    }
  }
}
