{
  Set<String> productIdSet=FastSet.newInstance();
  List<GenericValue> refubProductAssocs=EntityUtil.filterByDate(delegator.findByAnd("ProductAssoc",UtilMisc.toMap("productId",productId,"productAssocTypeId","PRODUCT_REFURB")));
  for (  GenericValue refubProductAssoc : refubProductAssocs) {
    productIdSet.add(refubProductAssoc.getString("productIdTo"));
  }
  List<GenericValue> refubProductToAssocs=EntityUtil.filterByDate(delegator.findByAnd("ProductAssoc",UtilMisc.toMap("productIdTo",productId,"productAssocTypeId","PRODUCT_REFURB")));
  for (  GenericValue refubProductToAssoc : refubProductToAssocs) {
    productIdSet.add(refubProductToAssoc.getString("productId"));
  }
  return productIdSet;
}
