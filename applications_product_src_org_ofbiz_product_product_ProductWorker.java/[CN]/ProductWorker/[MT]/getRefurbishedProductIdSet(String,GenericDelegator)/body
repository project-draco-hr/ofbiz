{
  Set<String> productIdSet=FastSet.newInstance();
  List<GenericValue> refubProductAssocs=EntityUtil.filterByDate(delegator.findByAnd("ProductAssoc",UtilMisc.toMap("productId",productId,"productAssocTypeId","PRODUCT_REFURB")));
  Iterator<GenericValue> refubProductAssocIter=refubProductAssocs.iterator();
  while (refubProductAssocIter.hasNext()) {
    GenericValue refubProductAssoc=refubProductAssocIter.next();
    productIdSet.add(refubProductAssoc.getString("productIdTo"));
  }
  List<GenericValue> refubProductToAssocs=EntityUtil.filterByDate(delegator.findByAnd("ProductAssoc",UtilMisc.toMap("productIdTo",productId,"productAssocTypeId","PRODUCT_REFURB")));
  Iterator<GenericValue> refubProductToAssocIter=refubProductToAssocs.iterator();
  while (refubProductToAssocIter.hasNext()) {
    GenericValue refubProductToAssoc=refubProductToAssocIter.next();
    productIdSet.add(refubProductToAssoc.getString("productId"));
  }
  return productIdSet;
}
