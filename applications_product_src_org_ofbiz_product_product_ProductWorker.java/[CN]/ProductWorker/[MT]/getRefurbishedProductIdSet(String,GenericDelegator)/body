{
  Set productIdSet=FastSet.newInstance();
  List refubProductAssocs=EntityUtil.filterByDate(delegator.findByAnd("ProductAssoc",UtilMisc.toMap("productId",productId,"productAssocTypeId","PRODUCT_REFURB")),true);
  Iterator refubProductAssocIter=refubProductAssocs.iterator();
  while (refubProductAssocIter.hasNext()) {
    GenericValue refubProductAssoc=(GenericValue)refubProductAssocIter.next();
    productIdSet.add(refubProductAssoc.get("productIdTo"));
  }
  List refubProductToAssocs=EntityUtil.filterByDate(delegator.findByAnd("ProductAssoc",UtilMisc.toMap("productIdTo",productId,"productAssocTypeId","PRODUCT_REFURB")),true);
  Iterator refubProductToAssocIter=refubProductToAssocs.iterator();
  while (refubProductToAssocIter.hasNext()) {
    GenericValue refubProductToAssoc=(GenericValue)refubProductToAssocIter.next();
    productIdSet.add(refubProductToAssoc.get("productId"));
  }
  return productIdSet;
}
