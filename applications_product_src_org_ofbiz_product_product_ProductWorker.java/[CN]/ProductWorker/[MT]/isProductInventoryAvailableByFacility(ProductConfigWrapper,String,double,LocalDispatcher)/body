{
  boolean available=true;
  List<ConfigOption> options=productConfig.getSelectedOptions();
  for (  ConfigOption ci : options) {
    List<GenericValue> products=ci.getComponents();
    for (    GenericValue product : products) {
      String productId=product.getString("productId");
      Double cmpQuantity=product.getDouble("quantity");
      double neededQty=1.0;
      if (cmpQuantity != null) {
        neededQty=quantity * cmpQuantity.doubleValue();
      }
      if (!isProductInventoryAvailableByFacility(productId,inventoryFacilityId,neededQty,dispatcher)) {
        ci.setAvailable(false);
      }
    }
    if (!ci.isAvailable()) {
      available=false;
    }
  }
  return available;
}
