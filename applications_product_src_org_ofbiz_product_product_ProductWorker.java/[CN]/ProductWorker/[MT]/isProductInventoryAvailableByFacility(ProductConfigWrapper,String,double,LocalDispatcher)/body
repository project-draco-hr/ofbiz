{
  boolean available=true;
  List<ConfigOption> options=productConfig.getSelectedOptions();
  Iterator<ConfigOption> optionsIt=options.iterator();
  while (optionsIt.hasNext()) {
    ConfigOption ci=optionsIt.next();
    List<GenericValue> products=ci.getComponents();
    Iterator<GenericValue> productsIt=products.iterator();
    while (productsIt.hasNext()) {
      GenericValue product=productsIt.next();
      String productId=product.getString("productId");
      Double cmpQuantity=product.getDouble("quantity");
      double neededQty=1.0;
      if (cmpQuantity != null) {
        neededQty=quantity * cmpQuantity.doubleValue();
      }
      if (!isProductInventoryAvailableByFacility(productId,inventoryFacilityId,neededQty,dispatcher)) {
        ci.setAvailable(false);
      }
    }
    if (!ci.isAvailable()) {
      available=false;
    }
  }
  return available;
}
