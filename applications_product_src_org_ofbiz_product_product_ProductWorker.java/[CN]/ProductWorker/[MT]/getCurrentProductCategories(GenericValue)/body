{
  if (product == null) {
    return null;
  }
  List<GenericValue> categories=FastList.newInstance();
  try {
    List<GenericValue> categoryMembers=product.getRelated("ProductCategoryMember",null,null,false);
    categoryMembers=EntityUtil.filterByDate(categoryMembers);
    categories=EntityUtil.getRelated("ProductCategory",categoryMembers);
  }
 catch (  GenericEntityException e) {
    Debug.logError(e,module);
  }
  return categories;
}
