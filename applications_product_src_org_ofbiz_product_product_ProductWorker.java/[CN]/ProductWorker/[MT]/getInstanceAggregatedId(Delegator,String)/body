{
  GenericValue instanceProduct=delegator.findByPrimaryKey("Product",UtilMisc.toMap("productId",instanceProductId));
  if (UtilValidate.isNotEmpty(instanceProduct) && EntityTypeUtil.hasParentType(delegator,"ProductType","productTypeId",instanceProduct.getString("productTypeId"),"parentTypeId","AGGREGATED")) {
    GenericValue productAssoc=EntityUtil.getFirst(EntityUtil.filterByDate(instanceProduct.getRelatedByAnd("AssocProductAssoc",UtilMisc.toMap("productAssocTypeId","PRODUCT_CONF"))));
    if (UtilValidate.isNotEmpty(productAssoc)) {
      return productAssoc.getString("productId");
    }
  }
  return null;
}
