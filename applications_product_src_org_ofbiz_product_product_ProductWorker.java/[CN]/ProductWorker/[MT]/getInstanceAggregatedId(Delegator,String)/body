{
  GenericValue instanceProduct=delegator.findByPrimaryKey("Product",UtilMisc.toMap("productId",instanceProductId));
  if (UtilValidate.isNotEmpty(instanceProduct) && ("AGGREGATED_CONF".equals(instanceProduct.getString("productTypeId")) || "AGGREGATEDSERV_CONF".equals(instanceProduct.getString("productTypeId")))) {
    GenericValue productAssoc=EntityUtil.getFirst(EntityUtil.filterByDate(instanceProduct.getRelatedByAnd("AssocProductAssoc",UtilMisc.toMap("productAssocTypeId","PRODUCT_CONF"))));
    if (UtilValidate.isNotEmpty(productAssoc)) {
      return productAssoc.getString("productId");
    }
  }
  return null;
}
