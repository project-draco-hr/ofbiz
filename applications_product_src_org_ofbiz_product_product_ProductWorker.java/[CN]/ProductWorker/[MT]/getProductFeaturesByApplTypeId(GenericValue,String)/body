{
  if (product == null) {
    return null;
  }
  List features=new ArrayList();
  try {
    if (product != null) {
      List productAppls;
      if (productFeatureApplTypeId == null) {
        productAppls=product.getRelated("ProductFeatureAppl");
      }
 else {
        productAppls=product.getRelatedByAnd("ProductFeatureAppl",UtilMisc.toMap("productFeatureApplTypeId",productFeatureApplTypeId));
      }
      for (int i=0; i < productAppls.size(); i++) {
        GenericValue productAppl=(GenericValue)productAppls.get(i);
        features.add(productAppl.getRelatedOne("ProductFeature"));
      }
      features=EntityUtil.orderBy(features,UtilMisc.toList("description"));
    }
  }
 catch (  GenericEntityException e) {
    Debug.logError(e,module);
  }
  return features;
}
