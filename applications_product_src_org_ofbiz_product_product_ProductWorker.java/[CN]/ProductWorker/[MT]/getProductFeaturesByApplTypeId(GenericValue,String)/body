{
  if (product == null) {
    return null;
  }
  List<GenericValue> features=null;
  try {
    if (product != null) {
      List<GenericValue> productAppls;
      List<EntityCondition> condList=UtilMisc.toList(EntityCondition.makeCondition("productId",product.getString("productId")),EntityUtil.getFilterByDateExpr());
      if (productFeatureApplTypeId != null) {
        condList.add(EntityCondition.makeCondition("productFeatureApplTypeId",productFeatureApplTypeId));
      }
      EntityCondition cond=EntityCondition.makeCondition(condList);
      productAppls=product.getDelegator().findList("ProductFeatureAppl",cond,null,UtilMisc.toList("description"),null,false);
      features=EntityUtil.getRelated("ProductFeature",productAppls);
    }
  }
 catch (  GenericEntityException e) {
    Debug.logError(e,module);
    features=FastList.newInstance();
  }
  return features;
}
