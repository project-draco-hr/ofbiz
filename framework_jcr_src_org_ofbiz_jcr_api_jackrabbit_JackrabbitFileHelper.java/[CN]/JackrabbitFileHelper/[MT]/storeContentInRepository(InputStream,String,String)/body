{
  if (UtilValidate.isEmpty(folderPath)) {
    throw new ObjectContentManagerException("Please specify a folder path, the folder path should not be empty!");
  }
 else   if (ConstantsJackrabbit.ROOTPATH.equals(folderPath)) {
    throw new ObjectContentManagerException("Please specify a folder, a file content can't be stored directly under root.");
  }
  JackrabbitResource ormResource=new JackrabbitResource();
  ormResource.setData(fileData);
  ormResource.setMimeType(getMimeTypeFromInputStream(fileData));
  ormResource.setLastModified(new GregorianCalendar());
  JackrabbitFile ormFile=new JackrabbitFile();
  ormFile.setCreationDate(new GregorianCalendar());
  ormFile.setResource(ormResource);
  ormFile.setPath(fileName);
  folderPath=JcrUtilJackrabbit.createAbsoluteNodePath(folderPath);
  if (super.access.getSession().itemExists(folderPath)) {
    OfbizRepositoryMapping orm=super.access.getContentObject(folderPath);
    if (orm instanceof JackrabbitFolder) {
      JackrabbitFolder ormFolder=(JackrabbitFolder)orm;
      ormFolder.addChild(ormFile);
      super.access.updateContentObject(ormFolder);
    }
  }
 else {
    JackrabbitFolder ormFolder=new JackrabbitFolder();
    ormFolder.addChild(ormFile);
    ormFolder.setPath(folderPath);
    super.access.storeContentObject(ormFolder);
  }
}
