{
  if (UtilValidate.isEmpty(facilityId))   return null;
  if (UtilValidate.isEmpty(purposeTypes))   return null;
  Iterator ptIt=purposeTypes.iterator();
  while (ptIt.hasNext()) {
    String purposeType=(String)ptIt.next();
    List facilityContactMechPurposes=null;
    List conditionList=FastList.newInstance();
    conditionList.add(EntityCondition.makeCondition("facilityId",facilityId));
    conditionList.add(EntityCondition.makeCondition("contactMechPurposeTypeId",purposeType));
    conditionList.add(EntityCondition.makeConditionDate("fromDate","thruDate"));
    EntityCondition entityCondition=EntityCondition.makeCondition(conditionList);
    try {
      facilityContactMechPurposes=delegator.findList("FacilityContactMechPurpose",entityCondition,null,UtilMisc.toList("-fromDate"),null,true);
    }
 catch (    GenericEntityException e) {
      Debug.logWarning(e,module);
    }
    Iterator fcmpIt=facilityContactMechPurposes.iterator();
    while (fcmpIt.hasNext()) {
      GenericValue facilityContactMechPurpose=(GenericValue)fcmpIt.next();
      String contactMechId=facilityContactMechPurpose.getString("contactMechId");
      List facilityContactMechs=null;
      conditionList=FastList.newInstance();
      conditionList.add(EntityCondition.makeCondition("facilityId",facilityId));
      conditionList.add(EntityCondition.makeCondition("contactMechId",contactMechId));
      conditionList.add(EntityCondition.makeConditionDate("fromDate","thruDate"));
      entityCondition=EntityCondition.makeCondition(conditionList);
      try {
        facilityContactMechs=delegator.findList("FacilityContactMech",entityCondition,null,UtilMisc.toList("-fromDate"),null,true);
      }
 catch (      GenericEntityException e) {
        Debug.logWarning(e,module);
      }
      if (UtilValidate.isNotEmpty(facilityContactMechs)) {
        return EntityUtil.getFirst(facilityContactMechs);
      }
    }
  }
  return null;
}
