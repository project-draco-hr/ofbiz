{
  LocalDispatcher dispatcher=dctx.getDispatcher();
  GenericValue userLogin=(GenericValue)context.get("userLogin");
  String quoteTypeId=(String)context.get("quoteTypeId");
  String partyId=(String)context.get("partyId");
  Timestamp issueDate=(Timestamp)context.get("issueDate");
  String statusId=(String)context.get("statusId");
  String currencyUomId=(String)context.get("currencyUomId");
  String productStoreId=(String)context.get("productStoreId");
  String salesChannelEnumId=(String)context.get("salesChannelEnumId");
  Timestamp validFromDate=(Timestamp)context.get("validFromDate");
  Timestamp validThruDate=(Timestamp)context.get("validThruDate");
  String quoteName=(String)context.get("quoteName");
  String description=(String)context.get("description");
  List quoteItems=(List)context.get("quoteItems");
  List quoteAttributes=(List)context.get("quoteAttributes");
  Map result=FastMap.newInstance();
  try {
    Map quoteIn=UtilMisc.toMap("quoteTypeId",quoteTypeId,"partyId",partyId,"issueDate",issueDate,"statusId",statusId,"currencyUomId",currencyUomId);
    quoteIn.put("productStoreId",productStoreId);
    quoteIn.put("salesChannelEnumId",salesChannelEnumId);
    quoteIn.put("productStoreId",productStoreId);
    quoteIn.put("validFromDate",validFromDate);
    quoteIn.put("validThruDate",validThruDate);
    quoteIn.put("quoteName",quoteName);
    quoteIn.put("description",description);
    quoteIn.put("userLogin",userLogin);
    Map quoteOut=dispatcher.runSync("createQuote",quoteIn);
    if (UtilValidate.isNotEmpty(quoteOut) && UtilValidate.isNotEmpty(quoteOut.get("quoteId"))) {
      String quoteId=(String)quoteOut.get("quoteId");
      result.put("quoteId",quoteId);
      if (UtilValidate.isNotEmpty(quoteItems)) {
        Iterator quoteIt=quoteItems.iterator();
        while (quoteIt.hasNext()) {
          GenericValue quoteItem=(GenericValue)quoteIt.next();
          quoteItem.set("quoteId",quoteId);
          Map quoteItemIn=UtilMisc.toMap(quoteItem);
          quoteItemIn.put("userLogin",userLogin);
          dispatcher.runSync("createQuoteItem",quoteItemIn);
        }
      }
      if (UtilValidate.isNotEmpty(quoteAttributes)) {
        Iterator quoteAttrIt=quoteAttributes.iterator();
        while (quoteAttrIt.hasNext()) {
          GenericValue quoteAttr=(GenericValue)quoteAttrIt.next();
          quoteAttr.set("quoteId",quoteId);
          Map quoteAttrIn=UtilMisc.toMap(quoteAttr);
          quoteAttrIn.put("userLogin",userLogin);
          dispatcher.runSync("createQuoteAttribute",quoteAttrIn);
        }
      }
    }
 else {
      return ServiceUtil.returnFailure("Could not storing Quote");
    }
  }
 catch (  GenericServiceException e) {
    Debug.logError(e,"Problem storing Quote",module);
  }
  return result;
}
