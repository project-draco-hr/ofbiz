{
  LocalDispatcher dispatcher=dctx.getDispatcher();
  GenericValue userLogin=(GenericValue)context.get("userLogin");
  String quoteTypeId=(String)context.get("quoteTypeId");
  String partyId=(String)context.get("partyId");
  Timestamp issueDate=(Timestamp)context.get("issueDate");
  String statusId=(String)context.get("statusId");
  String currencyUomId=(String)context.get("currencyUomId");
  String productStoreId=(String)context.get("productStoreId");
  String salesChannelEnumId=(String)context.get("salesChannelEnumId");
  Timestamp validFromDate=(Timestamp)context.get("validFromDate");
  Timestamp validThruDate=(Timestamp)context.get("validThruDate");
  String quoteName=(String)context.get("quoteName");
  String description=(String)context.get("description");
  List quoteItems=(List)context.get("quoteItems");
  List quoteAttributes=(List)context.get("quoteAttributes");
  List quoteCoefficients=(List)context.get("quoteCoefficients");
  List quoteRoles=(List)context.get("quoteRoles");
  List quoteTerms=(List)context.get("quoteTerms");
  List quoteTermAttributes=(List)context.get("quoteTermAttributes");
  List quoteWorkEfforts=(List)context.get("quoteWorkEfforts");
  List quoteAdjustments=(List)context.get("quoteAdjustments");
  Map result=FastMap.newInstance();
  try {
    Map quoteIn=UtilMisc.toMap("quoteTypeId",quoteTypeId,"partyId",partyId,"issueDate",issueDate,"statusId",statusId,"currencyUomId",currencyUomId);
    quoteIn.put("productStoreId",productStoreId);
    quoteIn.put("salesChannelEnumId",salesChannelEnumId);
    quoteIn.put("productStoreId",productStoreId);
    quoteIn.put("validFromDate",validFromDate);
    quoteIn.put("validThruDate",validThruDate);
    quoteIn.put("quoteName",quoteName);
    quoteIn.put("description",description);
    if (userLogin != null) {
      quoteIn.put("userLogin",userLogin);
    }
    Map quoteOut=dispatcher.runSync("createQuote",quoteIn);
    if (UtilValidate.isNotEmpty(quoteOut) && UtilValidate.isNotEmpty(quoteOut.get("quoteId"))) {
      String quoteId=(String)quoteOut.get("quoteId");
      result.put("quoteId",quoteId);
      if (UtilValidate.isNotEmpty(quoteItems)) {
        Iterator quoteIt=quoteItems.iterator();
        while (quoteIt.hasNext()) {
          GenericValue quoteItem=(GenericValue)quoteIt.next();
          quoteItem.set("quoteId",quoteId);
          Map quoteItemIn=quoteItem.getAllFields();
          quoteItemIn.put("userLogin",userLogin);
          dispatcher.runSync("createQuoteItem",quoteItemIn);
        }
      }
      if (UtilValidate.isNotEmpty(quoteAttributes)) {
        Iterator quoteAttrIt=quoteAttributes.iterator();
        while (quoteAttrIt.hasNext()) {
          GenericValue quoteAttr=(GenericValue)quoteAttrIt.next();
          quoteAttr.set("quoteId",quoteId);
          Map quoteAttrIn=quoteAttr.getAllFields();
          quoteAttrIn.put("userLogin",userLogin);
          dispatcher.runSync("createQuoteAttribute",quoteAttrIn);
        }
      }
      if (UtilValidate.isNotEmpty(quoteCoefficients)) {
        Iterator quoteCoefficientIt=quoteCoefficients.iterator();
        while (quoteCoefficientIt.hasNext()) {
          GenericValue quoteCoefficient=(GenericValue)quoteCoefficientIt.next();
          quoteCoefficient.set("quoteId",quoteId);
          Map quoteCoefficientIn=quoteCoefficient.getAllFields();
          quoteCoefficientIn.put("userLogin",userLogin);
          dispatcher.runSync("createQuoteCoefficient",quoteCoefficientIn);
        }
      }
      if (UtilValidate.isNotEmpty(quoteRoles)) {
        Iterator quoteRoleIt=quoteRoles.iterator();
        while (quoteRoleIt.hasNext()) {
          GenericValue quoteRole=(GenericValue)quoteRoleIt.next();
          quoteRole.set("quoteId",quoteId);
          Map quoteRoleIn=quoteRole.getAllFields();
          quoteRoleIn.put("userLogin",userLogin);
          dispatcher.runSync("createQuoteRole",quoteRoleIn);
        }
      }
      if (UtilValidate.isNotEmpty(quoteWorkEfforts)) {
        Iterator quoteWorkEffortIt=quoteWorkEfforts.iterator();
        while (quoteWorkEffortIt.hasNext()) {
          GenericValue quoteWorkEffort=(GenericValue)quoteWorkEffortIt.next();
          quoteWorkEffort.set("quoteId",quoteId);
          Map quoteWorkEffortIn=quoteWorkEffort.getAllFields();
          quoteWorkEffortIn.put("userLogin",userLogin);
          dispatcher.runSync("createQuoteWorkEffort",quoteWorkEffortIn);
        }
      }
      if (UtilValidate.isNotEmpty(quoteAdjustments)) {
        Iterator quoteAdjustmentIt=quoteAdjustments.iterator();
        while (quoteAdjustmentIt.hasNext()) {
          GenericValue quoteAdjustment=(GenericValue)quoteAdjustmentIt.next();
          quoteAdjustment.set("quoteId",quoteId);
          Map quoteAdjustmentIn=quoteAdjustment.getAllFields();
          quoteAdjustmentIn.put("userLogin",userLogin);
          dispatcher.runSync("createQuoteAdjustment",quoteAdjustmentIn);
        }
      }
    }
 else {
      return ServiceUtil.returnFailure("Could not storing Quote");
    }
  }
 catch (  GenericServiceException e) {
    Debug.logError(e,"Problem storing Quote",module);
  }
  return result;
}
