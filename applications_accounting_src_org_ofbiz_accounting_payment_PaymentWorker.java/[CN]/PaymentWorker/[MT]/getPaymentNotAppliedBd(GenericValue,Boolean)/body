{
  if (actual.equals(Boolean.TRUE) && UtilValidate.isNotEmpty(payment.getBigDecimal("actualCurrencyAmount"))) {
    return payment.getBigDecimal("actualCurrencyAmount").subtract(getPaymentAppliedBd(payment,actual)).setScale(decimals,rounding);
  }
  return payment.getBigDecimal("amount").subtract(getPaymentAppliedBd(payment)).setScale(decimals,rounding);
}
