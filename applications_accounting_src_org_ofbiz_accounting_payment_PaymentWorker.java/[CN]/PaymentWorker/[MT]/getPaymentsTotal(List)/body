{
  if (payments == null) {
    throw new IllegalArgumentException("Payment list cannot be null");
  }
  BigDecimal paymentsTotal=BigDecimal.ZERO;
  Iterator i=payments.iterator();
  while (i.hasNext()) {
    GenericValue payment=(GenericValue)i.next();
    paymentsTotal=paymentsTotal.add(payment.getBigDecimal("amount")).setScale(decimals,rounding);
  }
  return paymentsTotal;
}
