{
  BigDecimal paymentApplied=new BigDecimal("0");
  List paymentApplications=null;
  try {
    paymentApplications=payment.getRelated("PaymentApplication");
  }
 catch (  GenericEntityException e) {
    Debug.logError(e,"Trouble getting paymentApplicationlist",module);
  }
  if (paymentApplications != null && paymentApplications.size() > 0) {
    Iterator p=paymentApplications.iterator();
    while (p.hasNext()) {
      GenericValue paymentApplication=(GenericValue)p.next();
      paymentApplied=paymentApplied.add(paymentApplication.getBigDecimal("amountApplied")).setScale(decimals,rounding);
    }
  }
  paymentApplications=null;
  try {
    paymentApplications=payment.getRelated("ToPaymentApplication");
  }
 catch (  GenericEntityException e) {
    Debug.logError(e,"Trouble getting the 'to' paymentApplicationlist",module);
  }
  if (paymentApplications != null && paymentApplications.size() > 0) {
    Iterator p=paymentApplications.iterator();
    while (p.hasNext()) {
      GenericValue paymentApplication=(GenericValue)p.next();
      paymentApplied=paymentApplied.add(paymentApplication.getBigDecimal("amountApplied")).setScale(decimals,rounding);
    }
  }
  return paymentApplied;
}
