{
  BigDecimal paymentApplied=BigDecimal.ZERO;
  List paymentApplications=null;
  try {
    paymentApplications=payment.getRelated("PaymentApplication");
  }
 catch (  GenericEntityException e) {
    Debug.logError(e,"Trouble getting paymentApplicationlist",module);
  }
  if (UtilValidate.isNotEmpty(paymentApplications)) {
    Iterator p=paymentApplications.iterator();
    while (p.hasNext()) {
      GenericValue paymentApplication=(GenericValue)p.next();
      paymentApplied=paymentApplied.add(paymentApplication.getBigDecimal("amountApplied")).setScale(decimals,rounding);
    }
  }
  paymentApplications=null;
  try {
    paymentApplications=payment.getRelated("ToPaymentApplication");
  }
 catch (  GenericEntityException e) {
    Debug.logError(e,"Trouble getting the 'to' paymentApplicationlist",module);
  }
  if (UtilValidate.isNotEmpty(paymentApplications)) {
    Iterator p=paymentApplications.iterator();
    while (p.hasNext()) {
      GenericValue paymentApplication=(GenericValue)p.next();
      paymentApplied=paymentApplied.add(paymentApplication.getBigDecimal("amountApplied")).setScale(decimals,rounding);
    }
  }
  return paymentApplied;
}
