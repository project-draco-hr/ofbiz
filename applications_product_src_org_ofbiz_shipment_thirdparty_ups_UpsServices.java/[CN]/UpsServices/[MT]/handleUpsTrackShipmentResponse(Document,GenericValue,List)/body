{
  Element trackResponseElement=trackResponseDocument.getDocumentElement();
  Element responseElement=UtilXml.firstChildElement(trackResponseElement,"Response");
  Element responseTransactionReferenceElement=UtilXml.firstChildElement(responseElement,"TransactionReference");
  String responseTransactionReferenceCustomerContext=UtilXml.childElementValue(responseTransactionReferenceElement,"CustomerContext");
  String responseTransactionReferenceXpciVersion=UtilXml.childElementValue(responseTransactionReferenceElement,"XpciVersion");
  String responseStatusCode=UtilXml.childElementValue(responseElement,"ResponseStatusCode");
  String responseStatusDescription=UtilXml.childElementValue(responseElement,"ResponseStatusDescription");
  List errorList=FastList.newInstance();
  UpsServices.handleErrors(responseElement,errorList);
  if ("1".equals(responseStatusCode)) {
    Element shipmentElement=UtilXml.firstChildElement(trackResponseElement,"Shipment");
    Element shipperElement=UtilXml.firstChildElement(shipmentElement,"Shipper");
    String shipperNumber=UtilXml.childElementValue(shipperElement,"ShipperNumber");
    Element serviceElement=UtilXml.firstChildElement(shipmentElement,"Service");
    String serviceCode=UtilXml.childElementValue(serviceElement,"Code");
    String serviceDescription=UtilXml.childElementValue(serviceElement,"Description");
    String shipmentIdentificationNumber=UtilXml.childElementValue(shipmentElement,"ShipmentIdentificationNumber");
    List packageElements=UtilXml.childElementList(shipmentElement,"Package");
    Iterator packageElementIter=packageElements.iterator();
    while (packageElementIter.hasNext()) {
      Element packageElement=(Element)packageElementIter.next();
    }
    StringBuilder successString=new StringBuilder("The UPS TrackShipment succeeded");
    if (errorList.size() > 0) {
      successString.append(", but the following occurred: ");
      Iterator errorListIter=errorList.iterator();
      while (errorListIter.hasNext()) {
        String errorMsg=(String)errorListIter.next();
        successString.append(errorMsg);
        if (errorListIter.hasNext()) {
          successString.append(", ");
        }
      }
    }
    return ServiceUtil.returnSuccess(successString.toString());
  }
 else {
    errorList.add(0,"The UPS ShipmentConfirm failed");
    return ServiceUtil.returnError(errorList);
  }
}
