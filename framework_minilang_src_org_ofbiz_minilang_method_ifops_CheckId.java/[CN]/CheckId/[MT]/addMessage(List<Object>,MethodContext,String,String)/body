{
  String message=methodContext.expandString(this.message);
  String propertyResource=methodContext.expandString(this.propertyResource);
  if (!isProperty && message != null) {
    messages.add(message + errorDetails);
  }
 else   if (isProperty && propertyResource != null && message != null) {
    String propMsg=UtilProperties.getMessage(propertyResource,message,methodContext.getEnvMap(),methodContext.getLocale());
    if (propMsg == null || propMsg.length() == 0) {
      messages.add(defaultMessage + errorDetails);
    }
 else {
      messages.add(methodContext.expandString(propMsg) + errorDetails);
    }
  }
 else {
    messages.add(defaultMessage + errorDetails);
  }
}
