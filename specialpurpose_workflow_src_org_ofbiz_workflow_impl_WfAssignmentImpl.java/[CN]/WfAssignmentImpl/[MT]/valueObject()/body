{
  GenericValue value=null;
  Map<String,Object> fields=new HashMap<String,Object>();
  fields.put("workEffortId",activity.runtimeKey());
  fields.put("partyId",resource.resourcePartyId());
  fields.put("roleTypeId",resource.resourceRoleId());
  fields.put("fromDate",fromDate);
  try {
    value=activity.getDelegator().findOne("WorkEffortPartyAssignment",fields,false);
  }
 catch (  GenericEntityException e) {
    throw new WfException(e.getMessage(),e);
  }
  if (value == null)   throw new WfException("Invalid assignment; no runtime entity");
  return value;
}
