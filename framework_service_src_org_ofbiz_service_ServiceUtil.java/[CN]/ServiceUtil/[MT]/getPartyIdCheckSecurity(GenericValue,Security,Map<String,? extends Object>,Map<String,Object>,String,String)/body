{
  String partyId=(String)context.get("partyId");
  Locale locale=getLocale(context);
  if (partyId == null || partyId.length() == 0) {
    partyId=userLogin.getString("partyId");
  }
  if (partyId == null || partyId.length() == 0) {
    result.put(ModelService.RESPONSE_MESSAGE,ModelService.RESPOND_ERROR);
    String errMsg=UtilProperties.getMessage(ServiceUtil.resource,"serviceUtil.party_id_missing",locale) + ".";
    result.put(ModelService.ERROR_MESSAGE,errMsg);
    return partyId;
  }
  if (!partyId.equals(userLogin.getString("partyId"))) {
    if (!security.hasEntityPermission(secEntity,secOperation,userLogin)) {
      result.put(ModelService.RESPONSE_MESSAGE,ModelService.RESPOND_ERROR);
      String errMsg=UtilProperties.getMessage(ServiceUtil.resource,"serviceUtil.no_permission_to_operation",locale) + ".";
      result.put(ModelService.ERROR_MESSAGE,errMsg);
      return partyId;
    }
  }
  return partyId;
}
