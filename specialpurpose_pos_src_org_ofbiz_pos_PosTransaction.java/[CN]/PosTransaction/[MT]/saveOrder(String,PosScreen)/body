{
  trace("Save an order");
  if (cart.size() == 0) {
    pos.showDialog("dialog/error/exception",UtilProperties.getMessage("OrderErrorUiLabels","OrderUnableToCreateNewShoppingList",locale));
    return;
  }
  Delegator delegator=this.session.getDelegator();
  LocalDispatcher dispatcher=session.getDispatcher();
  GenericValue userLogin=session.getUserLogin();
  String shoppingListId=null;
  if (!UtilValidate.isEmpty(shoppingListName)) {
    cart.setOrderPartyId(partyId);
    cart.setOrderName(shoppingListName);
    Map orderRes=ch.createOrder(session.getUserLogin());
    if (orderRes != null && ServiceUtil.isError(orderRes)) {
      Debug.logError(ServiceUtil.getErrorMessage(orderRes),module);
    }
 else     if (orderRes != null) {
      this.orderId=(String)orderRes.get("orderId");
    }
  }
}
