{
  int rowsChanged=0;
  ModelReader reader=delegator.getModelReader();
  Collection entityCol=reader.getEntityNames();
  Iterator classNamesIterator=entityCol.iterator();
  while (classNamesIterator != null && classNamesIterator.hasNext()) {
    ModelEntity entity=reader.getModelEntity((String)classNamesIterator.next());
    String baseName=entity.getPlainTableName();
    if (entity instanceof ModelViewEntity) {
      baseName=ModelUtil.javaNameToDbName(entity.getEntityName());
    }
    if (baseName != null) {
      try {
        List toBeStored=new LinkedList();
        toBeStored.add(delegator.makeValue("SecurityPermission",UtilMisc.toMap("permissionId",baseName + "_ADMIN","description","Permission to Administer a " + entity.getEntityName() + " entity.")));
        toBeStored.add(delegator.makeValue("SecurityGroupPermission",UtilMisc.toMap("groupId","FULLADMIN","permissionId",baseName + "_ADMIN")));
        rowsChanged+=delegator.storeAll(toBeStored);
      }
 catch (      GenericEntityException e) {
        errorMessages.add("[install.generateData] ERROR: Failed Security Generation for entity \"" + baseName + "\"");
      }
    }
  }
  return rowsChanged;
}
