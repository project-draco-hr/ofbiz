{
  GenericDelegator delegator=dctx.getDelegator();
  String finAccountId=(String)context.get("finAccountId");
  if (finAccountId == null) {
    return ServiceUtil.returnError("Financial account ID is required for this service!");
  }
  GenericValue finAccount;
  try {
    finAccount=delegator.findByPrimaryKey("FinAccount",UtilMisc.toMap("finAccountId",finAccountId));
  }
 catch (  GenericEntityException ex) {
    return ServiceUtil.returnError(ex.getMessage());
  }
  if (finAccount != null) {
    String frozen=finAccount.getString("isFrozen");
    if (frozen == null)     frozen="N";
    BigDecimal balance=finAccount.getBigDecimal("actualBalance");
    if (balance == null) {
      balance=FinAccountHelper.ZERO;
    }
    Debug.log("Account #" + finAccountId + " Balance: "+ balance+ " Frozen: "+ frozen,module);
    if ("N".equals(frozen) && balance.compareTo(FinAccountHelper.ZERO) < 1) {
      finAccount.set("isFrozen","Y");
      Debug.logInfo("Financial account [" + finAccountId + "] has passed its threshold ["+ balance+ "] (Frozen)",module);
    }
 else     if ("Y".equals(frozen) && balance.compareTo(FinAccountHelper.ZERO) > 0) {
      finAccount.set("isFrozen","N");
      Debug.logInfo("Financial account [" + finAccountId + "] has been made current ["+ balance+ "] (Un-Frozen)",module);
    }
    try {
      finAccount.store();
    }
 catch (    GenericEntityException e) {
      return ServiceUtil.returnError(e.getMessage());
    }
  }
  return ServiceUtil.returnSuccess();
}
