{
  NumberFormat nf=null;
  DateFormat df=null;
  BodyContent body=getBodyContent();
  String value=body.getString();
  body.clearBody();
  if (value == null || value.length() == 0)   return SKIP_BODY;
  if (type.charAt(0) == 'C' || type.charAt(0) == 'c')   nf=NumberFormat.getCurrencyInstance();
  if (type.charAt(0) == 'N' || type.charAt(0) == 'n')   nf=NumberFormat.getNumberInstance();
  if (type.charAt(0) == 'D' || type.charAt(0) == 'd')   df=DateFormat.getDateInstance();
  try {
    if (nf != null) {
      NumberFormat strFormat=NumberFormat.getInstance();
      getPreviousOut().print(nf.format(strFormat.parse(value.trim())));
    }
 else     if (df != null) {
      getPreviousOut().print(df.format(df.parse(value.trim())));
    }
 else {
      getPreviousOut().print(value);
    }
  }
 catch (  Exception e) {
    if (UtilJ2eeCompat.useNestedJspException(pageContext.getServletContext())) {
      throw new JspException(e.getMessage(),e);
    }
 else {
      Debug.logError(e,"Server does not support nested exceptions, here is the exception",module);
      throw new JspException(e.toString());
    }
  }
  return SKIP_BODY;
}
