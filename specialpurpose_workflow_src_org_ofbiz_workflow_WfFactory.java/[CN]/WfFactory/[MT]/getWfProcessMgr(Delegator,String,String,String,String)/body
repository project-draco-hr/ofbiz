{
  if (delegator == null)   throw new WfException("Delegator cannot be null");
  if (pkg == null)   throw new WfException("Workflow package id cannot be null.");
  if (pid == null)   throw new WfException("Workflow process id cannot be null");
  String key=delegator.getDelegatorName() + ":" + pkg+ ":"+ pkver+ ":"+ pid+ ":"+ pver;
  if (!wfProcessMgrCache.containsKey(key)) {
synchronized (WfFactory.class) {
      if (!wfProcessMgrCache.containsKey(key)) {
        wfProcessMgrCache.put(key,new WfProcessMgrImpl(delegator,pkg,pkver,pid,pver));
      }
    }
  }
  return (WfProcessMgr)wfProcessMgrCache.get(key);
}
