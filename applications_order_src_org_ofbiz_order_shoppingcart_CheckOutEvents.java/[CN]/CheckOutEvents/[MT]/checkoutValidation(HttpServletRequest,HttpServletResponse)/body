{
  ShoppingCart cart=(ShoppingCart)request.getSession().getAttribute("shoppingCart");
  List<GenericValue> paymentMethods=cart.getPaymentMethods();
  if (UtilValidate.isEmpty(paymentMethods)) {
    String errMsg=UtilProperties.getMessage(resource_error,"OrderNoPaymentMethodSelected",(cart != null ? cart.getLocale() : UtilHttp.getLocale(request)));
    request.setAttribute("_ERROR_MESSAGE_",errMsg);
    return "error";
  }
  String shipmentMethod=cart.getShipmentMethodTypeId();
  if (UtilValidate.isEmpty(shipmentMethod)) {
    String errMsg=UtilProperties.getMessage(resource_error,"OrderNoShipmentMethodSelected",(cart != null ? cart.getLocale() : UtilHttp.getLocale(request)));
    request.setAttribute("_ERROR_MESSAGE_",errMsg);
    return "error";
  }
  return "success";
}
