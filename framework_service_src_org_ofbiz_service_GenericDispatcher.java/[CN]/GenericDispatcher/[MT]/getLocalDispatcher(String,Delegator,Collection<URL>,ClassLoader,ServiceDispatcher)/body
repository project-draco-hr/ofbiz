{
  if (dispatcherName == null) {
    dispatcherName=delegator.getDelegatorName();
    Debug.logWarning("Got a getGenericDispatcher call with a null dispatcherName, assuming default for the name.",module);
  }
  if (UtilValidate.isNotEmpty(delegator)) {
    if (UtilValidate.isNotEmpty(delegator.getDelegatorTenantId())) {
      dispatcherName+="#" + delegator.getDelegatorTenantId();
    }
  }
  LocalDispatcher dispatcher=dispatcherCache.get(dispatcherName);
  if (dispatcher == null) {
synchronized (GenericDispatcher.class) {
      dispatcher=dispatcherCache.get(dispatcherName);
      if (dispatcher == null) {
        if (Debug.infoOn())         Debug.logInfo("Creating new dispatcher [" + dispatcherName + "] ("+ Thread.currentThread().getName()+ ")",module);
        if (delegator == null && serviceDispatcher != null) {
          delegator=serviceDispatcher.getDelegator();
        }
        if (loader == null) {
          loader=GenericDispatcher.class.getClassLoader();
        }
        ServiceDispatcher sd=serviceDispatcher != null ? serviceDispatcher : ServiceDispatcher.getInstance(dispatcherName,delegator);
        LocalDispatcher thisDispatcher=null;
        if (sd != null) {
          dispatcher=sd.getLocalDispatcher(dispatcherName);
        }
        if (thisDispatcher == null) {
          dispatcher=new GenericDispatcher(dispatcherName,delegator,readerURLs,loader,sd);
        }
        if (dispatcher != null) {
          dispatcherCache.put(dispatcherName,dispatcher);
        }
 else {
          Debug.logError("Could not create dispatcher with name " + dispatcherName + ", constructor failed (got null value) not sure why/how.",module);
        }
      }
    }
  }
  return dispatcher;
}
