{
  Writer writer=new StringWriter();
  renderContentAsText(dispatcher,delegator,contentId,writer,templateContext,locale,mimeTypeId,null,null,cache);
  String rendered=writer.toString();
  if (EntityUtilProperties.propertyValueEqualsIgnoreCase("content.properties","content.sanitize","true",delegator) && (rendered.contains("<script>") || rendered.contains("<!--") || rendered.contains("<div")|| rendered.contains("<style>")|| rendered.contains("<span")|| rendered.contains("<input")|| rendered.contains("<input")|| rendered.contains("<iframe")|| rendered.contains("<a"))) {
    PolicyFactory sanitizer=Sanitizers.FORMATTING.and(Sanitizers.BLOCKS).and(Sanitizers.IMAGES).and(Sanitizers.LINKS).and(Sanitizers.STYLES);
    rendered=sanitizer.sanitize(rendered);
  }
  return rendered;
}
