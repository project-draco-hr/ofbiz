{
  Writer writer=new StringWriter();
  renderContentAsText(dispatcher,delegator,contentId,writer,templateContext,locale,mimeTypeId,null,null,cache);
  String rendered=writer.toString();
  if ((rendered.contains("<script>") || rendered.contains("<!--") || rendered.contains("<div")|| rendered.contains("<style>")|| rendered.contains("<span")|| rendered.contains("<input")|| rendered.contains("<input")|| rendered.contains("<iframe")|| rendered.contains("<a")) && !UtilProperties.getPropertyAsBoolean("owasp","sanitizer.permissive.policy",false)) {
    rendered=encoder.sanitize(rendered);
  }
  return rendered;
}
