{
  List exprList=new ArrayList();
  EntityExpr joinExpr=null;
  EntityExpr expr=null;
  if (direction != null && direction.equalsIgnoreCase("From")) {
    joinExpr=new EntityExpr("contentIdTo",EntityOperator.EQUALS,contentId);
  }
 else {
    joinExpr=new EntityExpr("contentId",EntityOperator.EQUALS,contentId);
  }
  exprList.add(joinExpr);
  if (assocTypes != null && assocTypes.size() > 0) {
    List exprListOr=new ArrayList();
    Iterator it=assocTypes.iterator();
    while (it.hasNext()) {
      String assocType=(String)it.next();
      expr=new EntityExpr("contentAssocTypeId",EntityOperator.EQUALS,assocType);
      exprListOr.add(expr);
    }
    EntityConditionList assocExprList=new EntityConditionList(exprListOr,EntityOperator.OR);
    exprList.add(assocExprList);
  }
  if (fromDate != null) {
    EntityExpr fromExpr=new EntityExpr("fromDate",EntityOperator.GREATER_THAN_EQUAL_TO,fromDate);
    exprList.add(fromExpr);
  }
  if (thruDate != null) {
    List thruList=new ArrayList();
    EntityExpr thruExpr=new EntityExpr("thruDate",EntityOperator.LESS_THAN,thruDate);
    thruList.add(thruExpr);
    EntityExpr thruExpr2=new EntityExpr("thruDate",EntityOperator.EQUALS,null);
    thruList.add(thruExpr2);
    EntityConditionList thruExprList=new EntityConditionList(thruList,EntityOperator.OR);
    exprList.add(thruExprList);
  }
 else   if (fromDate != null) {
    List thruList=new ArrayList();
    EntityExpr thruExpr=new EntityExpr("thruDate",EntityOperator.GREATER_THAN,fromDate);
    thruList.add(thruExpr);
    EntityExpr thruExpr2=new EntityExpr("thruDate",EntityOperator.EQUALS,null);
    thruList.add(thruExpr2);
    EntityConditionList thruExprList=new EntityConditionList(thruList,EntityOperator.OR);
    exprList.add(thruExprList);
  }
 else {
    EntityExpr thruExpr2=new EntityExpr("thruDate",EntityOperator.EQUALS,null);
    exprList.add(thruExpr2);
  }
  EntityConditionList assocExprList=new EntityConditionList(exprList,EntityOperator.AND);
  List relatedAssocs=delegator.findByCondition("ContentAssoc",assocExprList,new ArrayList(),UtilMisc.toList("-fromDate"));
  return relatedAssocs;
}
