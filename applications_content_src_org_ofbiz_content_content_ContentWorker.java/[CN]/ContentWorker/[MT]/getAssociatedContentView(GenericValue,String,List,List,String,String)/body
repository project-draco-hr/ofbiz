{
  List contentList=new ArrayList();
  List exprListAnd=new ArrayList();
  String origContentId=(String)currentContent.get("contentId");
  String contentIdName="contentId";
  String contentAssocViewName="contentAssocView";
  if (linkDir != null && linkDir.equalsIgnoreCase("TO")) {
    contentIdName=contentIdName.concat("To");
    contentAssocViewName=contentAssocViewName.concat("To");
  }
  EntityExpr expr=new EntityExpr(contentIdName,EntityOperator.EQUALS,origContentId);
  exprListAnd.add(expr);
  if (contentTypes.size() > 0) {
    List exprListOr=new ArrayList();
    Iterator it=contentTypes.iterator();
    while (it.hasNext()) {
      String contentType=(String)it.next();
      expr=new EntityExpr("contentTypeId",EntityOperator.EQUALS,contentType);
      exprListOr.add(expr);
    }
    EntityConditionList contentExprList=new EntityConditionList(exprListOr,EntityOperator.OR);
    exprListAnd.add(contentExprList);
  }
  if (assocTypes.size() > 0) {
    List exprListOr=new ArrayList();
    Iterator it=assocTypes.iterator();
    while (it.hasNext()) {
      String assocType=(String)it.next();
      expr=new EntityExpr("contentAssocTypeId",EntityOperator.EQUALS,assocType);
      exprListOr.add(expr);
    }
    EntityConditionList assocExprList=new EntityConditionList(exprListOr,EntityOperator.OR);
    exprListAnd.add(assocExprList);
  }
  if (fromDate != null) {
    Timestamp tsFrom=UtilDateTime.toTimestamp(fromDate);
    expr=new EntityExpr("fromDate",EntityOperator.GREATER_THAN_EQUAL_TO,tsFrom);
    exprListAnd.add(expr);
  }
  if (thruDate != null) {
    Timestamp tsThru=UtilDateTime.toTimestamp(thruDate);
    expr=new EntityExpr("thruDate",EntityOperator.LESS_THAN,tsThru);
    exprListAnd.add(expr);
  }
  EntityConditionList contentCondList=new EntityConditionList(exprListAnd,EntityOperator.AND);
  GenericDelegator delegator=currentContent.getDelegator();
  contentList=delegator.findByCondition(contentAssocViewName,contentCondList,null,null);
  return contentList;
}
