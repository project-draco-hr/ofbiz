{
  List permElements=UtilXml.childElementList(baseElement,"check-permission");
  List rolePermElements=UtilXml.childElementList(baseElement,"check-role-member");
  List serviceSecurity=UtilXml.childElementList(baseElement,"service-security");
  Iterator si=permElements.iterator();
  while (si.hasNext()) {
    Element element=(Element)si.next();
    ModelPermission perm=new ModelPermission();
    perm.nameOrRole=element.getAttribute("permission");
    perm.action=element.getAttribute("action");
    if (perm.action != null && perm.action.length() > 0) {
      perm.permissionType=ModelPermission.ENTITY_PERMISSION;
    }
 else {
      perm.permissionType=ModelPermission.PERMISSION;
    }
    perm.serviceModel=service;
    group.permissions.add(perm);
  }
  Iterator ri=rolePermElements.iterator();
  while (ri.hasNext()) {
    Element element=(Element)ri.next();
    ModelPermission perm=new ModelPermission();
    perm.permissionType=ModelPermission.ROLE_MEMBER;
    perm.nameOrRole=element.getAttribute("role-type");
    perm.serviceModel=service;
    group.permissions.add(perm);
  }
  Iterator ci=serviceSecurity.iterator();
  while (ci.hasNext()) {
    Element element=(Element)ci.next();
    ModelPermission perm=new ModelPermission();
    perm.permissionType=ModelPermission.CUSTOM;
    perm.nameOrRole=element.getAttribute("name");
    perm.clazz=element.getAttribute("class");
    perm.serviceModel=service;
    group.permissions.add(perm);
  }
}
