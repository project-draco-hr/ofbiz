{
  Map<String,Object> result=FastMap.newInstance();
  Delegator delegator=dctx.getDelegator();
  Collection<Map<String,GenericValue>> parties=FastList.newInstance();
  String email=(String)context.get("email");
  Locale locale=(Locale)context.get("locale");
  String errMsg=null;
  if (email.length() == 0) {
    errMsg=UtilProperties.getMessage(resource,"partyservices.required_parameter_email_cannot_be_empty",locale);
    return ServiceUtil.returnError(errMsg);
  }
  try {
    EntityExpr ee=EntityCondition.makeCondition(EntityFunction.UPPER_FIELD("infoString"),EntityOperator.LIKE,EntityFunction.UPPER(("%" + email.toUpperCase()) + "%"));
    List<GenericValue> c=EntityUtil.filterByDate(delegator.findList("PartyAndContactMech",ee,null,UtilMisc.toList("infoString"),null,false),true);
    if (Debug.verboseOn())     Debug.logVerbose("List: " + c,module);
    if (Debug.infoOn())     Debug.logInfo("PartyFromEmail number found: " + c.size(),module);
    if (c != null) {
      for (      GenericValue pacm : c) {
        GenericValue party=delegator.makeValue("Party",UtilMisc.toMap("partyId",pacm.get("partyId"),"partyTypeId",pacm.get("partyTypeId")));
        parties.add(UtilMisc.<String,GenericValue>toMap("party",party));
      }
    }
  }
 catch (  GenericEntityException e) {
    Map<String,String> messageMap=UtilMisc.toMap("errMessage",e.getMessage());
    errMsg=UtilProperties.getMessage(resource,"partyservices.cannot_get_party_entities_read",messageMap,locale);
    return ServiceUtil.returnError(errMsg);
  }
  if (parties.size() > 0)   result.put("parties",parties);
  return result;
}
