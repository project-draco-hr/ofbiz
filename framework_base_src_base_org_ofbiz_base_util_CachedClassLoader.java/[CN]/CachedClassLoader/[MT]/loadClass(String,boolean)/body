{
  Class<?> theClass=globalClassNameClassMap.get(name);
  if (theClass == null)   theClass=localClassNameClassMap.get(name);
  if (theClass == null) {
    if (localBadClassNameSet.contains(name) || globalBadClassNameSet.contains(name)) {
      if (Debug.verboseOn())       Debug.logVerbose("Cached loader got a known bad class name: [" + name + "]",module);
      throw new ClassNotFoundException("Cached loader got a known bad class name: " + name);
    }
  }
  if (theClass == null) {
    if (Debug.verboseOn())     Debug.logVerbose("Cached loader cache miss for class name: [" + name + "]",module);
synchronized (this) {
      theClass=localClassNameClassMap.get(name);
      if (theClass == null) {
        try {
          theClass=super.loadClass(name,resolve);
          if (isGlobalPath(name)) {
            globalClassNameClassMap.put(name,theClass);
          }
 else {
            localClassNameClassMap.put(name,theClass);
          }
        }
 catch (        ClassNotFoundException e) {
          if (Debug.verboseOn())           Debug.logVerbose("Remembering invalid class name: [" + name + "]",module);
          if (isGlobalPath(name)) {
            globalBadClassNameSet.add(name);
          }
 else {
            localBadClassNameSet.add(name);
          }
          throw e;
        }
      }
    }
  }
  return theClass;
}
