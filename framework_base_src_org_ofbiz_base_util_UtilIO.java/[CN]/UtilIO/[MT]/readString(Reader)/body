{
  StringBuilder buf=new StringBuilder();
  BufferedReader br=null;
  try {
    br=reader instanceof BufferedReader ? (BufferedReader)reader : new BufferedReader(reader);
    String str;
    while ((str=br.readLine()) != null) {
      buf.append(str);
      buf.append(System.getProperty("line.separator"));
    }
  }
  finally {
    if (br != null) {
      try {
        br.close();
      }
 catch (      IOException e) {
        Debug.logError(e,"Error closing after reading text: " + e.toString(),module);
      }
    }
  }
  return buf.toString();
}
