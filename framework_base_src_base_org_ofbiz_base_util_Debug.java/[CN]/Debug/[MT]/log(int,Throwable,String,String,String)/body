{
  if (isOn(level)) {
    if (packException && t != null) {
      msg=System.getProperty("line.separator") + ExceptionHelper.packException(msg,t,true);
      t=null;
    }
    if (useLog4J) {
      Logger logger=getLogger(module);
      if (SYS_DEBUG != null) {
        logger.setLevel(Level.DEBUG);
      }
      logger.log(callingClass,levelObjs[level],msg,t);
    }
 else {
      StringBuffer prefixBuf=new StringBuffer();
      prefixBuf.append(dateFormat.format(new java.util.Date()));
      prefixBuf.append(" [OFBiz");
      if (module != null) {
        prefixBuf.append(":");
        prefixBuf.append(module);
      }
      prefixBuf.append(":");
      prefixBuf.append(levels[level]);
      prefixBuf.append("] ");
      if (msg != null) {
        getPrintWriter().print(prefixBuf.toString());
        getPrintWriter().println(msg);
      }
      if (t != null) {
        getPrintWriter().print(prefixBuf.toString());
        getPrintWriter().println("Received throwable:");
        t.printStackTrace(getPrintWriter());
      }
    }
  }
}
