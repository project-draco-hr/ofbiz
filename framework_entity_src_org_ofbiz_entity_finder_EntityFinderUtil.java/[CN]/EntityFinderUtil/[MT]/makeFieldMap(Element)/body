{
  Map fieldMap=null;
  List fieldMapElementList=UtilXml.childElementList(element,"field-map");
  if (fieldMapElementList.size() > 0) {
    fieldMap=new HashMap();
    Iterator fieldMapElementIter=fieldMapElementList.iterator();
    while (fieldMapElementIter.hasNext()) {
      Element fieldMapElement=(Element)fieldMapElementIter.next();
      String fieldName=fieldMapElement.getAttribute("field-name");
      String envName=fieldMapElement.getAttribute("env-name");
      String value=fieldMapElement.getAttribute("value");
      if (UtilValidate.isEmpty(fieldName)) {
        fieldMap.put(new FlexibleMapAccessor(envName),new FlexibleMapAccessor(envName));
      }
 else {
        if (UtilValidate.isNotEmpty(value)) {
          fieldMap.put(new FlexibleMapAccessor(fieldName),new FlexibleStringExpander(value));
        }
 else {
          if (UtilValidate.isNotEmpty(envName)) {
            fieldMap.put(new FlexibleMapAccessor(fieldName),new FlexibleMapAccessor(envName));
          }
 else {
            fieldMap.put(new FlexibleMapAccessor(fieldName),new FlexibleMapAccessor(fieldName));
          }
        }
      }
    }
  }
  return fieldMap;
}
