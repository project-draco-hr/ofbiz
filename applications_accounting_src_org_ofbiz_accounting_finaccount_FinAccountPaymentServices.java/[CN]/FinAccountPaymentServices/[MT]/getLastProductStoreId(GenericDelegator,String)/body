{
  EntityFindOptions opts=new EntityFindOptions();
  opts.setMaxRows(1);
  opts.setFetchSize(1);
  List exprs=FastList.newInstance();
  exprs.add(new EntityExpr("finAccountTransTypeId",EntityOperator.EQUALS,"DEPOSIT"));
  exprs.add(new EntityExpr("finAccountId",EntityOperator.EQUALS,finAccountId));
  exprs.add(new EntityExpr("orderId",EntityOperator.NOT_EQUAL,null));
  List orderBy=UtilMisc.toList("-transactionDate");
  List transList=null;
  try {
    transList=delegator.findByCondition("FinAccountTrans",new EntityConditionList(exprs,EntityOperator.AND),null,null,orderBy,opts);
  }
 catch (  GenericEntityException e) {
    Debug.logError(e,module);
  }
  GenericValue trans=EntityUtil.getFirst(transList);
  if (trans != null) {
    String orderId=trans.getString("orderId");
    OrderReadHelper orh=new OrderReadHelper(delegator,orderId);
    return orh.getProductStoreId();
  }
  try {
    GenericValue store=EntityUtil.getFirst(delegator.findAll("ProductStore",UtilMisc.toList("productStoreId")));
    if (store != null)     return store.getString("productStoreId");
  }
 catch (  GenericEntityException e) {
    Debug.logError(e,module);
  }
  return null;
}
