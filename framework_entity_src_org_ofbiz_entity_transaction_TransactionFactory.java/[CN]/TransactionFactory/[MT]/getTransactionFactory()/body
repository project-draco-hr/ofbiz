{
  TransactionFactoryInterface instance=txFactoryRef.get();
  if (instance == null) {
    try {
      instance=createTransactionFactoryInterface();
      if (txFactoryRef.compareAndSet(null,instance)) {
        Debug.logInfo("Factory method created new TransactionFactoryInterface instance " + instance,module);
      }
 else {
        instance=txFactoryRef.get();
      }
    }
 catch (    Exception e) {
      Debug.logError(e,"Exception thrown while creating TransactionFactoryInterface instance: ",module);
      throw new IllegalStateException("Error loading TransactionFactory class: " + e);
    }
  }
  return instance;
}
