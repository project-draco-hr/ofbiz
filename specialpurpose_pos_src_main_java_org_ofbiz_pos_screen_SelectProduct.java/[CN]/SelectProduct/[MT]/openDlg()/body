{
  XDialog dlg=(XDialog)pageMgr.loadPage(m_pos.getScreenLocation() + "/dialog/SelectProduct");
  m_dialog=dlg;
  dlg.setCaption(UtilProperties.getMessage(PosTransaction.resource,"PosSelectAProduct",Locale.getDefault()));
  m_productsList=(XList)dlg.findComponent("productsList");
  XEventHelper.addMouseHandler(this,m_productsList,"DoubleClick");
  m_cancel=(XButton)dlg.findComponent("BtnCancel");
  m_select=(XButton)dlg.findComponent("BtnSelect");
  XEventHelper.addMouseHandler(this,m_cancel,"cancel");
  XEventHelper.addMouseHandler(this,m_select,"selectProduct");
  m_listModel=new DefaultListModel();
  for (  Map.Entry<String,Object> entry : m_productsMap.entrySet()) {
    String val=entry.getValue().toString();
    m_listModel.addElement(val);
  }
  m_productsList.setModel(m_listModel);
  m_productsList.setVisibleRowCount(-1);
  m_productsList.ensureIndexIsVisible(m_productsList.getItemCount());
  m_productsList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
  m_productsList.setToolTipText(UtilProperties.getMessage(PosTransaction.resource,"PosSelectProductListDblClickTip",Locale.getDefault()));
  dlg.pack();
  dlg.showDialog(this);
  return m_productIdSelected;
}
